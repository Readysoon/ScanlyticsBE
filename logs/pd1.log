[2024/07/29 22:09:29.387 +00:00] [INFO] [util.go:41] ["Welcome to Placement Driver (PD)"]
[2024/07/29 22:09:29.390 +00:00] [INFO] [util.go:42] [PD] [release-version=v6.1.0]
[2024/07/29 22:09:29.390 +00:00] [INFO] [util.go:43] [PD] [edition=Community]
[2024/07/29 22:09:29.390 +00:00] [INFO] [util.go:44] [PD] [git-hash=d82f4fab6cf37cd1eca9c3574984e12a7ae27c42]
[2024/07/29 22:09:29.391 +00:00] [INFO] [util.go:45] [PD] [git-branch=heads/refs/tags/v6.1.0]
[2024/07/29 22:09:29.391 +00:00] [INFO] [util.go:46] [PD] [utc-build-time="2022-06-01 01:47:53"]
[2024/07/29 22:09:29.391 +00:00] [INFO] [metricutil.go:83] ["disable Prometheus push client"]
[2024/07/29 22:09:29.391 +00:00] [INFO] [server.go:240] ["PD Config"] [config="{\"client-urls\":\"http://0.0.0.0:2379\",\"peer-urls\":\"http://0.0.0.0:2380\",\"advertise-client-urls\":\"http://pd1:2379\",\"advertise-peer-urls\":\"http://pd1:2380\",\"name\":\"pd1\",\"data-dir\":\"/data/pd1\",\"force-new-cluster\":false,\"enable-grpc-gateway\":true,\"initial-cluster\":\"pd0=http://pd0:2380,pd1=http://pd1:2380,pd2=http://pd2:2380\",\"initial-cluster-state\":\"new\",\"initial-cluster-token\":\"pd-cluster\",\"join\":\"\",\"lease\":3,\"log\":{\"level\":\"info\",\"format\":\"text\",\"disable-timestamp\":false,\"file\":{\"filename\":\"/logs/pd1.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0},\"development\":false,\"disable-caller\":false,\"disable-stacktrace\":false,\"disable-error-verbose\":true,\"sampling\":null},\"tso-save-interval\":\"3s\",\"tso-update-physical-interval\":\"50ms\",\"enable-local-tso\":false,\"metric\":{\"job\":\"pd1\",\"address\":\"\",\"interval\":\"15s\"},\"schedule\":{\"max-snapshot-count\":64,\"max-pending-peer-count\":64,\"max-merge-region-size\":20,\"max-merge-region-keys\":200000,\"split-merge-interval\":\"1h0m0s\",\"enable-one-way-merge\":\"false\",\"enable-cross-table-merge\":\"true\",\"patrol-region-interval\":\"10ms\",\"max-store-down-time\":\"30m0s\",\"max-store-preparing-time\":\"48h0m0s\",\"leader-schedule-limit\":4,\"leader-schedule-policy\":\"count\",\"region-schedule-limit\":2048,\"replica-schedule-limit\":64,\"merge-schedule-limit\":8,\"hot-region-schedule-limit\":4,\"hot-region-cache-hits-threshold\":3,\"store-limit\":{},\"tolerant-size-ratio\":0,\"low-space-ratio\":0.8,\"high-space-ratio\":0.7,\"region-score-formula-version\":\"v2\",\"scheduler-max-waiting-operator\":5,\"enable-remove-down-replica\":\"true\",\"enable-replace-offline-replica\":\"true\",\"enable-make-up-replica\":\"true\",\"enable-remove-extra-replica\":\"true\",\"enable-location-replacement\":\"true\",\"enable-debug-metrics\":\"false\",\"enable-joint-consensus\":\"true\",\"schedulers-v2\":[{\"type\":\"balance-region\",\"args\":null,\"disable\":false,\"args-payload\":\"\"},{\"type\":\"balance-leader\",\"args\":null,\"disable\":false,\"args-payload\":\"\"},{\"type\":\"hot-region\",\"args\":null,\"disable\":false,\"args-payload\":\"\"},{\"type\":\"split-bucket\",\"args\":null,\"disable\":false,\"args-payload\":\"\"}],\"schedulers-payload\":null,\"store-limit-mode\":\"manual\",\"hot-regions-write-interval\":\"10m0s\",\"hot-regions-reserved-days\":7},\"replication\":{\"max-replicas\":3,\"location-labels\":\"\",\"strictly-match-label\":\"false\",\"enable-placement-rules\":\"true\",\"enable-placement-rules-cache\":\"false\",\"isolation-level\":\"\"},\"pd-server\":{\"use-region-storage\":\"true\",\"max-gap-reset-ts\":\"24h0m0s\",\"key-type\":\"table\",\"runtime-services\":\"\",\"metric-storage\":\"\",\"dashboard-address\":\"auto\",\"trace-region-flow\":\"true\",\"flow-round-by-digit\":3,\"min-resolved-ts-persistence-interval\":\"0s\"},\"cluster-version\":\"0.0.0\",\"labels\":{},\"quota-backend-bytes\":\"8GiB\",\"auto-compaction-mode\":\"periodic\",\"auto-compaction-retention-v2\":\"1h\",\"TickInterval\":\"500ms\",\"ElectionInterval\":\"3s\",\"PreVote\":true,\"max-request-bytes\":157286400,\"security\":{\"cacert-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cert-allowed-cn\":null,\"SSLCABytes\":null,\"SSLCertBytes\":null,\"SSLKEYBytes\":null,\"redact-info-log\":false,\"encryption\":{\"data-encryption-method\":\"plaintext\",\"data-key-rotation-period\":\"168h0m0s\",\"master-key\":{\"type\":\"plaintext\",\"key-id\":\"\",\"region\":\"\",\"endpoint\":\"\",\"path\":\"\"}}},\"label-property\":null,\"WarningMsgs\":null,\"DisableStrictReconfigCheck\":false,\"HeartbeatStreamBindInterval\":\"1m0s\",\"LeaderPriorityCheckInterval\":\"1m0s\",\"dashboard\":{\"tidb-cacert-path\":\"\",\"tidb-cert-path\":\"\",\"tidb-key-path\":\"\",\"public-path-prefix\":\"\",\"internal-proxy\":false,\"enable-telemetry\":true,\"enable-experimental\":false},\"replication-mode\":{\"replication-mode\":\"majority\",\"dr-auto-sync\":{\"label-key\":\"\",\"primary\":\"\",\"dr\":\"\",\"primary-replicas\":0,\"dr-replicas\":0,\"wait-store-timeout\":\"1m0s\",\"wait-sync-timeout\":\"1m0s\",\"wait-async-timeout\":\"2m0s\",\"pause-region-split\":\"false\"}}}"]
[2024/07/29 22:09:29.396 +00:00] [INFO] [server.go:215] ["register REST path"] [path=/pd/api/v1]
[2024/07/29 22:09:29.397 +00:00] [INFO] [server.go:215] ["register REST path"] [path=/pd/api/v2/]
[2024/07/29 22:09:29.397 +00:00] [INFO] [server.go:215] ["register REST path"] [path=/swagger/]
[2024/07/29 22:09:29.397 +00:00] [INFO] [server.go:215] ["register REST path"] [path=/autoscaling]
[2024/07/29 22:09:29.397 +00:00] [INFO] [distro.go:51] ["Using distribution strings"] [strings={}]
[2024/07/29 22:09:29.409 +00:00] [INFO] [server.go:215] ["register REST path"] [path=/dashboard/api/]
[2024/07/29 22:09:29.413 +00:00] [INFO] [server.go:215] ["register REST path"] [path=/dashboard/]
[2024/07/29 22:09:29.414 +00:00] [INFO] [etcd.go:117] ["configuring peer listeners"] [listen-peer-urls="[http://0.0.0.0:2380]"]
[2024/07/29 22:09:29.415 +00:00] [INFO] [etcd.go:127] ["configuring client listeners"] [listen-client-urls="[http://0.0.0.0:2379]"]
[2024/07/29 22:09:29.415 +00:00] [INFO] [etcd.go:602] ["pprof is enabled"] [path=/debug/pprof]
[2024/07/29 22:09:29.414 +00:00] [INFO] [systimemon.go:28] ["start system time monitor"]
[2024/07/29 22:09:29.416 +00:00] [INFO] [etcd.go:299] ["starting an etcd server"] [etcd-version=3.4.3] [git-sha="Not provided (use ./build instead of go build)"] [go-version=go1.18.2] [go-os=linux] [go-arch=arm64] [max-cpu-set=8] [max-cpu-available=8] [member-initialized=false] [name=pd1] [data-dir=/data/pd1] [wal-dir=] [wal-dir-dedicated=] [member-dir=/data/pd1/member] [force-new-cluster=false] [heartbeat-interval=500ms] [election-timeout=3s] [initial-election-tick-advance=true] [snapshot-count=100000] [snapshot-catchup-entries=5000] [initial-advertise-peer-urls="[http://pd1:2380]"] [listen-peer-urls="[http://0.0.0.0:2380]"] [advertise-client-urls="[http://pd1:2379]"] [listen-client-urls="[http://0.0.0.0:2379]"] [listen-metrics-urls="[]"] [cors="[*]"] [host-whitelist="[*]"] [initial-cluster="pd0=http://pd0:2380,pd1=http://pd1:2380,pd2=http://pd2:2380"] [initial-cluster-state=new] [initial-cluster-token=pd-cluster] [quota-size-bytes=8589934592] [pre-vote=true] [initial-corrupt-check=false] [corrupt-check-time-interval=0s] [auto-compaction-mode=periodic] [auto-compaction-retention=1h0m0s] [auto-compaction-interval=1h0m0s] [discovery-url=] [discovery-proxy=]
[2024/07/29 22:09:29.416 +00:00] [WARN] [server.go:298] ["exceeded recommended request limit"] [max-request-bytes=157286400] [max-request-size="157 MB"] [recommended-request-bytes=10485760] [recommended-request-size="10 MB"]
[2024/07/29 22:09:29.436 +00:00] [INFO] [backend.go:79] ["opened backend db"] [path=/data/pd1/member/snap/db] [took=12.316917ms]
[2024/07/29 22:09:29.450 +00:00] [INFO] [netutil.go:112] ["resolved URL Host"] [url=http://pd1:2380] [host=pd1:2380] [resolved-addr=172.19.0.3:2380]
[2024/07/29 22:09:29.452 +00:00] [INFO] [netutil.go:112] ["resolved URL Host"] [url=http://pd1:2380] [host=pd1:2380] [resolved-addr=172.19.0.3:2380]
[2024/07/29 22:09:31.497 +00:00] [INFO] [raft.go:456] ["starting local member"] [local-member-id=ed69672f88924e60] [cluster-id=4586ab14de6050dd]
[2024/07/29 22:09:31.512 +00:00] [INFO] [raft.go:1530] ["ed69672f88924e60 switched to configuration voters=()"]
[2024/07/29 22:09:31.513 +00:00] [INFO] [raft.go:700] ["ed69672f88924e60 became follower at term 0"]
[2024/07/29 22:09:31.513 +00:00] [INFO] [raft.go:383] ["newRaft ed69672f88924e60 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"]
[2024/07/29 22:09:31.516 +00:00] [INFO] [raft.go:700] ["ed69672f88924e60 became follower at term 1"]
[2024/07/29 22:09:31.517 +00:00] [INFO] [raft.go:1530] ["ed69672f88924e60 switched to configuration voters=(3486081234046183923)"]
[2024/07/29 22:09:31.517 +00:00] [INFO] [raft.go:1530] ["ed69672f88924e60 switched to configuration voters=(3486081234046183923 16382016976602811638)"]
[2024/07/29 22:09:31.518 +00:00] [INFO] [raft.go:1530] ["ed69672f88924e60 switched to configuration voters=(3486081234046183923 16382016976602811638 17107318113395953248)"]
[2024/07/29 22:09:31.531 +00:00] [WARN] [store.go:1317] ["simple token is not cryptographically signed"]
[2024/07/29 22:09:31.537 +00:00] [INFO] [quota.go:126] ["enabled backend quota"] [quota-name=v3-applier] [quota-size-bytes=8589934592] [quota-size="8.6 GB"]
[2024/07/29 22:09:31.541 +00:00] [INFO] [peer.go:128] ["starting remote peer"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:09:31.541 +00:00] [INFO] [pipeline.go:71] ["started HTTP pipelining with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:09:31.544 +00:00] [INFO] [stream.go:166] ["started stream writer with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:09:31.542 +00:00] [INFO] [stream.go:166] ["started stream writer with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:09:31.569 +00:00] [INFO] [peer.go:134] ["started remote peer"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:09:31.569 +00:00] [INFO] [stream.go:406] ["started stream reader with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:09:31.569 +00:00] [INFO] [stream.go:406] ["started stream reader with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:09:31.570 +00:00] [INFO] [transport.go:327] ["added remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3] [remote-peer-urls="[http://pd2:2380]"]
[2024/07/29 22:09:31.575 +00:00] [INFO] [peer.go:128] ["starting remote peer"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:09:31.576 +00:00] [INFO] [pipeline.go:71] ["started HTTP pipelining with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:09:31.579 +00:00] [INFO] [stream.go:166] ["started stream writer with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:09:31.581 +00:00] [INFO] [peer.go:134] ["started remote peer"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:09:31.584 +00:00] [INFO] [transport.go:327] ["added remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6] [remote-peer-urls="[http://pd0:2380]"]
[2024/07/29 22:09:31.581 +00:00] [INFO] [stream.go:166] ["started stream writer with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:09:31.581 +00:00] [INFO] [stream.go:406] ["started stream reader with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:09:31.581 +00:00] [INFO] [stream.go:406] ["started stream reader with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:09:31.585 +00:00] [INFO] [server.go:792] ["starting etcd server"] [local-member-id=ed69672f88924e60] [local-server-version=3.4.3] [cluster-version=to_be_decided]
[2024/07/29 22:09:31.599 +00:00] [INFO] [server.go:680] ["starting initial election tick advance"] [election-ticks=6]
[2024/07/29 22:09:31.599 +00:00] [INFO] [raft.go:1530] ["ed69672f88924e60 switched to configuration voters=(3486081234046183923 16382016976602811638 17107318113395953248)"]
[2024/07/29 22:09:31.602 +00:00] [INFO] [cluster.go:392] ["added member"] [cluster-id=4586ab14de6050dd] [local-member-id=ed69672f88924e60] [added-peer-id=30610c698d7a69f3] [added-peer-peer-urls="[http://pd2:2380]"]
[2024/07/29 22:09:31.601 +00:00] [INFO] [etcd.go:241] ["now serving peer/client/metrics"] [local-member-id=ed69672f88924e60] [initial-advertise-peer-urls="[http://pd1:2380]"] [listen-peer-urls="[http://0.0.0.0:2380]"] [advertise-client-urls="[http://pd1:2379]"] [listen-client-urls="[http://0.0.0.0:2379]"] [listen-metrics-urls="[]"]
[2024/07/29 22:09:31.602 +00:00] [INFO] [etcd.go:576] ["serving peer traffic"] [address="[::]:2380"]
[2024/07/29 22:09:31.603 +00:00] [INFO] [raft.go:1530] ["ed69672f88924e60 switched to configuration voters=(3486081234046183923 16382016976602811638 17107318113395953248)"]
[2024/07/29 22:09:31.605 +00:00] [INFO] [peer_status.go:51] ["peer became active"] [peer-id=30610c698d7a69f3]
[2024/07/29 22:09:31.607 +00:00] [INFO] [stream.go:425] ["established TCP streaming connection with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:09:31.605 +00:00] [INFO] [stream.go:250] ["set message encoder"] [from=ed69672f88924e60] [to=ed69672f88924e60] [stream-type="stream MsgApp v2"]
[2024/07/29 22:09:31.603 +00:00] [INFO] [peer_status.go:51] ["peer became active"] [peer-id=e3589da502d44cf6]
[2024/07/29 22:09:31.605 +00:00] [INFO] [cluster.go:392] ["added member"] [cluster-id=4586ab14de6050dd] [local-member-id=ed69672f88924e60] [added-peer-id=e3589da502d44cf6] [added-peer-peer-urls="[http://pd0:2380]"]
[2024/07/29 22:09:31.608 +00:00] [INFO] [stream.go:425] ["established TCP streaming connection with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:09:31.608 +00:00] [INFO] [stream.go:425] ["established TCP streaming connection with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:09:31.608 +00:00] [INFO] [stream.go:425] ["established TCP streaming connection with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:09:31.608 +00:00] [WARN] [stream.go:277] ["established TCP streaming connection with remote peer"] [stream-writer-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:09:31.609 +00:00] [INFO] [raft.go:1530] ["ed69672f88924e60 switched to configuration voters=(3486081234046183923 16382016976602811638 17107318113395953248)"]
[2024/07/29 22:09:31.612 +00:00] [INFO] [cluster.go:392] ["added member"] [cluster-id=4586ab14de6050dd] [local-member-id=ed69672f88924e60] [added-peer-id=ed69672f88924e60] [added-peer-peer-urls="[http://pd1:2380]"]
[2024/07/29 22:09:31.610 +00:00] [INFO] [stream.go:250] ["set message encoder"] [from=ed69672f88924e60] [to=ed69672f88924e60] [stream-type="stream Message"]
[2024/07/29 22:09:31.612 +00:00] [WARN] [stream.go:277] ["established TCP streaming connection with remote peer"] [stream-writer-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:09:31.611 +00:00] [INFO] [stream.go:250] ["set message encoder"] [from=ed69672f88924e60] [to=ed69672f88924e60] [stream-type="stream Message"]
[2024/07/29 22:09:31.612 +00:00] [WARN] [stream.go:277] ["established TCP streaming connection with remote peer"] [stream-writer-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:09:31.611 +00:00] [INFO] [stream.go:250] ["set message encoder"] [from=ed69672f88924e60] [to=ed69672f88924e60] [stream-type="stream MsgApp v2"]
[2024/07/29 22:09:31.612 +00:00] [WARN] [stream.go:277] ["established TCP streaming connection with remote peer"] [stream-writer-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:09:31.651 +00:00] [INFO] [server.go:705] ["initialized peer connections; fast-forwarding election ticks"] [local-member-id=ed69672f88924e60] [forward-ticks=4] [forward-duration=2s] [election-ticks=6] [election-timeout=3s] [active-remote-members=2]
[2024/07/29 22:09:32.524 +00:00] [INFO] [raft.go:923] ["ed69672f88924e60 is starting a new election at term 1"]
[2024/07/29 22:09:32.524 +00:00] [INFO] [raft.go:729] ["ed69672f88924e60 became pre-candidate at term 1"]
[2024/07/29 22:09:32.525 +00:00] [INFO] [raft.go:824] ["ed69672f88924e60 received MsgPreVoteResp from ed69672f88924e60 at term 1"]
[2024/07/29 22:09:32.525 +00:00] [INFO] [raft.go:811] ["ed69672f88924e60 [logterm: 1, index: 3] sent MsgPreVote request to 30610c698d7a69f3 at term 1"]
[2024/07/29 22:09:32.525 +00:00] [INFO] [raft.go:811] ["ed69672f88924e60 [logterm: 1, index: 3] sent MsgPreVote request to e3589da502d44cf6 at term 1"]
[2024/07/29 22:09:32.526 +00:00] [INFO] [raft.go:824] ["ed69672f88924e60 received MsgPreVoteResp from e3589da502d44cf6 at term 1"]
[2024/07/29 22:09:32.526 +00:00] [INFO] [raft.go:1302] ["ed69672f88924e60 has received 2 MsgPreVoteResp votes and 0 vote rejections"]
[2024/07/29 22:09:32.526 +00:00] [INFO] [raft.go:713] ["ed69672f88924e60 became candidate at term 2"]
[2024/07/29 22:09:32.527 +00:00] [INFO] [raft.go:824] ["ed69672f88924e60 received MsgVoteResp from ed69672f88924e60 at term 2"]
[2024/07/29 22:09:32.527 +00:00] [INFO] [raft.go:811] ["ed69672f88924e60 [logterm: 1, index: 3] sent MsgVote request to 30610c698d7a69f3 at term 2"]
[2024/07/29 22:09:32.527 +00:00] [INFO] [raft.go:811] ["ed69672f88924e60 [logterm: 1, index: 3] sent MsgVote request to e3589da502d44cf6 at term 2"]
[2024/07/29 22:09:32.530 +00:00] [INFO] [raft.go:824] ["ed69672f88924e60 received MsgVoteResp from 30610c698d7a69f3 at term 2"]
[2024/07/29 22:09:32.530 +00:00] [INFO] [raft.go:1302] ["ed69672f88924e60 has received 2 MsgVoteResp votes and 0 vote rejections"]
[2024/07/29 22:09:32.530 +00:00] [INFO] [raft.go:765] ["ed69672f88924e60 became leader at term 2"]
[2024/07/29 22:09:32.530 +00:00] [INFO] [node.go:325] ["raft.node: ed69672f88924e60 elected leader ed69672f88924e60 at term 2"]
[2024/07/29 22:09:32.536 +00:00] [INFO] [server.go:2016] ["published local member to cluster through raft"] [local-member-id=ed69672f88924e60] [local-member-attributes="{Name:pd1 ClientURLs:[http://pd1:2379]}"] [request-path=/0/members/ed69672f88924e60/attributes] [cluster-id=4586ab14de6050dd] [publish-timeout=11s]
[2024/07/29 22:09:32.536 +00:00] [INFO] [server.go:326] ["create etcd v3 client"] [endpoints="[http://pd1:2379]"] [cert="{\"cacert-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cert-allowed-cn\":null,\"SSLCABytes\":null,\"SSLCertBytes\":null,\"SSLKEYBytes\":null,\"redact-info-log\":false,\"encryption\":{\"data-encryption-method\":\"plaintext\",\"data-key-rotation-period\":\"168h0m0s\",\"master-key\":{\"type\":\"plaintext\",\"key-id\":\"\",\"region\":\"\",\"endpoint\":\"\",\"path\":\"\"}}}"]
[2024/07/29 22:09:32.538 +00:00] [INFO] [serve.go:139] ["serving client traffic insecurely; this is strongly discouraged!"] [address="[::]:2379"]
[2024/07/29 22:09:32.538 +00:00] [INFO] [server.go:2501] ["setting up initial cluster version"] [cluster-version=3.4]
[2024/07/29 22:09:32.546 +00:00] [INFO] [cluster.go:558] ["set initial cluster version"] [cluster-id=4586ab14de6050dd] [local-member-id=ed69672f88924e60] [cluster-version=3.4]
[2024/07/29 22:09:32.548 +00:00] [INFO] [capability.go:76] ["enabled capabilities for version"] [cluster-version=3.4]
[2024/07/29 22:09:32.551 +00:00] [INFO] [server.go:2533] ["cluster version is updated"] [cluster-version=3.4]
[2024/07/29 22:09:32.563 +00:00] [INFO] [server.go:381] ["init cluster id"] [cluster-id=7397183400508190990]
[2024/07/29 22:09:32.603 +00:00] [INFO] [history_buffer.go:147] ["start from history index"] [start-index=0]
[2024/07/29 22:09:32.626 +00:00] [INFO] [server.go:1326] ["start to campaign pd leader"] [campaign-pd-leader-name=pd1]
[2024/07/29 22:09:32.636 +00:00] [INFO] [lease.go:65] ["lease granted"] [lease-id=5647673364234600716] [lease-timeout=3] [purpose="pd leader election"]
[2024/07/29 22:09:32.643 +00:00] [INFO] [leadership.go:122] ["check campaign resp"] [resp="{\"header\":{\"cluster_id\":5009879741614805213,\"member_id\":17107318113395953248,\"revision\":12,\"raft_term\":2},\"succeeded\":true,\"responses\":[{\"Response\":{\"ResponsePut\":{\"header\":{\"revision\":12}}}}]}"]
[2024/07/29 22:09:32.644 +00:00] [INFO] [leadership.go:131] ["write leaderData to leaderPath ok"] [leaderPath=/pd/7397183400508190990/leader] [purpose="pd leader election"]
[2024/07/29 22:09:32.645 +00:00] [INFO] [server.go:1352] ["campaign pd leader ok"] [campaign-pd-leader-name=pd1]
[2024/07/29 22:09:32.645 +00:00] [INFO] [server.go:1359] ["initializing the global TSO allocator"]
[2024/07/29 22:09:32.645 +00:00] [INFO] [lease.go:135] ["start lease keep alive worker"] [interval=1s] [purpose="pd leader election"]
[2024/07/29 22:09:32.649 +00:00] [INFO] [tso.go:221] ["sync and save timestamp"] [last=0001/01/01 00:00:00.000 +00:00] [save=2024/07/29 22:09:35.647 +00:00] [next=2024/07/29 22:09:32.647 +00:00]
[2024/07/29 22:09:32.651 +00:00] [INFO] [server.go:1470] ["server enable region storage"]
[2024/07/29 22:09:32.656 +00:00] [INFO] [id.go:122] ["idAllocator allocates a new id"] [alloc-id=1000]
[2024/07/29 22:09:32.656 +00:00] [INFO] [util.go:77] ["load cluster version"] [cluster-version=0.0.0]
[2024/07/29 22:09:32.656 +00:00] [INFO] [server.go:1410] ["PD cluster leader is ready to serve"] [pd-leader-name=pd1]
[2024/07/29 22:09:42.108 +00:00] [WARN] [stream.go:436] ["lost TCP streaming connection with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3] [error="read tcp 172.19.0.3:47780->172.19.0.4:2380: i/o timeout"]
[2024/07/29 22:09:42.445 +00:00] [WARN] [peer_status.go:68] ["peer became inactive (message send to peer failed)"] [peer-id=30610c698d7a69f3] [error="failed to read 30610c698d7a69f3 on stream MsgApp v2 (read tcp 172.19.0.3:47780->172.19.0.4:2380: i/o timeout)"]
[2024/07/29 22:09:42.111 +00:00] [INFO] [lease.go:119] ["lease timeout"] [expire=2024/07/29 22:09:42.645 +00:00] [purpose="pd leader election"]
[2024/07/29 22:09:42.111 +00:00] [WARN] [stream.go:436] ["lost TCP streaming connection with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6] [error="read tcp 172.19.0.3:36594->172.19.0.2:2380: i/o timeout"]
[2024/07/29 22:09:42.111 +00:00] [WARN] [stream.go:436] ["lost TCP streaming connection with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6] [error="read tcp 172.19.0.3:36602->172.19.0.2:2380: i/o timeout"]
[2024/07/29 22:09:42.113 +00:00] [WARN] [stream.go:436] ["lost TCP streaming connection with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3] [error="read tcp 172.19.0.3:47782->172.19.0.4:2380: i/o timeout"]
[2024/07/29 22:09:42.444 +00:00] [WARN] [wal.go:712] ["slow fdatasync"] [took=4.832493128s] [expected-duration=1s]
[2024/07/29 22:09:42.449 +00:00] [INFO] [lease.go:159] ["stop lease keep alive worker"] [purpose="pd leader election"]
[2024/07/29 22:09:42.452 +00:00] [INFO] [peer_status.go:51] ["peer became active"] [peer-id=30610c698d7a69f3]
[2024/07/29 22:09:42.452 +00:00] [WARN] [peer_status.go:68] ["peer became inactive (message send to peer failed)"] [peer-id=e3589da502d44cf6] [error="failed to read e3589da502d44cf6 on stream MsgApp v2 (read tcp 172.19.0.3:36594->172.19.0.2:2380: i/o timeout)"]
[2024/07/29 22:09:42.454 +00:00] [WARN] [raft.go:363] ["leader failed to send out heartbeat on time; took too long, leader is overloaded likely from slow disk"] [to=e3589da502d44cf6] [heartbeat-interval=500ms] [expected-duration=1s] [exceeded-duration=7.929860088s]
[2024/07/29 22:09:42.456 +00:00] [WARN] [raft.go:363] ["leader failed to send out heartbeat on time; took too long, leader is overloaded likely from slow disk"] [to=30610c698d7a69f3] [heartbeat-interval=500ms] [expected-duration=1s] [exceeded-duration=7.931509962s]
[2024/07/29 22:09:42.454 +00:00] [INFO] [stream.go:425] ["established TCP streaming connection with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:09:42.454 +00:00] [WARN] [peer_status.go:68] ["peer became inactive (message send to peer failed)"] [peer-id=30610c698d7a69f3] [error="failed to read 30610c698d7a69f3 on stream Message (read tcp 172.19.0.3:47782->172.19.0.4:2380: i/o timeout)"]
[2024/07/29 22:09:42.459 +00:00] [INFO] [peer_status.go:51] ["peer became active"] [peer-id=e3589da502d44cf6]
[2024/07/29 22:09:42.476 +00:00] [INFO] [stream.go:425] ["established TCP streaming connection with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:09:42.472 +00:00] [INFO] [peer_status.go:51] ["peer became active"] [peer-id=30610c698d7a69f3]
[2024/07/29 22:09:42.476 +00:00] [INFO] [stream.go:425] ["established TCP streaming connection with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:09:42.477 +00:00] [INFO] [stream.go:425] ["established TCP streaming connection with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:09:42.491 +00:00] [WARN] [etcd_kv.go:160] ["txn runs too slow"] [response="{\"header\":{\"cluster_id\":5009879741614805213,\"member_id\":17107318113395953248,\"revision\":15,\"raft_term\":2},\"succeeded\":true,\"responses\":[{\"Response\":{\"ResponsePut\":{\"header\":{\"revision\":15}}}}]}"] [cost=8.848518505s] []
[2024/07/29 22:09:42.492 +00:00] [INFO] [server.go:1021] ["PD server config is updated"] [new="{\"use-region-storage\":\"true\",\"max-gap-reset-ts\":\"24h0m0s\",\"key-type\":\"table\",\"runtime-services\":\"\",\"metric-storage\":\"\",\"dashboard-address\":\"http://pd2:2379\",\"trace-region-flow\":\"true\",\"flow-round-by-digit\":3,\"min-resolved-ts-persistence-interval\":\"0s\"}"] [old="{\"use-region-storage\":\"true\",\"max-gap-reset-ts\":\"24h0m0s\",\"key-type\":\"table\",\"runtime-services\":\"\",\"metric-storage\":\"\",\"dashboard-address\":\"auto\",\"trace-region-flow\":\"true\",\"flow-round-by-digit\":3,\"min-resolved-ts-persistence-interval\":\"0s\"}"]
[2024/07/29 22:09:42.492 +00:00] [WARN] [etcd_kv.go:160] ["txn runs too slow"] [response="{\"header\":{\"cluster_id\":5009879741614805213,\"member_id\":17107318113395953248,\"revision\":16,\"raft_term\":2},\"succeeded\":true,\"responses\":[{\"Response\":{\"ResponsePut\":{\"header\":{\"revision\":16}}}}]}"] [cost=6.815807504s] []
[2024/07/29 22:09:42.503 +00:00] [WARN] [tso.go:320] ["clock offset"] [jet-lag=6.82705742s] [prev-physical=2024/07/29 22:09:35.676 +00:00] [now=2024/07/29 22:09:42.503 +00:00] [update-physical-interval=50ms]
[2024/07/29 22:09:42.658 +00:00] [INFO] [server.go:1419] ["no longer a leader because lease has expired, pd leader will step down"]
[2024/07/29 22:09:42.676 +00:00] [INFO] [tso.go:405] ["reset the timestamp in memory"]
[2024/07/29 22:09:42.676 +00:00] [INFO] [server.go:1326] ["start to campaign pd leader"] [campaign-pd-leader-name=pd1]
[2024/07/29 22:09:42.691 +00:00] [INFO] [lease.go:65] ["lease granted"] [lease-id=5647673364234600734] [lease-timeout=3] [purpose="pd leader election"]
[2024/07/29 22:09:42.745 +00:00] [INFO] [leadership.go:122] ["check campaign resp"] [resp="{\"header\":{\"cluster_id\":5009879741614805213,\"member_id\":17107318113395953248,\"revision\":19,\"raft_term\":2},\"succeeded\":true,\"responses\":[{\"Response\":{\"ResponsePut\":{\"header\":{\"revision\":19}}}}]}"]
[2024/07/29 22:09:42.749 +00:00] [INFO] [leadership.go:131] ["write leaderData to leaderPath ok"] [leaderPath=/pd/7397183400508190990/leader] [purpose="pd leader election"]
[2024/07/29 22:09:42.749 +00:00] [INFO] [server.go:1352] ["campaign pd leader ok"] [campaign-pd-leader-name=pd1]
[2024/07/29 22:09:42.749 +00:00] [INFO] [server.go:1359] ["initializing the global TSO allocator"]
[2024/07/29 22:09:42.750 +00:00] [INFO] [lease.go:135] ["start lease keep alive worker"] [interval=1s] [purpose="pd leader election"]
[2024/07/29 22:09:42.750 +00:00] [ERROR] [tso.go:210] ["system time may be incorrect"] [last=2024/07/29 22:09:45.503 +00:00] [next=2024/07/29 22:09:42.750 +00:00] [error="[PD:common:ErrIncorrectSystemTime]incorrect system time"]
[2024/07/29 22:09:42.765 +00:00] [INFO] [tso.go:221] ["sync and save timestamp"] [last=2024/07/29 22:09:45.503 +00:00] [save=2024/07/29 22:09:48.504 +00:00] [next=2024/07/29 22:09:45.504 +00:00]
[2024/07/29 22:09:42.766 +00:00] [INFO] [server.go:1470] ["server enable region storage"]
[2024/07/29 22:09:42.782 +00:00] [INFO] [id.go:122] ["idAllocator allocates a new id"] [alloc-id=2000]
[2024/07/29 22:09:42.782 +00:00] [INFO] [util.go:77] ["load cluster version"] [cluster-version=0.0.0]
[2024/07/29 22:09:42.782 +00:00] [INFO] [server.go:1410] ["PD cluster leader is ready to serve"] [pd-leader-name=pd1]
[2024/07/29 22:09:44.272 +00:00] [INFO] [server.go:603] ["try to bootstrap raft cluster"] [cluster-id=7397183400508190990] [request="header:<cluster_id:7397183400508190990 > store:<id:1001 address:\"tikv0:20160\" version:\"6.1.0\" status_address:\"127.0.0.1:20180\" git_hash:\"080d086832ae5ce2495352dccaf8df5d40f30687\" start_timestamp:1722290984 deploy_path:\"/\" > region:<id:1007 region_epoch:<conf_ver:1 version:1 > peers:<id:1009 store_id:1001 > > "]
[2024/07/29 22:09:44.272 +00:00] [INFO] [server.go:603] ["try to bootstrap raft cluster"] [cluster-id=7397183400508190990] [request="header:<cluster_id:7397183400508190990 > store:<id:1003 address:\"tikv2:20160\" version:\"6.1.0\" status_address:\"127.0.0.1:20180\" git_hash:\"080d086832ae5ce2495352dccaf8df5d40f30687\" start_timestamp:1722290984 deploy_path:\"/\" > region:<id:1004 region_epoch:<conf_ver:1 version:1 > peers:<id:1005 store_id:1003 > > "]
[2024/07/29 22:09:44.272 +00:00] [INFO] [server.go:603] ["try to bootstrap raft cluster"] [cluster-id=7397183400508190990] [request="header:<cluster_id:7397183400508190990 > store:<id:1002 address:\"tikv1:20160\" version:\"6.1.0\" status_address:\"127.0.0.1:20180\" git_hash:\"080d086832ae5ce2495352dccaf8df5d40f30687\" start_timestamp:1722290984 deploy_path:\"/\" > region:<id:1006 region_epoch:<conf_ver:1 version:1 > peers:<id:1008 store_id:1002 > > "]
[2024/07/29 22:09:44.346 +00:00] [WARN] [server.go:660] ["cluster already bootstrapped"] [cluster-id=7397183400508190990]
[2024/07/29 22:09:44.346 +00:00] [INFO] [server.go:664] ["bootstrap cluster ok"] [cluster-id=7397183400508190990]
[2024/07/29 22:09:44.347 +00:00] [WARN] [server.go:660] ["cluster already bootstrapped"] [cluster-id=7397183400508190990]
[2024/07/29 22:09:44.472 +00:00] [INFO] [cluster.go:352] ["load stores"] [count=1] [cost=86.879542ms]
[2024/07/29 22:09:44.486 +00:00] [INFO] [cluster.go:363] ["load regions"] [count=1] [cost=6.403666ms]
[2024/07/29 22:09:44.525 +00:00] [INFO] [coordinator.go:318] ["coordinator starts to collect cluster information"]
[2024/07/29 22:09:44.633 +00:00] [INFO] [cluster.go:1891] ["cluster version changed"] [old-cluster-version=0.0.0] [new-cluster-version=6.1.0]
[2024/07/29 22:09:44.706 +00:00] [INFO] [cluster.go:2047] ["store limit added"] [store-id=1002]
[2024/07/29 22:09:44.708 +00:00] [INFO] [grpc_service.go:526] ["put store ok"] [store="id:1002 address:\"tikv1:20160\" version:\"6.1.0\" status_address:\"127.0.0.1:20180\" git_hash:\"080d086832ae5ce2495352dccaf8df5d40f30687\" start_timestamp:1722290984 deploy_path:\"/\" "]
[2024/07/29 22:09:44.706 +00:00] [INFO] [cluster.go:2047] ["store limit added"] [store-id=1003]
[2024/07/29 22:09:44.710 +00:00] [INFO] [cluster.go:2047] ["store limit added"] [store-id=1001]
[2024/07/29 22:09:44.713 +00:00] [INFO] [grpc_service.go:526] ["put store ok"] [store="id:1001 address:\"tikv0:20160\" version:\"6.1.0\" status_address:\"127.0.0.1:20180\" git_hash:\"080d086832ae5ce2495352dccaf8df5d40f30687\" start_timestamp:1722290984 deploy_path:\"/\" "]
[2024/07/29 22:09:44.712 +00:00] [INFO] [util.go:77] ["load cluster version"] [cluster-version=6.1.0]
[2024/07/29 22:09:44.712 +00:00] [INFO] [grpc_service.go:526] ["put store ok"] [store="id:1003 address:\"tikv2:20160\" version:\"6.1.0\" status_address:\"127.0.0.1:20180\" git_hash:\"080d086832ae5ce2495352dccaf8df5d40f30687\" start_timestamp:1722290984 deploy_path:\"/\" "]
[2024/07/29 22:09:44.716 +00:00] [INFO] [util.go:77] ["load cluster version"] [cluster-version=6.1.0]
[2024/07/29 22:09:44.714 +00:00] [INFO] [util.go:77] ["load cluster version"] [cluster-version=6.1.0]
[2024/07/29 22:09:45.134 +00:00] [INFO] [server.go:214] ["establish sync region stream"] [requested-server=pd2] [url=http://pd2:2379]
[2024/07/29 22:09:45.135 +00:00] [INFO] [server.go:297] ["sync the history regions with server"] [server=pd2] [from-index=0] [last-index=1] [records-length=1]
[2024/07/29 22:09:45.139 +00:00] [INFO] [server.go:214] ["establish sync region stream"] [requested-server=pd0] [url=http://pd0:2379]
[2024/07/29 22:09:45.140 +00:00] [INFO] [server.go:297] ["sync the history regions with server"] [server=pd0] [from-index=0] [last-index=1] [records-length=1]
[2024/07/29 22:09:47.526 +00:00] [INFO] [coordinator.go:321] ["coordinator has finished cluster information preparation"]
[2024/07/29 22:09:47.526 +00:00] [INFO] [coordinator.go:331] ["coordinator starts to run schedulers"]
[2024/07/29 22:09:47.532 +00:00] [INFO] [coordinator.go:401] ["create scheduler"] [scheduler-name=balance-region-scheduler] [scheduler-args="[]"]
[2024/07/29 22:09:47.540 +00:00] [INFO] [coordinator.go:401] ["create scheduler"] [scheduler-name=balance-leader-scheduler] [scheduler-args="[]"]
[2024/07/29 22:09:47.543 +00:00] [INFO] [coordinator.go:401] ["create scheduler"] [scheduler-name=balance-hot-region-scheduler] [scheduler-args="[]"]
[2024/07/29 22:09:47.544 +00:00] [INFO] [coordinator.go:401] ["create scheduler"] [scheduler-name=split-bucket-scheduler] [scheduler-args="[]"]
[2024/07/29 22:09:47.553 +00:00] [INFO] [coordinator.go:225] ["coordinator begins to check suspect key ranges"]
[2024/07/29 22:09:47.553 +00:00] [INFO] [coordinator.go:109] ["coordinator starts patrol regions"]
[2024/07/29 22:09:47.553 +00:00] [INFO] [coordinator.go:290] ["coordinator begins to actively drive push operator"]
[2024/07/29 22:09:48.544 +00:00] [INFO] [hot_region_config.go:351] ["query supported changed"] [last-query-support=false] [cluster-version=6.1.0] [config="{\"min-hot-byte-rate\":100,\"min-hot-key-rate\":10,\"min-hot-query-rate\":10,\"max-zombie-rounds\":3,\"max-peer-number\":1000,\"byte-rate-rank-step-ratio\":0.05,\"key-rate-rank-step-ratio\":0.05,\"query-rate-rank-step-ratio\":0.05,\"count-rank-step-ratio\":0.01,\"great-dec-ratio\":0.95,\"minor-dec-ratio\":0.99,\"src-tolerance-ratio\":1.05,\"dst-tolerance-ratio\":1.05,\"read-priorities\":[\"query\",\"byte\"],\"write-leader-priorities\":[\"key\",\"byte\"],\"write-peer-priorities\":[\"byte\",\"key\"],\"strict-picking-store\":\"true\",\"enable-for-tiflash\":\"true\",\"forbid-rw-type\":\"none\"}"] [valid-config="{\"min-hot-byte-rate\":100,\"min-hot-key-rate\":10,\"min-hot-query-rate\":10,\"max-zombie-rounds\":3,\"max-peer-number\":1000,\"byte-rate-rank-step-ratio\":0.05,\"key-rate-rank-step-ratio\":0.05,\"query-rate-rank-step-ratio\":0.05,\"count-rank-step-ratio\":0.01,\"great-dec-ratio\":0.95,\"minor-dec-ratio\":0.99,\"src-tolerance-ratio\":1.05,\"dst-tolerance-ratio\":1.05,\"read-priorities\":[\"byte\",\"key\"],\"write-leader-priorities\":[\"key\",\"byte\"],\"write-peer-priorities\":[\"byte\",\"key\"],\"strict-picking-store\":\"true\",\"enable-for-tiflash\":\"true\"}"]
[2024/07/29 22:09:54.523 +00:00] [INFO] [cluster.go:1400] ["store has changed to serving"] [store-id=1003] [store-address=tikv2:20160]
[2024/07/29 22:09:54.525 +00:00] [INFO] [cluster.go:1400] ["store has changed to serving"] [store-id=1002] [store-address=tikv1:20160]
[2024/07/29 22:09:54.526 +00:00] [INFO] [cluster.go:1400] ["store has changed to serving"] [store-id=1001] [store-address=tikv0:20160]
[2024/07/29 22:09:54.824 +00:00] [INFO] [operator_controller.go:450] ["add operator"] [region-id=1004] [operator="\"add-rule-peer {add peer: store [1001]} (kind:replica,region, region:1004(1, 1), createAt:2024-07-29 22:09:54.824100094 +0000 UTC m=+25.501590470, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, size:0, steps:[add learner peer 1010 on store 1001, promote learner peer 1010 on store 1001 to voter])\""] [additional-info=]
[2024/07/29 22:09:54.830 +00:00] [INFO] [operator_controller.go:652] ["send schedule command"] [region-id=1004] [step="add learner peer 1010 on store 1001"] [source=create]
[2024/07/29 22:09:54.837 +00:00] [INFO] [region.go:589] ["region ConfVer changed"] [region-id=1004] [detail="Add peer:{id:1010 store_id:1001 role:Learner }"] [old-confver=1] [new-confver=2]
[2024/07/29 22:09:54.838 +00:00] [INFO] [operator_controller.go:652] ["send schedule command"] [region-id=1004] [step="add learner peer 1010 on store 1001"] [source=heartbeat]
[2024/07/29 22:09:54.894 +00:00] [INFO] [operator_controller.go:652] ["send schedule command"] [region-id=1004] [step="promote learner peer 1010 on store 1001 to voter"] [source=heartbeat]
[2024/07/29 22:09:54.895 +00:00] [INFO] [region.go:589] ["region ConfVer changed"] [region-id=1004] [detail="Remove peer:{id:1010 store_id:1001 role:Learner },Add peer:{id:1010 store_id:1001 }"] [old-confver=2] [new-confver=3]
[2024/07/29 22:09:54.896 +00:00] [INFO] [operator_controller.go:566] ["operator finish"] [region-id=1004] [takes=66.093166ms] [operator="\"add-rule-peer {add peer: store [1001]} (kind:replica,region, region:1004(1, 1), createAt:2024-07-29 22:09:54.824100094 +0000 UTC m=+25.501590470, startAt:2024-07-29 22:09:54.830027344 +0000 UTC m=+25.507517929, currentStep:2, size:0, steps:[add learner peer 1010 on store 1001, promote learner peer 1010 on store 1001 to voter]) finished\""] [additional-info=]
[2024/07/29 22:09:54.906 +00:00] [INFO] [operator_controller.go:450] ["add operator"] [region-id=1004] [operator="\"add-rule-peer {add peer: store [1002]} (kind:replica,region, region:1004(1, 3), createAt:2024-07-29 22:09:54.906570094 +0000 UTC m=+25.584060429, startAt:0001-01-01 00:00:00 +0000 UTC, currentStep:0, size:1, steps:[add learner peer 1011 on store 1002, promote learner peer 1011 on store 1002 to voter])\""] [additional-info=]
[2024/07/29 22:09:54.906 +00:00] [INFO] [operator_controller.go:652] ["send schedule command"] [region-id=1004] [step="add learner peer 1011 on store 1002"] [source=create]
[2024/07/29 22:09:54.907 +00:00] [INFO] [region.go:589] ["region ConfVer changed"] [region-id=1004] [detail="Add peer:{id:1011 store_id:1002 role:Learner }"] [old-confver=3] [new-confver=4]
[2024/07/29 22:09:54.907 +00:00] [INFO] [operator_controller.go:652] ["send schedule command"] [region-id=1004] [step="add learner peer 1011 on store 1002"] [source=heartbeat]
[2024/07/29 22:09:54.929 +00:00] [INFO] [operator_controller.go:652] ["send schedule command"] [region-id=1004] [step="promote learner peer 1011 on store 1002 to voter"] [source=heartbeat]
[2024/07/29 22:09:54.931 +00:00] [INFO] [region.go:589] ["region ConfVer changed"] [region-id=1004] [detail="Remove peer:{id:1011 store_id:1002 role:Learner },Add peer:{id:1011 store_id:1002 }"] [old-confver=4] [new-confver=5]
[2024/07/29 22:09:54.932 +00:00] [INFO] [operator_controller.go:566] ["operator finish"] [region-id=1004] [takes=25.573833ms] [operator="\"add-rule-peer {add peer: store [1002]} (kind:replica,region, region:1004(1, 3), createAt:2024-07-29 22:09:54.906570094 +0000 UTC m=+25.584060429, startAt:2024-07-29 22:09:54.906677469 +0000 UTC m=+25.584167887, currentStep:2, size:1, steps:[add learner peer 1011 on store 1002, promote learner peer 1011 on store 1002 to voter]) finished\""] [additional-info=]
[2024/07/29 22:12:48.491 +00:00] [INFO] [cluster.go:300] ["sync store config job is stopped"]
[2024/07/29 22:12:48.491 +00:00] [INFO] [cluster.go:2132] ["min resolved ts background jobs has been stopped"]
[2024/07/29 22:12:48.491 +00:00] [INFO] [main.go:121] ["Got signal to exit"] [signal=terminated]
[2024/07/29 22:12:48.492 +00:00] [INFO] [server.go:460] ["closing server"]
[2024/07/29 22:12:48.491 +00:00] [INFO] [cluster.go:411] ["node state check job has been stopped"]
[2024/07/29 22:12:48.491 +00:00] [INFO] [server.go:1446] ["server is closed, exit etcd leader loop"]
[2024/07/29 22:12:48.491 +00:00] [INFO] [server.go:566] ["server is closed, exit metrics loop"]
[2024/07/29 22:12:48.491 +00:00] [INFO] [server.go:580] ["server is closed, exit allocator loop"]
[2024/07/29 22:12:48.491 +00:00] [INFO] [cluster.go:429] ["statistics background jobs has been stopped"]
[2024/07/29 22:12:48.491 +00:00] [INFO] [server.go:1429] ["server is closed"]
[2024/07/29 22:12:48.491 +00:00] [INFO] [lease.go:159] ["stop lease keep alive worker"] [purpose="pd leader election"]
[2024/07/29 22:12:48.491 +00:00] [INFO] [labeler.go:67] ["RegionLabeler GC stopped"]
[2024/07/29 22:12:48.491 +00:00] [INFO] [server.go:130] ["region syncer has been stopped"]
[2024/07/29 22:12:48.491 +00:00] [INFO] [server.go:591] ["server is closed, exist encryption key manager loop"]
[2024/07/29 22:12:48.491 +00:00] [INFO] [cluster.go:388] ["metrics are reset"]
[2024/07/29 22:12:48.494 +00:00] [INFO] [cluster.go:390] ["metrics collection job has been stopped"]
[2024/07/29 22:12:48.491 +00:00] [INFO] [coordinator.go:117] ["patrol regions has been stopped"]
[2024/07/29 22:12:48.491 +00:00] [INFO] [coordinator.go:307] ["coordinator is stopping"]
[2024/07/29 22:12:48.491 +00:00] [INFO] [coordinator.go:296] ["drive push operator has been stopped"]
[2024/07/29 22:12:48.491 +00:00] [INFO] [coordinator.go:231] ["check suspect key ranges has been stopped"]
[2024/07/29 22:12:48.491 +00:00] [INFO] [coordinator.go:811] ["scheduler has been stopped"] [scheduler-name=balance-region-scheduler] [error="context canceled"]
[2024/07/29 22:12:48.491 +00:00] [INFO] [coordinator.go:811] ["scheduler has been stopped"] [scheduler-name=balance-hot-region-scheduler] [error="context canceled"]
[2024/07/29 22:12:48.491 +00:00] [INFO] [coordinator.go:811] ["scheduler has been stopped"] [scheduler-name=balance-leader-scheduler] [error="context canceled"]
[2024/07/29 22:12:48.491 +00:00] [INFO] [coordinator.go:811] ["scheduler has been stopped"] [scheduler-name=split-bucket-scheduler] [error="context canceled"]
[2024/07/29 22:12:48.496 +00:00] [INFO] [coordinator.go:309] ["coordinator has been stopped"]
[2024/07/29 22:12:48.496 +00:00] [INFO] [cluster.go:469] ["raftcluster is stopped"]
[2024/07/29 22:12:48.497 +00:00] [INFO] [tso.go:405] ["reset the timestamp in memory"]
[2024/07/29 22:12:48.498 +00:00] [INFO] [server.go:1284] ["server is closed, return pd leader loop"]
[2024/07/29 22:12:48.498 +00:00] [INFO] [etcd.go:360] ["closing etcd server"] [name=pd1] [data-dir=/data/pd1] [advertise-peer-urls="[http://pd1:2380]"] [advertise-client-urls="[http://pd1:2379]"]
[2024/07/29 22:12:48.499 +00:00] [WARN] [grpclog.go:60] ["transport: http2Server.HandleStreams failed to read frame: read tcp 172.19.0.3:2379->172.19.0.2:47544: use of closed network connection"]
[2024/07/29 22:12:48.500 +00:00] [WARN] [grpclog.go:60] ["transport: http2Server.HandleStreams failed to read frame: read tcp 172.19.0.3:2379->172.19.0.4:33256: use of closed network connection"]
[2024/07/29 22:12:48.500 +00:00] [INFO] [server.go:1413] ["leadership transfer starting"] [local-member-id=ed69672f88924e60] [current-leader-member-id=ed69672f88924e60] [transferee-member-id=e3589da502d44cf6]
[2024/07/29 22:12:48.501 +00:00] [INFO] [raft.go:1261] ["ed69672f88924e60 [term 2] starts to transfer leadership to e3589da502d44cf6"]
[2024/07/29 22:12:48.501 +00:00] [INFO] [raft.go:1267] ["ed69672f88924e60 sends MsgTimeoutNow to e3589da502d44cf6 immediately as e3589da502d44cf6 already has up-to-date log"]
[2024/07/29 22:12:48.500 +00:00] [WARN] [grpclog.go:60] ["grpc: addrConn.createTransport failed to connect to {0.0.0.0:2379  <nil> 0 <nil>}. Err :connection error: desc = \"transport: Error while dialing dial tcp 0.0.0.0:2379: connect: connection refused\". Reconnecting..."]
[2024/07/29 22:12:48.503 +00:00] [INFO] [raft.go:859] ["ed69672f88924e60 [term: 2] received a MsgVote message with higher term from e3589da502d44cf6 [term: 3]"]
[2024/07/29 22:12:48.503 +00:00] [INFO] [raft.go:700] ["ed69672f88924e60 became follower at term 3"]
[2024/07/29 22:12:48.503 +00:00] [INFO] [raft.go:960] ["ed69672f88924e60 [logterm: 2, index: 116, vote: 0] cast MsgVote for e3589da502d44cf6 [logterm: 2, index: 116] at term 3"]
[2024/07/29 22:12:48.503 +00:00] [INFO] [node.go:331] ["raft.node: ed69672f88924e60 lost leader ed69672f88924e60 at term 3"]
[2024/07/29 22:12:48.505 +00:00] [INFO] [node.go:325] ["raft.node: ed69672f88924e60 elected leader e3589da502d44cf6 at term 3"]
[2024/07/29 22:12:49.002 +00:00] [INFO] [server.go:1434] ["leadership transfer finished"] [local-member-id=ed69672f88924e60] [old-leader-member-id=ed69672f88924e60] [new-leader-member-id=e3589da502d44cf6] [took=502.642792ms]
[2024/07/29 22:12:49.003 +00:00] [INFO] [peer.go:333] ["stopping remote peer"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:12:49.004 +00:00] [WARN] [stream.go:291] ["closed TCP streaming connection with remote peer"] [stream-writer-type="stream MsgApp v2"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:12:49.004 +00:00] [WARN] [stream.go:301] ["stopped TCP streaming connection with remote peer"] [stream-writer-type="stream MsgApp v2"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:12:49.005 +00:00] [WARN] [stream.go:291] ["closed TCP streaming connection with remote peer"] [stream-writer-type="stream Message"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:12:49.005 +00:00] [WARN] [stream.go:301] ["stopped TCP streaming connection with remote peer"] [stream-writer-type="stream Message"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:12:49.005 +00:00] [INFO] [pipeline.go:86] ["stopped HTTP pipelining with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:12:49.006 +00:00] [WARN] [stream.go:436] ["lost TCP streaming connection with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3] [error="context canceled"]
[2024/07/29 22:12:49.006 +00:00] [WARN] [peer_status.go:68] ["peer became inactive (message send to peer failed)"] [peer-id=30610c698d7a69f3] [error="failed to read 30610c698d7a69f3 on stream MsgApp v2 (context canceled)"]
[2024/07/29 22:12:49.007 +00:00] [INFO] [stream.go:459] ["stopped stream reader with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:12:49.007 +00:00] [WARN] [stream.go:436] ["lost TCP streaming connection with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3] [error="context canceled"]
[2024/07/29 22:12:49.007 +00:00] [INFO] [stream.go:459] ["stopped stream reader with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:12:49.008 +00:00] [INFO] [peer.go:340] ["stopped remote peer"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:12:49.008 +00:00] [INFO] [peer.go:333] ["stopping remote peer"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:12:49.012 +00:00] [WARN] [stream.go:291] ["closed TCP streaming connection with remote peer"] [stream-writer-type="stream MsgApp v2"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:12:49.020 +00:00] [WARN] [stream.go:301] ["stopped TCP streaming connection with remote peer"] [stream-writer-type="stream MsgApp v2"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:12:49.023 +00:00] [WARN] [stream.go:291] ["closed TCP streaming connection with remote peer"] [stream-writer-type="stream Message"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:12:49.025 +00:00] [WARN] [stream.go:301] ["stopped TCP streaming connection with remote peer"] [stream-writer-type="stream Message"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:12:49.026 +00:00] [INFO] [pipeline.go:86] ["stopped HTTP pipelining with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:12:49.028 +00:00] [WARN] [stream.go:436] ["lost TCP streaming connection with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6] [error="context canceled"]
[2024/07/29 22:12:49.029 +00:00] [WARN] [peer_status.go:68] ["peer became inactive (message send to peer failed)"] [peer-id=e3589da502d44cf6] [error="failed to read e3589da502d44cf6 on stream MsgApp v2 (context canceled)"]
[2024/07/29 22:12:49.029 +00:00] [INFO] [stream.go:459] ["stopped stream reader with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:12:49.029 +00:00] [WARN] [stream.go:436] ["lost TCP streaming connection with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6] [error="context canceled"]
[2024/07/29 22:12:49.029 +00:00] [INFO] [stream.go:459] ["stopped stream reader with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:12:49.030 +00:00] [INFO] [peer.go:340] ["stopped remote peer"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:12:49.030 +00:00] [WARN] [http.go:444] ["failed to find remote peer in cluster"] [local-member-id=ed69672f88924e60] [remote-peer-id-stream-handler=ed69672f88924e60] [remote-peer-id-from=30610c698d7a69f3] [cluster-id=4586ab14de6050dd]
[2024/07/29 22:12:49.030 +00:00] [WARN] [http.go:444] ["failed to find remote peer in cluster"] [local-member-id=ed69672f88924e60] [remote-peer-id-stream-handler=ed69672f88924e60] [remote-peer-id-from=30610c698d7a69f3] [cluster-id=4586ab14de6050dd]
[2024/07/29 22:12:49.030 +00:00] [WARN] [http.go:444] ["failed to find remote peer in cluster"] [local-member-id=ed69672f88924e60] [remote-peer-id-stream-handler=ed69672f88924e60] [remote-peer-id-from=e3589da502d44cf6] [cluster-id=4586ab14de6050dd]
[2024/07/29 22:12:49.031 +00:00] [WARN] [http.go:444] ["failed to find remote peer in cluster"] [local-member-id=ed69672f88924e60] [remote-peer-id-stream-handler=ed69672f88924e60] [remote-peer-id-from=e3589da502d44cf6] [cluster-id=4586ab14de6050dd]
[2024/07/29 22:12:49.035 +00:00] [INFO] [etcd.go:555] ["stopping serving peer traffic"] [address="[::]:2380"]
[2024/07/29 22:12:49.035 +00:00] [INFO] [etcd.go:562] ["stopped serving peer traffic"] [address="[::]:2380"]
[2024/07/29 22:12:49.035 +00:00] [INFO] [etcd.go:364] ["closed etcd server"] [name=pd1] [data-dir=/data/pd1] [advertise-peer-urls="[http://pd1:2380]"] [advertise-client-urls="[http://pd1:2379]"]
[2024/07/29 22:12:49.039 +00:00] [INFO] [manager.go:73] ["exit dashboard loop"]
[2024/07/29 22:12:49.039 +00:00] [INFO] [server.go:494] ["close server"]
[2024/07/29 22:19:01.020 +00:00] [INFO] [util.go:41] ["Welcome to Placement Driver (PD)"]
[2024/07/29 22:19:01.021 +00:00] [INFO] [util.go:42] [PD] [release-version=v6.1.0]
[2024/07/29 22:19:01.023 +00:00] [INFO] [util.go:43] [PD] [edition=Community]
[2024/07/29 22:19:01.023 +00:00] [INFO] [util.go:44] [PD] [git-hash=d82f4fab6cf37cd1eca9c3574984e12a7ae27c42]
[2024/07/29 22:19:01.023 +00:00] [INFO] [util.go:45] [PD] [git-branch=heads/refs/tags/v6.1.0]
[2024/07/29 22:19:01.024 +00:00] [INFO] [util.go:46] [PD] [utc-build-time="2022-06-01 01:47:53"]
[2024/07/29 22:19:01.024 +00:00] [INFO] [metricutil.go:83] ["disable Prometheus push client"]
[2024/07/29 22:19:01.024 +00:00] [INFO] [server.go:240] ["PD Config"] [config="{\"client-urls\":\"http://0.0.0.0:2379\",\"peer-urls\":\"http://0.0.0.0:2380\",\"advertise-client-urls\":\"http://pd1:2379\",\"advertise-peer-urls\":\"http://pd1:2380\",\"name\":\"pd1\",\"data-dir\":\"/data/pd1\",\"force-new-cluster\":false,\"enable-grpc-gateway\":true,\"initial-cluster\":\"pd0=http://pd0:2380,pd1=http://pd1:2380,pd2=http://pd2:2380\",\"initial-cluster-state\":\"new\",\"initial-cluster-token\":\"pd-cluster\",\"join\":\"\",\"lease\":3,\"log\":{\"level\":\"info\",\"format\":\"text\",\"disable-timestamp\":false,\"file\":{\"filename\":\"/logs/pd1.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0},\"development\":false,\"disable-caller\":false,\"disable-stacktrace\":false,\"disable-error-verbose\":true,\"sampling\":null},\"tso-save-interval\":\"3s\",\"tso-update-physical-interval\":\"50ms\",\"enable-local-tso\":false,\"metric\":{\"job\":\"pd1\",\"address\":\"\",\"interval\":\"15s\"},\"schedule\":{\"max-snapshot-count\":64,\"max-pending-peer-count\":64,\"max-merge-region-size\":20,\"max-merge-region-keys\":200000,\"split-merge-interval\":\"1h0m0s\",\"enable-one-way-merge\":\"false\",\"enable-cross-table-merge\":\"true\",\"patrol-region-interval\":\"10ms\",\"max-store-down-time\":\"30m0s\",\"max-store-preparing-time\":\"48h0m0s\",\"leader-schedule-limit\":4,\"leader-schedule-policy\":\"count\",\"region-schedule-limit\":2048,\"replica-schedule-limit\":64,\"merge-schedule-limit\":8,\"hot-region-schedule-limit\":4,\"hot-region-cache-hits-threshold\":3,\"store-limit\":{},\"tolerant-size-ratio\":0,\"low-space-ratio\":0.8,\"high-space-ratio\":0.7,\"region-score-formula-version\":\"v2\",\"scheduler-max-waiting-operator\":5,\"enable-remove-down-replica\":\"true\",\"enable-replace-offline-replica\":\"true\",\"enable-make-up-replica\":\"true\",\"enable-remove-extra-replica\":\"true\",\"enable-location-replacement\":\"true\",\"enable-debug-metrics\":\"false\",\"enable-joint-consensus\":\"true\",\"schedulers-v2\":[{\"type\":\"balance-region\",\"args\":null,\"disable\":false,\"args-payload\":\"\"},{\"type\":\"balance-leader\",\"args\":null,\"disable\":false,\"args-payload\":\"\"},{\"type\":\"hot-region\",\"args\":null,\"disable\":false,\"args-payload\":\"\"},{\"type\":\"split-bucket\",\"args\":null,\"disable\":false,\"args-payload\":\"\"}],\"schedulers-payload\":null,\"store-limit-mode\":\"manual\",\"hot-regions-write-interval\":\"10m0s\",\"hot-regions-reserved-days\":7},\"replication\":{\"max-replicas\":3,\"location-labels\":\"\",\"strictly-match-label\":\"false\",\"enable-placement-rules\":\"true\",\"enable-placement-rules-cache\":\"false\",\"isolation-level\":\"\"},\"pd-server\":{\"use-region-storage\":\"true\",\"max-gap-reset-ts\":\"24h0m0s\",\"key-type\":\"table\",\"runtime-services\":\"\",\"metric-storage\":\"\",\"dashboard-address\":\"auto\",\"trace-region-flow\":\"true\",\"flow-round-by-digit\":3,\"min-resolved-ts-persistence-interval\":\"0s\"},\"cluster-version\":\"0.0.0\",\"labels\":{},\"quota-backend-bytes\":\"8GiB\",\"auto-compaction-mode\":\"periodic\",\"auto-compaction-retention-v2\":\"1h\",\"TickInterval\":\"500ms\",\"ElectionInterval\":\"3s\",\"PreVote\":true,\"max-request-bytes\":157286400,\"security\":{\"cacert-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cert-allowed-cn\":null,\"SSLCABytes\":null,\"SSLCertBytes\":null,\"SSLKEYBytes\":null,\"redact-info-log\":false,\"encryption\":{\"data-encryption-method\":\"plaintext\",\"data-key-rotation-period\":\"168h0m0s\",\"master-key\":{\"type\":\"plaintext\",\"key-id\":\"\",\"region\":\"\",\"endpoint\":\"\",\"path\":\"\"}}},\"label-property\":null,\"WarningMsgs\":null,\"DisableStrictReconfigCheck\":false,\"HeartbeatStreamBindInterval\":\"1m0s\",\"LeaderPriorityCheckInterval\":\"1m0s\",\"dashboard\":{\"tidb-cacert-path\":\"\",\"tidb-cert-path\":\"\",\"tidb-key-path\":\"\",\"public-path-prefix\":\"\",\"internal-proxy\":false,\"enable-telemetry\":true,\"enable-experimental\":false},\"replication-mode\":{\"replication-mode\":\"majority\",\"dr-auto-sync\":{\"label-key\":\"\",\"primary\":\"\",\"dr\":\"\",\"primary-replicas\":0,\"dr-replicas\":0,\"wait-store-timeout\":\"1m0s\",\"wait-sync-timeout\":\"1m0s\",\"wait-async-timeout\":\"2m0s\",\"pause-region-split\":\"false\"}}}"]
[2024/07/29 22:19:01.028 +00:00] [INFO] [server.go:215] ["register REST path"] [path=/pd/api/v1]
[2024/07/29 22:19:01.029 +00:00] [INFO] [server.go:215] ["register REST path"] [path=/pd/api/v2/]
[2024/07/29 22:19:01.030 +00:00] [INFO] [server.go:215] ["register REST path"] [path=/swagger/]
[2024/07/29 22:19:01.030 +00:00] [INFO] [server.go:215] ["register REST path"] [path=/autoscaling]
[2024/07/29 22:19:01.031 +00:00] [INFO] [distro.go:51] ["Using distribution strings"] [strings={}]
[2024/07/29 22:19:01.033 +00:00] [INFO] [server.go:215] ["register REST path"] [path=/dashboard/api/]
[2024/07/29 22:19:01.038 +00:00] [INFO] [server.go:215] ["register REST path"] [path=/dashboard/]
[2024/07/29 22:19:01.039 +00:00] [INFO] [etcd.go:117] ["configuring peer listeners"] [listen-peer-urls="[http://0.0.0.0:2380]"]
[2024/07/29 22:19:01.039 +00:00] [INFO] [etcd.go:127] ["configuring client listeners"] [listen-client-urls="[http://0.0.0.0:2379]"]
[2024/07/29 22:19:01.044 +00:00] [INFO] [etcd.go:602] ["pprof is enabled"] [path=/debug/pprof]
[2024/07/29 22:19:01.040 +00:00] [INFO] [systimemon.go:28] ["start system time monitor"]
[2024/07/29 22:19:01.047 +00:00] [INFO] [etcd.go:299] ["starting an etcd server"] [etcd-version=3.4.3] [git-sha="Not provided (use ./build instead of go build)"] [go-version=go1.18.2] [go-os=linux] [go-arch=arm64] [max-cpu-set=8] [max-cpu-available=8] [member-initialized=true] [name=pd1] [data-dir=/data/pd1] [wal-dir=] [wal-dir-dedicated=] [member-dir=/data/pd1/member] [force-new-cluster=false] [heartbeat-interval=500ms] [election-timeout=3s] [initial-election-tick-advance=true] [snapshot-count=100000] [snapshot-catchup-entries=5000] [initial-advertise-peer-urls="[http://pd1:2380]"] [listen-peer-urls="[http://0.0.0.0:2380]"] [advertise-client-urls="[http://pd1:2379]"] [listen-client-urls="[http://0.0.0.0:2379]"] [listen-metrics-urls="[]"] [cors="[*]"] [host-whitelist="[*]"] [initial-cluster=] [initial-cluster-state=new] [initial-cluster-token=] [quota-size-bytes=8589934592] [pre-vote=true] [initial-corrupt-check=false] [corrupt-check-time-interval=0s] [auto-compaction-mode=periodic] [auto-compaction-retention=1h0m0s] [auto-compaction-interval=1h0m0s] [discovery-url=] [discovery-proxy=]
[2024/07/29 22:19:01.047 +00:00] [WARN] [server.go:298] ["exceeded recommended request limit"] [max-request-bytes=157286400] [max-request-size="157 MB"] [recommended-request-bytes=10485760] [recommended-request-size="10 MB"]
[2024/07/29 22:19:01.061 +00:00] [INFO] [backend.go:79] ["opened backend db"] [path=/data/pd1/member/snap/db] [took=3.571583ms]
[2024/07/29 22:19:01.081 +00:00] [INFO] [raft.go:506] ["restarting local member"] [cluster-id=4586ab14de6050dd] [local-member-id=ed69672f88924e60] [commit-index=117]
[2024/07/29 22:19:01.083 +00:00] [INFO] [raft.go:1530] ["ed69672f88924e60 switched to configuration voters=()"]
[2024/07/29 22:19:01.083 +00:00] [INFO] [raft.go:700] ["ed69672f88924e60 became follower at term 3"]
[2024/07/29 22:19:01.084 +00:00] [INFO] [raft.go:383] ["newRaft ed69672f88924e60 [peers: [], term: 3, commit: 117, applied: 0, lastindex: 117, lastterm: 3]"]
[2024/07/29 22:19:01.086 +00:00] [WARN] [store.go:1317] ["simple token is not cryptographically signed"]
[2024/07/29 22:19:01.088 +00:00] [INFO] [quota.go:126] ["enabled backend quota"] [quota-name=v3-applier] [quota-size-bytes=8589934592] [quota-size="8.6 GB"]
[2024/07/29 22:19:01.090 +00:00] [INFO] [server.go:792] ["starting etcd server"] [local-member-id=ed69672f88924e60] [local-server-version=3.4.3] [cluster-version=to_be_decided]
[2024/07/29 22:19:01.092 +00:00] [INFO] [server.go:680] ["starting initial election tick advance"] [election-ticks=6]
[2024/07/29 22:19:01.097 +00:00] [INFO] [raft.go:1530] ["ed69672f88924e60 switched to configuration voters=(3486081234046183923)"]
[2024/07/29 22:19:01.099 +00:00] [INFO] [cluster.go:392] ["added member"] [cluster-id=4586ab14de6050dd] [local-member-id=ed69672f88924e60] [added-peer-id=30610c698d7a69f3] [added-peer-peer-urls="[http://pd2:2380]"]
[2024/07/29 22:19:01.099 +00:00] [INFO] [peer.go:128] ["starting remote peer"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:19:01.099 +00:00] [INFO] [pipeline.go:71] ["started HTTP pipelining with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:19:01.101 +00:00] [INFO] [etcd.go:241] ["now serving peer/client/metrics"] [local-member-id=ed69672f88924e60] [initial-advertise-peer-urls="[http://pd1:2380]"] [listen-peer-urls="[http://0.0.0.0:2380]"] [advertise-client-urls="[http://pd1:2379]"] [listen-client-urls="[http://0.0.0.0:2379]"] [listen-metrics-urls="[]"]
[2024/07/29 22:19:01.102 +00:00] [INFO] [etcd.go:576] ["serving peer traffic"] [address="[::]:2380"]
[2024/07/29 22:19:01.102 +00:00] [INFO] [peer.go:134] ["started remote peer"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:19:01.103 +00:00] [INFO] [transport.go:327] ["added remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3] [remote-peer-urls="[http://pd2:2380]"]
[2024/07/29 22:19:01.102 +00:00] [INFO] [stream.go:406] ["started stream reader with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:19:01.102 +00:00] [INFO] [stream.go:166] ["started stream writer with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:19:01.102 +00:00] [INFO] [stream.go:166] ["started stream writer with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:19:01.102 +00:00] [INFO] [stream.go:406] ["started stream reader with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:19:01.103 +00:00] [INFO] [raft.go:1530] ["ed69672f88924e60 switched to configuration voters=(3486081234046183923 16382016976602811638)"]
[2024/07/29 22:19:01.108 +00:00] [INFO] [cluster.go:392] ["added member"] [cluster-id=4586ab14de6050dd] [local-member-id=ed69672f88924e60] [added-peer-id=e3589da502d44cf6] [added-peer-peer-urls="[http://pd0:2380]"]
[2024/07/29 22:19:01.109 +00:00] [INFO] [peer.go:128] ["starting remote peer"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:19:01.109 +00:00] [INFO] [pipeline.go:71] ["started HTTP pipelining with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:19:01.110 +00:00] [INFO] [peer.go:134] ["started remote peer"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:19:01.110 +00:00] [INFO] [transport.go:327] ["added remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6] [remote-peer-urls="[http://pd0:2380]"]
[2024/07/29 22:19:01.111 +00:00] [INFO] [raft.go:1530] ["ed69672f88924e60 switched to configuration voters=(3486081234046183923 16382016976602811638 17107318113395953248)"]
[2024/07/29 22:19:01.111 +00:00] [INFO] [cluster.go:392] ["added member"] [cluster-id=4586ab14de6050dd] [local-member-id=ed69672f88924e60] [added-peer-id=ed69672f88924e60] [added-peer-peer-urls="[http://pd1:2380]"]
[2024/07/29 22:19:01.110 +00:00] [INFO] [peer_status.go:51] ["peer became active"] [peer-id=30610c698d7a69f3]
[2024/07/29 22:19:01.112 +00:00] [INFO] [stream.go:425] ["established TCP streaming connection with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:19:01.111 +00:00] [INFO] [stream.go:250] ["set message encoder"] [from=ed69672f88924e60] [to=ed69672f88924e60] [stream-type="stream Message"]
[2024/07/29 22:19:01.113 +00:00] [WARN] [stream.go:277] ["established TCP streaming connection with remote peer"] [stream-writer-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:19:01.110 +00:00] [INFO] [stream.go:166] ["started stream writer with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:19:01.110 +00:00] [INFO] [stream.go:166] ["started stream writer with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:19:01.110 +00:00] [INFO] [stream.go:406] ["started stream reader with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:19:01.110 +00:00] [INFO] [stream.go:406] ["started stream reader with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:19:01.111 +00:00] [INFO] [cluster.go:558] ["set initial cluster version"] [cluster-id=4586ab14de6050dd] [local-member-id=ed69672f88924e60] [cluster-version=3.4]
[2024/07/29 22:19:01.115 +00:00] [INFO] [capability.go:76] ["enabled capabilities for version"] [cluster-version=3.4]
[2024/07/29 22:19:01.111 +00:00] [INFO] [stream.go:250] ["set message encoder"] [from=ed69672f88924e60] [to=ed69672f88924e60] [stream-type="stream MsgApp v2"]
[2024/07/29 22:19:01.115 +00:00] [WARN] [stream.go:277] ["established TCP streaming connection with remote peer"] [stream-writer-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:19:01.112 +00:00] [INFO] [stream.go:425] ["established TCP streaming connection with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:19:01.115 +00:00] [INFO] [peer_status.go:51] ["peer became active"] [peer-id=e3589da502d44cf6]
[2024/07/29 22:19:01.115 +00:00] [INFO] [stream.go:250] ["set message encoder"] [from=ed69672f88924e60] [to=ed69672f88924e60] [stream-type="stream MsgApp v2"]
[2024/07/29 22:19:01.115 +00:00] [INFO] [stream.go:250] ["set message encoder"] [from=ed69672f88924e60] [to=ed69672f88924e60] [stream-type="stream Message"]
[2024/07/29 22:19:01.118 +00:00] [WARN] [stream.go:277] ["established TCP streaming connection with remote peer"] [stream-writer-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:19:01.118 +00:00] [INFO] [stream.go:425] ["established TCP streaming connection with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:19:01.118 +00:00] [INFO] [stream.go:425] ["established TCP streaming connection with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:19:01.118 +00:00] [WARN] [stream.go:277] ["established TCP streaming connection with remote peer"] [stream-writer-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:19:01.148 +00:00] [INFO] [server.go:705] ["initialized peer connections; fast-forwarding election ticks"] [local-member-id=ed69672f88924e60] [forward-ticks=4] [forward-duration=2s] [election-ticks=6] [election-timeout=3s] [active-remote-members=2]
[2024/07/29 22:19:02.085 +00:00] [INFO] [raft.go:923] ["ed69672f88924e60 is starting a new election at term 3"]
[2024/07/29 22:19:02.088 +00:00] [INFO] [raft.go:729] ["ed69672f88924e60 became pre-candidate at term 3"]
[2024/07/29 22:19:02.088 +00:00] [INFO] [raft.go:824] ["ed69672f88924e60 received MsgPreVoteResp from ed69672f88924e60 at term 3"]
[2024/07/29 22:19:02.088 +00:00] [INFO] [raft.go:811] ["ed69672f88924e60 [logterm: 3, index: 117] sent MsgPreVote request to 30610c698d7a69f3 at term 3"]
[2024/07/29 22:19:02.088 +00:00] [INFO] [raft.go:811] ["ed69672f88924e60 [logterm: 3, index: 117] sent MsgPreVote request to e3589da502d44cf6 at term 3"]
[2024/07/29 22:19:02.090 +00:00] [INFO] [raft.go:859] ["ed69672f88924e60 [term: 3] received a MsgPreVoteResp message with higher term from 30610c698d7a69f3 [term: 5]"]
[2024/07/29 22:19:02.090 +00:00] [INFO] [raft.go:700] ["ed69672f88924e60 became follower at term 5"]
[2024/07/29 22:19:03.574 +00:00] [INFO] [raft.go:960] ["ed69672f88924e60 [logterm: 3, index: 117, vote: 0] cast MsgPreVote for e3589da502d44cf6 [logterm: 5, index: 124] at term 5"]
[2024/07/29 22:19:03.595 +00:00] [INFO] [raft.go:859] ["ed69672f88924e60 [term: 5] received a MsgVote message with higher term from e3589da502d44cf6 [term: 6]"]
[2024/07/29 22:19:03.596 +00:00] [INFO] [raft.go:700] ["ed69672f88924e60 became follower at term 6"]
[2024/07/29 22:19:03.596 +00:00] [INFO] [raft.go:960] ["ed69672f88924e60 [logterm: 3, index: 117, vote: 0] cast MsgVote for e3589da502d44cf6 [logterm: 5, index: 124] at term 6"]
[2024/07/29 22:19:03.667 +00:00] [INFO] [node.go:325] ["raft.node: ed69672f88924e60 elected leader e3589da502d44cf6 at term 6"]
[2024/07/29 22:19:03.671 +00:00] [INFO] [server.go:2016] ["published local member to cluster through raft"] [local-member-id=ed69672f88924e60] [local-member-attributes="{Name:pd1 ClientURLs:[http://pd1:2379]}"] [request-path=/0/members/ed69672f88924e60/attributes] [cluster-id=4586ab14de6050dd] [publish-timeout=11s]
[2024/07/29 22:19:03.671 +00:00] [INFO] [server.go:326] ["create etcd v3 client"] [endpoints="[http://pd1:2379]"] [cert="{\"cacert-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cert-allowed-cn\":null,\"SSLCABytes\":null,\"SSLCertBytes\":null,\"SSLKEYBytes\":null,\"redact-info-log\":false,\"encryption\":{\"data-encryption-method\":\"plaintext\",\"data-key-rotation-period\":\"168h0m0s\",\"master-key\":{\"type\":\"plaintext\",\"key-id\":\"\",\"region\":\"\",\"endpoint\":\"\",\"path\":\"\"}}}"]
[2024/07/29 22:19:03.674 +00:00] [INFO] [serve.go:139] ["serving client traffic insecurely; this is strongly discouraged!"] [address="[::]:2379"]
[2024/07/29 22:19:03.702 +00:00] [INFO] [server.go:381] ["init cluster id"] [cluster-id=7397183400508190990]
[2024/07/29 22:19:03.753 +00:00] [INFO] [history_buffer.go:147] ["start from history index"] [start-index=0]
[2024/07/29 22:19:03.785 +00:00] [INFO] [server.go:1314] ["skip campaigning of pd leader and check later"] [server-name=pd1] [etcd-leader-id=16382016976602811638] [member-id=17107318113395953248]
[2024/07/29 22:19:03.988 +00:00] [INFO] [server.go:1470] ["server enable region storage"]
[2024/07/29 22:19:03.988 +00:00] [INFO] [server.go:1304] ["start to watch pd leader"] [pd-leader="name:\"pd0\" member_id:16382016976602811638 peer_urls:\"http://pd0:2380\" client_urls:\"http://pd0:2379\" "]
[2024/07/29 22:19:03.988 +00:00] [INFO] [client.go:123] ["region syncer start load region"]
[2024/07/29 22:19:03.990 +00:00] [INFO] [client.go:126] ["region syncer finished load region"] [time-cost=2.028417ms]
[2024/07/29 22:19:03.993 +00:00] [INFO] [client.go:167] ["server starts to synchronize with leader"] [server=pd1] [leader=pd0] [request-index=0]
[2024/07/29 22:19:12.587 +00:00] [INFO] [raft.go:923] ["ed69672f88924e60 is starting a new election at term 6"]
[2024/07/29 22:19:13.231 +00:00] [INFO] [raft.go:729] ["ed69672f88924e60 became pre-candidate at term 6"]
[2024/07/29 22:19:13.236 +00:00] [INFO] [raft.go:824] ["ed69672f88924e60 received MsgPreVoteResp from ed69672f88924e60 at term 6"]
[2024/07/29 22:19:13.241 +00:00] [INFO] [raft.go:811] ["ed69672f88924e60 [logterm: 6, index: 142] sent MsgPreVote request to 30610c698d7a69f3 at term 6"]
[2024/07/29 22:19:13.242 +00:00] [INFO] [raft.go:811] ["ed69672f88924e60 [logterm: 6, index: 142] sent MsgPreVote request to e3589da502d44cf6 at term 6"]
[2024/07/29 22:19:13.242 +00:00] [INFO] [node.go:331] ["raft.node: ed69672f88924e60 lost leader e3589da502d44cf6 at term 6"]
[2024/07/29 22:19:13.243 +00:00] [INFO] [raft.go:700] ["ed69672f88924e60 became follower at term 6"]
[2024/07/29 22:19:13.243 +00:00] [INFO] [node.go:325] ["raft.node: ed69672f88924e60 elected leader e3589da502d44cf6 at term 6"]
[2024/07/29 22:19:13.246 +00:00] [WARN] [util.go:144] ["apply request took too long"] [took=6.421532253s] [expected-duration=100ms] [prefix="read-only range "] [request="key:\"/pd/7397183400508190990/config\" "] [response="range_response_count:1 size:3658"] []
[2024/07/29 22:19:13.250 +00:00] [INFO] [trace.go:145] ["trace[137040380] range"] [detail="{range_begin:/pd/7397183400508190990/config; range_end:; response_count:1; response_revision:119; }"] [duration=6.426982586s] [start=2024/07/29 22:19:06.823 +00:00] [end=2024/07/29 22:19:13.250 +00:00] [steps="[\"trace[137040380] 'agreement among raft nodes before linearized reading'  (duration: 6.419599128s)\"]"]
[2024/07/29 22:19:13.253 +00:00] [WARN] [etcdutil.go:121] ["kv gets too slow"] [request-key=/pd/7397183400508190990/config] [cost=6.45007267s] []
[2024/07/29 22:19:14.194 +00:00] [WARN] [util.go:144] ["apply request took too long"] [took=200.282959ms] [expected-duration=100ms] [prefix=] [request="header:<ID:5545779422811147048 > txn:<compare:<> success:<request_put:<key:\"/pd/7397183400508190990/raft/s/00000000000000001003\" value_size:103 >> failure:<>>"] [response=size:14] []
[2024/07/29 22:22:35.153 +00:00] [INFO] [main.go:121] ["Got signal to exit"] [signal=terminated]
[2024/07/29 22:22:35.164 +00:00] [INFO] [server.go:460] ["closing server"]
[2024/07/29 22:22:35.153 +00:00] [INFO] [server.go:1446] ["server is closed, exit etcd leader loop"]
[2024/07/29 22:22:35.154 +00:00] [INFO] [server.go:591] ["server is closed, exist encryption key manager loop"]
[2024/07/29 22:22:35.155 +00:00] [INFO] [server.go:566] ["server is closed, exit metrics loop"]
[2024/07/29 22:22:35.155 +00:00] [INFO] [server.go:580] ["server is closed, exit allocator loop"]
[2024/07/29 22:22:35.155 +00:00] [ERROR] [client.go:171] ["region sync with leader meet error"] [error="[PD:grpc:ErrGRPCRecv]rpc error: code = Canceled desc = context canceled: rpc error: code = Canceled desc = context canceled"]
[2024/07/29 22:22:35.182 +00:00] [WARN] [grpclog.go:60] ["grpc: addrConn.createTransport failed to connect to {pd0:2379  <nil> 0 <nil>}. Err :connection error: desc = \"transport: Error while dialing dial tcp 172.18.0.4:2379: connect: connection refused\". Reconnecting..."]
[2024/07/29 22:22:35.183 +00:00] [INFO] [raft.go:859] ["ed69672f88924e60 [term: 6] received a MsgVote message with higher term from 30610c698d7a69f3 [term: 7]"]
[2024/07/29 22:22:35.184 +00:00] [INFO] [raft.go:700] ["ed69672f88924e60 became follower at term 7"]
[2024/07/29 22:22:35.184 +00:00] [INFO] [raft.go:960] ["ed69672f88924e60 [logterm: 6, index: 227, vote: 0] cast MsgVote for 30610c698d7a69f3 [logterm: 6, index: 227] at term 7"]
[2024/07/29 22:22:35.184 +00:00] [INFO] [node.go:331] ["raft.node: ed69672f88924e60 lost leader e3589da502d44cf6 at term 7"]
[2024/07/29 22:22:35.184 +00:00] [INFO] [node.go:325] ["raft.node: ed69672f88924e60 elected leader 30610c698d7a69f3 at term 7"]
[2024/07/29 22:22:35.699 +00:00] [WARN] [stream.go:436] ["lost TCP streaming connection with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6] [error=EOF]
[2024/07/29 22:22:35.700 +00:00] [WARN] [stream.go:436] ["lost TCP streaming connection with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6] [error=EOF]
[2024/07/29 22:22:35.702 +00:00] [WARN] [peer_status.go:68] ["peer became inactive (message send to peer failed)"] [peer-id=e3589da502d44cf6] [error="failed to dial e3589da502d44cf6 on stream Message (peer e3589da502d44cf6 failed to find local node ed69672f88924e60)"]
[2024/07/29 22:22:36.173 +00:00] [INFO] [server.go:1308] ["pd leader has changed, try to re-campaign a pd leader"]
[2024/07/29 22:22:36.174 +00:00] [INFO] [server.go:1314] ["skip campaigning of pd leader and check later"] [server-name=pd1] [etcd-leader-id=3486081234046183923] [member-id=17107318113395953248]
[2024/07/29 22:22:36.247 +00:00] [INFO] [raft.go:1355] ["ed69672f88924e60 [term 7] received MsgTimeoutNow from 30610c698d7a69f3 and starts an election to get leadership."]
[2024/07/29 22:22:36.247 +00:00] [INFO] [raft.go:713] ["ed69672f88924e60 became candidate at term 8"]
[2024/07/29 22:22:36.247 +00:00] [INFO] [raft.go:824] ["ed69672f88924e60 received MsgVoteResp from ed69672f88924e60 at term 8"]
[2024/07/29 22:22:36.247 +00:00] [INFO] [raft.go:811] ["ed69672f88924e60 [logterm: 7, index: 233] sent MsgVote request to 30610c698d7a69f3 at term 8"]
[2024/07/29 22:22:36.247 +00:00] [INFO] [raft.go:811] ["ed69672f88924e60 [logterm: 7, index: 233] sent MsgVote request to e3589da502d44cf6 at term 8"]
[2024/07/29 22:22:36.248 +00:00] [INFO] [node.go:331] ["raft.node: ed69672f88924e60 lost leader 30610c698d7a69f3 at term 8"]
[2024/07/29 22:22:36.249 +00:00] [INFO] [raft.go:824] ["ed69672f88924e60 received MsgVoteResp from 30610c698d7a69f3 at term 8"]
[2024/07/29 22:22:36.249 +00:00] [INFO] [raft.go:1302] ["ed69672f88924e60 has received 2 MsgVoteResp votes and 0 vote rejections"]
[2024/07/29 22:22:36.249 +00:00] [INFO] [raft.go:765] ["ed69672f88924e60 became leader at term 8"]
[2024/07/29 22:22:36.249 +00:00] [INFO] [node.go:325] ["raft.node: ed69672f88924e60 elected leader ed69672f88924e60 at term 8"]
[2024/07/29 22:22:36.253 +00:00] [WARN] [cluster_util.go:315] ["failed to reach the peer URL"] [address=http://pd0:2380/version] [remote-member-id=e3589da502d44cf6] [error="Get \"http://pd0:2380/version\": dial tcp: lookup pd0 on 127.0.0.11:53: no such host"]
[2024/07/29 22:22:36.253 +00:00] [WARN] [cluster_util.go:168] ["failed to get version"] [remote-member-id=e3589da502d44cf6] [error="Get \"http://pd0:2380/version\": dial tcp: lookup pd0 on 127.0.0.11:53: no such host"]
[2024/07/29 22:22:36.374 +00:00] [INFO] [server.go:1284] ["server is closed, return pd leader loop"]
[2024/07/29 22:22:36.375 +00:00] [INFO] [etcd.go:360] ["closing etcd server"] [name=pd1] [data-dir=/data/pd1] [advertise-peer-urls="[http://pd1:2380]"] [advertise-client-urls="[http://pd1:2379]"]
[2024/07/29 22:22:36.375 +00:00] [WARN] [grpclog.go:60] ["transport: http2Server.HandleStreams failed to read frame: read tcp 127.0.0.1:2379->127.0.0.1:47698: use of closed network connection"]
[2024/07/29 22:22:36.376 +00:00] [INFO] [server.go:1413] ["leadership transfer starting"] [local-member-id=ed69672f88924e60] [current-leader-member-id=ed69672f88924e60] [transferee-member-id=30610c698d7a69f3]
[2024/07/29 22:22:36.376 +00:00] [INFO] [raft.go:1261] ["ed69672f88924e60 [term 8] starts to transfer leadership to 30610c698d7a69f3"]
[2024/07/29 22:22:36.376 +00:00] [INFO] [raft.go:1267] ["ed69672f88924e60 sends MsgTimeoutNow to 30610c698d7a69f3 immediately as 30610c698d7a69f3 already has up-to-date log"]
[2024/07/29 22:22:36.376 +00:00] [WARN] [grpclog.go:60] ["grpc: addrConn.createTransport failed to connect to {0.0.0.0:2379  <nil> 0 <nil>}. Err :connection error: desc = \"transport: Error while dialing dial tcp 0.0.0.0:2379: operation was canceled\". Reconnecting..."]
[2024/07/29 22:22:36.378 +00:00] [INFO] [raft.go:859] ["ed69672f88924e60 [term: 8] received a MsgVote message with higher term from 30610c698d7a69f3 [term: 9]"]
[2024/07/29 22:22:36.379 +00:00] [INFO] [raft.go:700] ["ed69672f88924e60 became follower at term 9"]
[2024/07/29 22:22:36.379 +00:00] [INFO] [raft.go:960] ["ed69672f88924e60 [logterm: 8, index: 234, vote: 0] cast MsgVote for 30610c698d7a69f3 [logterm: 8, index: 234] at term 9"]
[2024/07/29 22:22:36.379 +00:00] [INFO] [node.go:331] ["raft.node: ed69672f88924e60 lost leader ed69672f88924e60 at term 9"]
[2024/07/29 22:22:36.381 +00:00] [INFO] [node.go:325] ["raft.node: ed69672f88924e60 elected leader 30610c698d7a69f3 at term 9"]
[2024/07/29 22:22:36.878 +00:00] [INFO] [server.go:1434] ["leadership transfer finished"] [local-member-id=ed69672f88924e60] [old-leader-member-id=ed69672f88924e60] [new-leader-member-id=30610c698d7a69f3] [took=502.052167ms]
[2024/07/29 22:22:36.879 +00:00] [INFO] [peer.go:333] ["stopping remote peer"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:22:36.880 +00:00] [WARN] [stream.go:291] ["closed TCP streaming connection with remote peer"] [stream-writer-type="stream MsgApp v2"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:22:36.881 +00:00] [WARN] [stream.go:301] ["stopped TCP streaming connection with remote peer"] [stream-writer-type="stream MsgApp v2"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:22:36.882 +00:00] [WARN] [stream.go:291] ["closed TCP streaming connection with remote peer"] [stream-writer-type="stream Message"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:22:36.883 +00:00] [WARN] [stream.go:301] ["stopped TCP streaming connection with remote peer"] [stream-writer-type="stream Message"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:22:36.883 +00:00] [INFO] [pipeline.go:86] ["stopped HTTP pipelining with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:22:36.884 +00:00] [WARN] [stream.go:436] ["lost TCP streaming connection with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3] [error="context canceled"]
[2024/07/29 22:22:36.884 +00:00] [WARN] [peer_status.go:68] ["peer became inactive (message send to peer failed)"] [peer-id=30610c698d7a69f3] [error="failed to read 30610c698d7a69f3 on stream MsgApp v2 (context canceled)"]
[2024/07/29 22:22:36.885 +00:00] [INFO] [stream.go:459] ["stopped stream reader with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:22:36.886 +00:00] [WARN] [stream.go:436] ["lost TCP streaming connection with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3] [error="context canceled"]
[2024/07/29 22:22:36.886 +00:00] [INFO] [stream.go:459] ["stopped stream reader with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:22:36.886 +00:00] [INFO] [peer.go:340] ["stopped remote peer"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:22:36.887 +00:00] [INFO] [peer.go:333] ["stopping remote peer"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:22:36.887 +00:00] [WARN] [stream.go:291] ["closed TCP streaming connection with remote peer"] [stream-writer-type="stream MsgApp v2"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:22:36.888 +00:00] [WARN] [stream.go:301] ["stopped TCP streaming connection with remote peer"] [stream-writer-type="stream MsgApp v2"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:22:36.888 +00:00] [WARN] [stream.go:291] ["closed TCP streaming connection with remote peer"] [stream-writer-type="stream Message"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:22:36.888 +00:00] [WARN] [stream.go:301] ["stopped TCP streaming connection with remote peer"] [stream-writer-type="stream Message"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:22:36.889 +00:00] [INFO] [pipeline.go:86] ["stopped HTTP pipelining with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:22:36.889 +00:00] [INFO] [stream.go:459] ["stopped stream reader with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:22:36.889 +00:00] [INFO] [stream.go:459] ["stopped stream reader with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:22:36.889 +00:00] [INFO] [peer.go:340] ["stopped remote peer"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:22:36.890 +00:00] [WARN] [http.go:444] ["failed to find remote peer in cluster"] [local-member-id=ed69672f88924e60] [remote-peer-id-stream-handler=ed69672f88924e60] [remote-peer-id-from=30610c698d7a69f3] [cluster-id=4586ab14de6050dd]
[2024/07/29 22:22:36.890 +00:00] [WARN] [http.go:444] ["failed to find remote peer in cluster"] [local-member-id=ed69672f88924e60] [remote-peer-id-stream-handler=ed69672f88924e60] [remote-peer-id-from=30610c698d7a69f3] [cluster-id=4586ab14de6050dd]
[2024/07/29 22:22:36.893 +00:00] [INFO] [etcd.go:555] ["stopping serving peer traffic"] [address="[::]:2380"]
[2024/07/29 22:22:36.894 +00:00] [INFO] [etcd.go:562] ["stopped serving peer traffic"] [address="[::]:2380"]
[2024/07/29 22:22:36.894 +00:00] [INFO] [etcd.go:364] ["closed etcd server"] [name=pd1] [data-dir=/data/pd1] [advertise-peer-urls="[http://pd1:2380]"] [advertise-client-urls="[http://pd1:2379]"]
[2024/07/29 22:22:36.897 +00:00] [INFO] [manager.go:73] ["exit dashboard loop"]
[2024/07/29 22:22:36.897 +00:00] [INFO] [server.go:494] ["close server"]
[2024/07/29 22:22:49.788 +00:00] [INFO] [util.go:41] ["Welcome to Placement Driver (PD)"]
[2024/07/29 22:22:49.790 +00:00] [INFO] [util.go:42] [PD] [release-version=v6.1.0]
[2024/07/29 22:22:49.791 +00:00] [INFO] [util.go:43] [PD] [edition=Community]
[2024/07/29 22:22:49.791 +00:00] [INFO] [util.go:44] [PD] [git-hash=d82f4fab6cf37cd1eca9c3574984e12a7ae27c42]
[2024/07/29 22:22:49.791 +00:00] [INFO] [util.go:45] [PD] [git-branch=heads/refs/tags/v6.1.0]
[2024/07/29 22:22:49.791 +00:00] [INFO] [util.go:46] [PD] [utc-build-time="2022-06-01 01:47:53"]
[2024/07/29 22:22:49.791 +00:00] [INFO] [metricutil.go:83] ["disable Prometheus push client"]
[2024/07/29 22:22:49.792 +00:00] [INFO] [server.go:240] ["PD Config"] [config="{\"client-urls\":\"http://0.0.0.0:2379\",\"peer-urls\":\"http://0.0.0.0:2380\",\"advertise-client-urls\":\"http://pd1:2379\",\"advertise-peer-urls\":\"http://pd1:2380\",\"name\":\"pd1\",\"data-dir\":\"/data/pd1\",\"force-new-cluster\":false,\"enable-grpc-gateway\":true,\"initial-cluster\":\"pd0=http://pd0:2380,pd1=http://pd1:2380,pd2=http://pd2:2380\",\"initial-cluster-state\":\"new\",\"initial-cluster-token\":\"pd-cluster\",\"join\":\"\",\"lease\":3,\"log\":{\"level\":\"info\",\"format\":\"text\",\"disable-timestamp\":false,\"file\":{\"filename\":\"/logs/pd1.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0},\"development\":false,\"disable-caller\":false,\"disable-stacktrace\":false,\"disable-error-verbose\":true,\"sampling\":null},\"tso-save-interval\":\"3s\",\"tso-update-physical-interval\":\"50ms\",\"enable-local-tso\":false,\"metric\":{\"job\":\"pd1\",\"address\":\"\",\"interval\":\"15s\"},\"schedule\":{\"max-snapshot-count\":64,\"max-pending-peer-count\":64,\"max-merge-region-size\":20,\"max-merge-region-keys\":200000,\"split-merge-interval\":\"1h0m0s\",\"enable-one-way-merge\":\"false\",\"enable-cross-table-merge\":\"true\",\"patrol-region-interval\":\"10ms\",\"max-store-down-time\":\"30m0s\",\"max-store-preparing-time\":\"48h0m0s\",\"leader-schedule-limit\":4,\"leader-schedule-policy\":\"count\",\"region-schedule-limit\":2048,\"replica-schedule-limit\":64,\"merge-schedule-limit\":8,\"hot-region-schedule-limit\":4,\"hot-region-cache-hits-threshold\":3,\"store-limit\":{},\"tolerant-size-ratio\":0,\"low-space-ratio\":0.8,\"high-space-ratio\":0.7,\"region-score-formula-version\":\"v2\",\"scheduler-max-waiting-operator\":5,\"enable-remove-down-replica\":\"true\",\"enable-replace-offline-replica\":\"true\",\"enable-make-up-replica\":\"true\",\"enable-remove-extra-replica\":\"true\",\"enable-location-replacement\":\"true\",\"enable-debug-metrics\":\"false\",\"enable-joint-consensus\":\"true\",\"schedulers-v2\":[{\"type\":\"balance-region\",\"args\":null,\"disable\":false,\"args-payload\":\"\"},{\"type\":\"balance-leader\",\"args\":null,\"disable\":false,\"args-payload\":\"\"},{\"type\":\"hot-region\",\"args\":null,\"disable\":false,\"args-payload\":\"\"},{\"type\":\"split-bucket\",\"args\":null,\"disable\":false,\"args-payload\":\"\"}],\"schedulers-payload\":null,\"store-limit-mode\":\"manual\",\"hot-regions-write-interval\":\"10m0s\",\"hot-regions-reserved-days\":7},\"replication\":{\"max-replicas\":3,\"location-labels\":\"\",\"strictly-match-label\":\"false\",\"enable-placement-rules\":\"true\",\"enable-placement-rules-cache\":\"false\",\"isolation-level\":\"\"},\"pd-server\":{\"use-region-storage\":\"true\",\"max-gap-reset-ts\":\"24h0m0s\",\"key-type\":\"table\",\"runtime-services\":\"\",\"metric-storage\":\"\",\"dashboard-address\":\"auto\",\"trace-region-flow\":\"true\",\"flow-round-by-digit\":3,\"min-resolved-ts-persistence-interval\":\"0s\"},\"cluster-version\":\"0.0.0\",\"labels\":{},\"quota-backend-bytes\":\"8GiB\",\"auto-compaction-mode\":\"periodic\",\"auto-compaction-retention-v2\":\"1h\",\"TickInterval\":\"500ms\",\"ElectionInterval\":\"3s\",\"PreVote\":true,\"max-request-bytes\":157286400,\"security\":{\"cacert-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cert-allowed-cn\":null,\"SSLCABytes\":null,\"SSLCertBytes\":null,\"SSLKEYBytes\":null,\"redact-info-log\":false,\"encryption\":{\"data-encryption-method\":\"plaintext\",\"data-key-rotation-period\":\"168h0m0s\",\"master-key\":{\"type\":\"plaintext\",\"key-id\":\"\",\"region\":\"\",\"endpoint\":\"\",\"path\":\"\"}}},\"label-property\":null,\"WarningMsgs\":null,\"DisableStrictReconfigCheck\":false,\"HeartbeatStreamBindInterval\":\"1m0s\",\"LeaderPriorityCheckInterval\":\"1m0s\",\"dashboard\":{\"tidb-cacert-path\":\"\",\"tidb-cert-path\":\"\",\"tidb-key-path\":\"\",\"public-path-prefix\":\"\",\"internal-proxy\":false,\"enable-telemetry\":true,\"enable-experimental\":false},\"replication-mode\":{\"replication-mode\":\"majority\",\"dr-auto-sync\":{\"label-key\":\"\",\"primary\":\"\",\"dr\":\"\",\"primary-replicas\":0,\"dr-replicas\":0,\"wait-store-timeout\":\"1m0s\",\"wait-sync-timeout\":\"1m0s\",\"wait-async-timeout\":\"2m0s\",\"pause-region-split\":\"false\"}}}"]
[2024/07/29 22:22:49.808 +00:00] [INFO] [server.go:215] ["register REST path"] [path=/pd/api/v1]
[2024/07/29 22:22:49.810 +00:00] [INFO] [server.go:215] ["register REST path"] [path=/pd/api/v2/]
[2024/07/29 22:22:49.811 +00:00] [INFO] [server.go:215] ["register REST path"] [path=/swagger/]
[2024/07/29 22:22:49.811 +00:00] [INFO] [server.go:215] ["register REST path"] [path=/autoscaling]
[2024/07/29 22:22:49.811 +00:00] [INFO] [distro.go:51] ["Using distribution strings"] [strings={}]
[2024/07/29 22:22:49.812 +00:00] [INFO] [server.go:215] ["register REST path"] [path=/dashboard/api/]
[2024/07/29 22:22:49.812 +00:00] [INFO] [server.go:215] ["register REST path"] [path=/dashboard/]
[2024/07/29 22:22:49.813 +00:00] [INFO] [etcd.go:117] ["configuring peer listeners"] [listen-peer-urls="[http://0.0.0.0:2380]"]
[2024/07/29 22:22:49.813 +00:00] [INFO] [etcd.go:127] ["configuring client listeners"] [listen-client-urls="[http://0.0.0.0:2379]"]
[2024/07/29 22:22:49.814 +00:00] [INFO] [etcd.go:602] ["pprof is enabled"] [path=/debug/pprof]
[2024/07/29 22:22:49.813 +00:00] [INFO] [systimemon.go:28] ["start system time monitor"]
[2024/07/29 22:22:49.815 +00:00] [INFO] [etcd.go:299] ["starting an etcd server"] [etcd-version=3.4.3] [git-sha="Not provided (use ./build instead of go build)"] [go-version=go1.18.2] [go-os=linux] [go-arch=arm64] [max-cpu-set=8] [max-cpu-available=8] [member-initialized=true] [name=pd1] [data-dir=/data/pd1] [wal-dir=] [wal-dir-dedicated=] [member-dir=/data/pd1/member] [force-new-cluster=false] [heartbeat-interval=500ms] [election-timeout=3s] [initial-election-tick-advance=true] [snapshot-count=100000] [snapshot-catchup-entries=5000] [initial-advertise-peer-urls="[http://pd1:2380]"] [listen-peer-urls="[http://0.0.0.0:2380]"] [advertise-client-urls="[http://pd1:2379]"] [listen-client-urls="[http://0.0.0.0:2379]"] [listen-metrics-urls="[]"] [cors="[*]"] [host-whitelist="[*]"] [initial-cluster=] [initial-cluster-state=new] [initial-cluster-token=] [quota-size-bytes=8589934592] [pre-vote=true] [initial-corrupt-check=false] [corrupt-check-time-interval=0s] [auto-compaction-mode=periodic] [auto-compaction-retention=1h0m0s] [auto-compaction-interval=1h0m0s] [discovery-url=] [discovery-proxy=]
[2024/07/29 22:22:49.816 +00:00] [WARN] [server.go:298] ["exceeded recommended request limit"] [max-request-bytes=157286400] [max-request-size="157 MB"] [recommended-request-bytes=10485760] [recommended-request-size="10 MB"]
[2024/07/29 22:22:49.820 +00:00] [INFO] [backend.go:79] ["opened backend db"] [path=/data/pd1/member/snap/db] [took=1.914416ms]
[2024/07/29 22:22:49.829 +00:00] [INFO] [raft.go:506] ["restarting local member"] [cluster-id=4586ab14de6050dd] [local-member-id=ed69672f88924e60] [commit-index=235]
[2024/07/29 22:22:49.829 +00:00] [INFO] [raft.go:1530] ["ed69672f88924e60 switched to configuration voters=()"]
[2024/07/29 22:22:49.829 +00:00] [INFO] [raft.go:700] ["ed69672f88924e60 became follower at term 9"]
[2024/07/29 22:22:49.829 +00:00] [INFO] [raft.go:383] ["newRaft ed69672f88924e60 [peers: [], term: 9, commit: 235, applied: 0, lastindex: 235, lastterm: 9]"]
[2024/07/29 22:22:49.831 +00:00] [WARN] [store.go:1317] ["simple token is not cryptographically signed"]
[2024/07/29 22:22:49.831 +00:00] [INFO] [quota.go:126] ["enabled backend quota"] [quota-name=v3-applier] [quota-size-bytes=8589934592] [quota-size="8.6 GB"]
[2024/07/29 22:22:49.832 +00:00] [INFO] [server.go:792] ["starting etcd server"] [local-member-id=ed69672f88924e60] [local-server-version=3.4.3] [cluster-version=to_be_decided]
[2024/07/29 22:22:49.833 +00:00] [INFO] [etcd.go:241] ["now serving peer/client/metrics"] [local-member-id=ed69672f88924e60] [initial-advertise-peer-urls="[http://pd1:2380]"] [listen-peer-urls="[http://0.0.0.0:2380]"] [advertise-client-urls="[http://pd1:2379]"] [listen-client-urls="[http://0.0.0.0:2379]"] [listen-metrics-urls="[]"]
[2024/07/29 22:22:49.834 +00:00] [INFO] [server.go:680] ["starting initial election tick advance"] [election-ticks=6]
[2024/07/29 22:22:49.834 +00:00] [INFO] [raft.go:1530] ["ed69672f88924e60 switched to configuration voters=(3486081234046183923)"]
[2024/07/29 22:22:49.834 +00:00] [INFO] [etcd.go:576] ["serving peer traffic"] [address="[::]:2380"]
[2024/07/29 22:22:49.835 +00:00] [INFO] [cluster.go:392] ["added member"] [cluster-id=4586ab14de6050dd] [local-member-id=ed69672f88924e60] [added-peer-id=30610c698d7a69f3] [added-peer-peer-urls="[http://pd2:2380]"]
[2024/07/29 22:22:49.836 +00:00] [INFO] [peer.go:128] ["starting remote peer"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:22:49.836 +00:00] [INFO] [pipeline.go:71] ["started HTTP pipelining with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:22:49.838 +00:00] [INFO] [stream.go:166] ["started stream writer with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:22:49.838 +00:00] [INFO] [stream.go:166] ["started stream writer with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:22:49.842 +00:00] [INFO] [peer.go:134] ["started remote peer"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:22:49.842 +00:00] [INFO] [transport.go:327] ["added remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3] [remote-peer-urls="[http://pd2:2380]"]
[2024/07/29 22:22:49.842 +00:00] [INFO] [raft.go:1530] ["ed69672f88924e60 switched to configuration voters=(3486081234046183923 16382016976602811638)"]
[2024/07/29 22:22:49.843 +00:00] [INFO] [cluster.go:392] ["added member"] [cluster-id=4586ab14de6050dd] [local-member-id=ed69672f88924e60] [added-peer-id=e3589da502d44cf6] [added-peer-peer-urls="[http://pd0:2380]"]
[2024/07/29 22:22:49.843 +00:00] [INFO] [peer.go:128] ["starting remote peer"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:22:49.843 +00:00] [INFO] [pipeline.go:71] ["started HTTP pipelining with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:22:49.842 +00:00] [INFO] [stream.go:406] ["started stream reader with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:22:49.842 +00:00] [INFO] [stream.go:406] ["started stream reader with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:22:49.845 +00:00] [INFO] [stream.go:166] ["started stream writer with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:22:49.845 +00:00] [INFO] [peer.go:134] ["started remote peer"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:22:49.846 +00:00] [INFO] [transport.go:327] ["added remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6] [remote-peer-urls="[http://pd0:2380]"]
[2024/07/29 22:22:49.846 +00:00] [INFO] [raft.go:1530] ["ed69672f88924e60 switched to configuration voters=(3486081234046183923 16382016976602811638 17107318113395953248)"]
[2024/07/29 22:22:49.846 +00:00] [INFO] [stream.go:250] ["set message encoder"] [from=ed69672f88924e60] [to=ed69672f88924e60] [stream-type="stream MsgApp v2"]
[2024/07/29 22:22:49.847 +00:00] [INFO] [peer_status.go:51] ["peer became active"] [peer-id=e3589da502d44cf6]
[2024/07/29 22:22:49.847 +00:00] [WARN] [stream.go:277] ["established TCP streaming connection with remote peer"] [stream-writer-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:22:49.846 +00:00] [INFO] [stream.go:166] ["started stream writer with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:22:49.846 +00:00] [INFO] [stream.go:406] ["started stream reader with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:22:49.846 +00:00] [INFO] [stream.go:406] ["started stream reader with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:22:49.846 +00:00] [INFO] [cluster.go:392] ["added member"] [cluster-id=4586ab14de6050dd] [local-member-id=ed69672f88924e60] [added-peer-id=ed69672f88924e60] [added-peer-peer-urls="[http://pd1:2380]"]
[2024/07/29 22:22:49.847 +00:00] [INFO] [stream.go:425] ["established TCP streaming connection with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:22:49.847 +00:00] [INFO] [cluster.go:558] ["set initial cluster version"] [cluster-id=4586ab14de6050dd] [local-member-id=ed69672f88924e60] [cluster-version=3.4]
[2024/07/29 22:22:49.847 +00:00] [INFO] [capability.go:76] ["enabled capabilities for version"] [cluster-version=3.4]
[2024/07/29 22:22:49.848 +00:00] [INFO] [stream.go:250] ["set message encoder"] [from=ed69672f88924e60] [to=ed69672f88924e60] [stream-type="stream Message"]
[2024/07/29 22:22:49.848 +00:00] [WARN] [stream.go:277] ["established TCP streaming connection with remote peer"] [stream-writer-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:22:49.848 +00:00] [INFO] [stream.go:425] ["established TCP streaming connection with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:22:49.852 +00:00] [INFO] [stream.go:250] ["set message encoder"] [from=ed69672f88924e60] [to=ed69672f88924e60] [stream-type="stream MsgApp v2"]
[2024/07/29 22:22:49.853 +00:00] [INFO] [peer_status.go:51] ["peer became active"] [peer-id=30610c698d7a69f3]
[2024/07/29 22:22:49.853 +00:00] [WARN] [stream.go:277] ["established TCP streaming connection with remote peer"] [stream-writer-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:22:49.853 +00:00] [WARN] [peer_status.go:68] ["peer became inactive (message send to peer failed)"] [peer-id=30610c698d7a69f3] [error="failed to dial 30610c698d7a69f3 on stream MsgApp v2 (peer 30610c698d7a69f3 failed to find local node ed69672f88924e60)"]
[2024/07/29 22:22:49.853 +00:00] [INFO] [stream.go:250] ["set message encoder"] [from=ed69672f88924e60] [to=ed69672f88924e60] [stream-type="stream Message"]
[2024/07/29 22:22:49.853 +00:00] [INFO] [peer_status.go:51] ["peer became active"] [peer-id=30610c698d7a69f3]
[2024/07/29 22:22:49.853 +00:00] [WARN] [stream.go:277] ["established TCP streaming connection with remote peer"] [stream-writer-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:22:49.853 +00:00] [INFO] [stream.go:425] ["established TCP streaming connection with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:22:49.853 +00:00] [INFO] [stream.go:425] ["established TCP streaming connection with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:22:49.886 +00:00] [INFO] [server.go:705] ["initialized peer connections; fast-forwarding election ticks"] [local-member-id=ed69672f88924e60] [forward-ticks=4] [forward-duration=2s] [election-ticks=6] [election-timeout=3s] [active-remote-members=2]
[2024/07/29 22:22:51.332 +00:00] [INFO] [raft.go:923] ["ed69672f88924e60 is starting a new election at term 9"]
[2024/07/29 22:22:51.332 +00:00] [INFO] [raft.go:729] ["ed69672f88924e60 became pre-candidate at term 9"]
[2024/07/29 22:22:51.333 +00:00] [INFO] [raft.go:824] ["ed69672f88924e60 received MsgPreVoteResp from ed69672f88924e60 at term 9"]
[2024/07/29 22:22:51.333 +00:00] [INFO] [raft.go:811] ["ed69672f88924e60 [logterm: 9, index: 235] sent MsgPreVote request to 30610c698d7a69f3 at term 9"]
[2024/07/29 22:22:51.334 +00:00] [INFO] [raft.go:811] ["ed69672f88924e60 [logterm: 9, index: 235] sent MsgPreVote request to e3589da502d44cf6 at term 9"]
[2024/07/29 22:22:51.336 +00:00] [INFO] [raft.go:824] ["ed69672f88924e60 received MsgPreVoteResp from e3589da502d44cf6 at term 9"]
[2024/07/29 22:22:51.336 +00:00] [INFO] [raft.go:1302] ["ed69672f88924e60 has received 2 MsgPreVoteResp votes and 0 vote rejections"]
[2024/07/29 22:22:51.336 +00:00] [INFO] [raft.go:713] ["ed69672f88924e60 became candidate at term 10"]
[2024/07/29 22:22:51.336 +00:00] [INFO] [raft.go:824] ["ed69672f88924e60 received MsgVoteResp from ed69672f88924e60 at term 10"]
[2024/07/29 22:22:51.336 +00:00] [INFO] [raft.go:811] ["ed69672f88924e60 [logterm: 9, index: 235] sent MsgVote request to 30610c698d7a69f3 at term 10"]
[2024/07/29 22:22:51.337 +00:00] [INFO] [raft.go:811] ["ed69672f88924e60 [logterm: 9, index: 235] sent MsgVote request to e3589da502d44cf6 at term 10"]
[2024/07/29 22:22:51.386 +00:00] [INFO] [raft.go:824] ["ed69672f88924e60 received MsgVoteResp from e3589da502d44cf6 at term 10"]
[2024/07/29 22:22:51.386 +00:00] [INFO] [raft.go:1302] ["ed69672f88924e60 has received 2 MsgVoteResp votes and 0 vote rejections"]
[2024/07/29 22:22:51.386 +00:00] [INFO] [raft.go:765] ["ed69672f88924e60 became leader at term 10"]
[2024/07/29 22:22:51.386 +00:00] [INFO] [node.go:325] ["raft.node: ed69672f88924e60 elected leader ed69672f88924e60 at term 10"]
[2024/07/29 22:22:51.389 +00:00] [INFO] [server.go:2016] ["published local member to cluster through raft"] [local-member-id=ed69672f88924e60] [local-member-attributes="{Name:pd1 ClientURLs:[http://pd1:2379]}"] [request-path=/0/members/ed69672f88924e60/attributes] [cluster-id=4586ab14de6050dd] [publish-timeout=11s]
[2024/07/29 22:22:51.389 +00:00] [INFO] [server.go:326] ["create etcd v3 client"] [endpoints="[http://pd1:2379]"] [cert="{\"cacert-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cert-allowed-cn\":null,\"SSLCABytes\":null,\"SSLCertBytes\":null,\"SSLKEYBytes\":null,\"redact-info-log\":false,\"encryption\":{\"data-encryption-method\":\"plaintext\",\"data-key-rotation-period\":\"168h0m0s\",\"master-key\":{\"type\":\"plaintext\",\"key-id\":\"\",\"region\":\"\",\"endpoint\":\"\",\"path\":\"\"}}}"]
[2024/07/29 22:22:51.390 +00:00] [INFO] [serve.go:139] ["serving client traffic insecurely; this is strongly discouraged!"] [address="[::]:2379"]
[2024/07/29 22:22:51.391 +00:00] [INFO] [server.go:381] ["init cluster id"] [cluster-id=7397183400508190990]
[2024/07/29 22:22:51.419 +00:00] [INFO] [history_buffer.go:147] ["start from history index"] [start-index=0]
[2024/07/29 22:22:51.432 +00:00] [INFO] [server.go:1326] ["start to campaign pd leader"] [campaign-pd-leader-name=pd1]
[2024/07/29 22:22:51.433 +00:00] [INFO] [lease.go:65] ["lease granted"] [lease-id=5647673364438967818] [lease-timeout=3] [purpose="pd leader election"]
[2024/07/29 22:22:51.434 +00:00] [INFO] [leadership.go:122] ["check campaign resp"] [resp="{\"header\":{\"cluster_id\":5009879741614805213,\"member_id\":17107318113395953248,\"revision\":219,\"raft_term\":10},\"succeeded\":true,\"responses\":[{\"Response\":{\"ResponsePut\":{\"header\":{\"revision\":219}}}}]}"]
[2024/07/29 22:22:51.434 +00:00] [INFO] [leadership.go:131] ["write leaderData to leaderPath ok"] [leaderPath=/pd/7397183400508190990/leader] [purpose="pd leader election"]
[2024/07/29 22:22:51.435 +00:00] [INFO] [server.go:1352] ["campaign pd leader ok"] [campaign-pd-leader-name=pd1]
[2024/07/29 22:22:51.435 +00:00] [INFO] [server.go:1359] ["initializing the global TSO allocator"]
[2024/07/29 22:22:51.435 +00:00] [INFO] [lease.go:135] ["start lease keep alive worker"] [interval=1s] [purpose="pd leader election"]
[2024/07/29 22:22:51.436 +00:00] [INFO] [tso.go:221] ["sync and save timestamp"] [last=2024/07/29 22:22:40.940 +00:00] [save=2024/07/29 22:22:54.435 +00:00] [next=2024/07/29 22:22:51.435 +00:00]
[2024/07/29 22:22:51.437 +00:00] [INFO] [server.go:1470] ["server enable region storage"]
[2024/07/29 22:22:51.439 +00:00] [INFO] [cluster.go:352] ["load stores"] [count=3] [cost=1.024458ms]
[2024/07/29 22:22:51.439 +00:00] [INFO] [cluster.go:363] ["load regions"] [count=1] [cost=779.917µs]
[2024/07/29 22:22:51.441 +00:00] [INFO] [coordinator.go:318] ["coordinator starts to collect cluster information"]
[2024/07/29 22:22:51.442 +00:00] [INFO] [id.go:122] ["idAllocator allocates a new id"] [alloc-id=6000]
[2024/07/29 22:22:51.442 +00:00] [INFO] [util.go:77] ["load cluster version"] [cluster-version=6.1.0]
[2024/07/29 22:22:51.443 +00:00] [INFO] [server.go:1410] ["PD cluster leader is ready to serve"] [pd-leader-name=pd1]
[2024/07/29 22:22:51.640 +00:00] [INFO] [server.go:214] ["establish sync region stream"] [requested-server=pd2] [url=http://pd2:2379]
[2024/07/29 22:22:51.641 +00:00] [INFO] [server.go:232] ["requested server has already in sync with server"] [requested-server=pd2] [server=pd1] [last-index=0]
[2024/07/29 22:22:51.784 +00:00] [WARN] [grpclog.go:60] ["transport: http2Server.HandleStreams failed to read frame: read tcp 172.19.0.2:2379->172.19.0.8:43966: read: connection reset by peer"]
[2024/07/29 22:22:52.439 +00:00] [INFO] [server.go:214] ["establish sync region stream"] [requested-server=pd0] [url=http://pd0:2379]
[2024/07/29 22:22:54.644 +00:00] [INFO] [server.go:232] ["requested server has already in sync with server"] [requested-server=pd0] [server=pd1] [last-index=0]
[2024/07/29 22:22:54.645 +00:00] [WARN] [tso.go:320] ["clock offset"] [jet-lag=164.114ms] [prev-physical=2024/07/29 22:22:54.481 +00:00] [now=2024/07/29 22:22:54.645 +00:00] [update-physical-interval=50ms]
[2024/07/29 22:22:57.734 +00:00] [INFO] [grpc_service.go:526] ["put store ok"] [store="id:1003 address:\"tikv2:20160\" version:\"6.1.0\" status_address:\"127.0.0.1:20180\" git_hash:\"080d086832ae5ce2495352dccaf8df5d40f30687\" start_timestamp:1722291777 deploy_path:\"/\" "]
[2024/07/29 22:22:57.735 +00:00] [INFO] [util.go:77] ["load cluster version"] [cluster-version=6.1.0]
[2024/07/29 22:22:57.736 +00:00] [INFO] [grpc_service.go:526] ["put store ok"] [store="id:1001 address:\"tikv0:20160\" version:\"6.1.0\" status_address:\"127.0.0.1:20180\" git_hash:\"080d086832ae5ce2495352dccaf8df5d40f30687\" start_timestamp:1722291777 deploy_path:\"/\" "]
[2024/07/29 22:22:57.736 +00:00] [INFO] [util.go:77] ["load cluster version"] [cluster-version=6.1.0]
[2024/07/29 22:22:57.836 +00:00] [INFO] [grpc_service.go:526] ["put store ok"] [store="id:1002 address:\"tikv1:20160\" version:\"6.1.0\" status_address:\"127.0.0.1:20180\" git_hash:\"080d086832ae5ce2495352dccaf8df5d40f30687\" start_timestamp:1722291777 deploy_path:\"/\" "]
[2024/07/29 22:22:57.836 +00:00] [INFO] [util.go:77] ["load cluster version"] [cluster-version=6.1.0]
[2024/07/29 22:22:58.401 +00:00] [WARN] [grpclog.go:60] ["transport: http2Server.HandleStreams failed to read frame: read tcp 172.19.0.2:2379->172.19.0.8:44000: read: connection reset by peer"]
[2024/07/29 22:23:09.441 +00:00] [INFO] [coordinator.go:321] ["coordinator has finished cluster information preparation"]
[2024/07/29 22:23:09.444 +00:00] [INFO] [coordinator.go:331] ["coordinator starts to run schedulers"]
[2024/07/29 22:23:09.451 +00:00] [INFO] [coordinator.go:379] ["create scheduler with independent configuration"] [scheduler-name=balance-hot-region-scheduler]
[2024/07/29 22:23:09.459 +00:00] [INFO] [coordinator.go:379] ["create scheduler with independent configuration"] [scheduler-name=balance-leader-scheduler]
[2024/07/29 22:23:09.461 +00:00] [INFO] [coordinator.go:379] ["create scheduler with independent configuration"] [scheduler-name=balance-region-scheduler]
[2024/07/29 22:23:09.462 +00:00] [INFO] [coordinator.go:379] ["create scheduler with independent configuration"] [scheduler-name=split-bucket-scheduler]
[2024/07/29 22:23:09.464 +00:00] [INFO] [coordinator.go:401] ["create scheduler"] [scheduler-name=balance-region-scheduler] [scheduler-args="[]"]
[2024/07/29 22:23:09.465 +00:00] [INFO] [coordinator.go:401] ["create scheduler"] [scheduler-name=balance-leader-scheduler] [scheduler-args="[]"]
[2024/07/29 22:23:09.467 +00:00] [INFO] [coordinator.go:401] ["create scheduler"] [scheduler-name=balance-hot-region-scheduler] [scheduler-args="[]"]
[2024/07/29 22:23:09.468 +00:00] [INFO] [coordinator.go:401] ["create scheduler"] [scheduler-name=split-bucket-scheduler] [scheduler-args="[]"]
[2024/07/29 22:23:09.472 +00:00] [INFO] [coordinator.go:109] ["coordinator starts patrol regions"]
[2024/07/29 22:23:09.473 +00:00] [INFO] [coordinator.go:290] ["coordinator begins to actively drive push operator"]
[2024/07/29 22:23:09.473 +00:00] [INFO] [coordinator.go:225] ["coordinator begins to check suspect key ranges"]
[2024/07/29 22:23:10.453 +00:00] [INFO] [hot_region_config.go:351] ["query supported changed"] [last-query-support=false] [cluster-version=6.1.0] [config="{\"min-hot-byte-rate\":100,\"min-hot-key-rate\":10,\"min-hot-query-rate\":10,\"max-zombie-rounds\":3,\"max-peer-number\":1000,\"byte-rate-rank-step-ratio\":0.05,\"key-rate-rank-step-ratio\":0.05,\"query-rate-rank-step-ratio\":0.05,\"count-rank-step-ratio\":0.01,\"great-dec-ratio\":0.95,\"minor-dec-ratio\":0.99,\"src-tolerance-ratio\":1.05,\"dst-tolerance-ratio\":1.05,\"read-priorities\":[\"query\",\"byte\"],\"write-leader-priorities\":[\"key\",\"byte\"],\"write-peer-priorities\":[\"byte\",\"key\"],\"strict-picking-store\":\"true\",\"enable-for-tiflash\":\"true\",\"forbid-rw-type\":\"none\"}"] [valid-config="{\"min-hot-byte-rate\":100,\"min-hot-key-rate\":10,\"min-hot-query-rate\":10,\"max-zombie-rounds\":3,\"max-peer-number\":1000,\"byte-rate-rank-step-ratio\":0.05,\"key-rate-rank-step-ratio\":0.05,\"query-rate-rank-step-ratio\":0.05,\"count-rank-step-ratio\":0.01,\"great-dec-ratio\":0.95,\"minor-dec-ratio\":0.99,\"src-tolerance-ratio\":1.05,\"dst-tolerance-ratio\":1.05,\"read-priorities\":[\"byte\",\"key\"],\"write-leader-priorities\":[\"key\",\"byte\"],\"write-peer-priorities\":[\"byte\",\"key\"],\"strict-picking-store\":\"true\",\"enable-for-tiflash\":\"true\"}"]
[2024/07/29 22:23:51.041 +00:00] [INFO] [coordinator.go:231] ["check suspect key ranges has been stopped"]
[2024/07/29 22:23:51.042 +00:00] [INFO] [coordinator.go:811] ["scheduler has been stopped"] [scheduler-name=balance-region-scheduler] [error="context canceled"]
[2024/07/29 22:23:51.042 +00:00] [INFO] [coordinator.go:811] ["scheduler has been stopped"] [scheduler-name=balance-hot-region-scheduler] [error="context canceled"]
[2024/07/29 22:23:51.042 +00:00] [INFO] [coordinator.go:811] ["scheduler has been stopped"] [scheduler-name=balance-leader-scheduler] [error="context canceled"]
[2024/07/29 22:23:51.042 +00:00] [INFO] [coordinator.go:296] ["drive push operator has been stopped"]
[2024/07/29 22:23:51.042 +00:00] [INFO] [coordinator.go:307] ["coordinator is stopping"]
[2024/07/29 22:23:51.042 +00:00] [INFO] [server.go:1446] ["server is closed, exit etcd leader loop"]
[2024/07/29 22:23:51.042 +00:00] [INFO] [lease.go:159] ["stop lease keep alive worker"] [purpose="pd leader election"]
[2024/07/29 22:23:51.042 +00:00] [INFO] [server.go:566] ["server is closed, exit metrics loop"]
[2024/07/29 22:23:51.042 +00:00] [INFO] [server.go:580] ["server is closed, exit allocator loop"]
[2024/07/29 22:23:51.042 +00:00] [INFO] [cluster.go:388] ["metrics are reset"]
[2024/07/29 22:23:51.047 +00:00] [INFO] [cluster.go:390] ["metrics collection job has been stopped"]
[2024/07/29 22:23:51.042 +00:00] [INFO] [server.go:591] ["server is closed, exist encryption key manager loop"]
[2024/07/29 22:23:51.042 +00:00] [INFO] [cluster.go:2132] ["min resolved ts background jobs has been stopped"]
[2024/07/29 22:23:51.041 +00:00] [INFO] [server.go:1429] ["server is closed"]
[2024/07/29 22:23:51.042 +00:00] [INFO] [coordinator.go:811] ["scheduler has been stopped"] [scheduler-name=split-bucket-scheduler] [error="context canceled"]
[2024/07/29 22:23:51.042 +00:00] [INFO] [server.go:130] ["region syncer has been stopped"]
[2024/07/29 22:23:51.042 +00:00] [INFO] [cluster.go:300] ["sync store config job is stopped"]
[2024/07/29 22:23:51.042 +00:00] [INFO] [cluster.go:429] ["statistics background jobs has been stopped"]
[2024/07/29 22:23:51.042 +00:00] [INFO] [labeler.go:67] ["RegionLabeler GC stopped"]
[2024/07/29 22:23:51.041 +00:00] [INFO] [coordinator.go:117] ["patrol regions has been stopped"]
[2024/07/29 22:23:51.043 +00:00] [INFO] [main.go:121] ["Got signal to exit"] [signal=terminated]
[2024/07/29 22:23:51.042 +00:00] [INFO] [cluster.go:411] ["node state check job has been stopped"]
[2024/07/29 22:23:51.047 +00:00] [INFO] [coordinator.go:309] ["coordinator has been stopped"]
[2024/07/29 22:23:51.047 +00:00] [INFO] [server.go:460] ["closing server"]
[2024/07/29 22:23:51.051 +00:00] [INFO] [cluster.go:469] ["raftcluster is stopped"]
[2024/07/29 22:23:51.052 +00:00] [INFO] [tso.go:405] ["reset the timestamp in memory"]
[2024/07/29 22:23:51.052 +00:00] [INFO] [server.go:1284] ["server is closed, return pd leader loop"]
[2024/07/29 22:23:51.054 +00:00] [INFO] [etcd.go:360] ["closing etcd server"] [name=pd1] [data-dir=/data/pd1] [advertise-peer-urls="[http://pd1:2380]"] [advertise-client-urls="[http://pd1:2379]"]
[2024/07/29 22:23:51.054 +00:00] [WARN] [grpclog.go:60] ["transport: http2Server.HandleStreams failed to read frame: read tcp 127.0.0.1:2379->127.0.0.1:47564: use of closed network connection"]
[2024/07/29 22:23:51.055 +00:00] [WARN] [grpclog.go:60] ["transport: http2Server.HandleStreams failed to read frame: read tcp 172.19.0.2:2379->172.19.0.3:32934: use of closed network connection"]
[2024/07/29 22:23:51.055 +00:00] [WARN] [grpclog.go:60] ["transport: http2Server.HandleStreams failed to read frame: read tcp 172.19.0.2:2379->172.19.0.3:57224: use of closed network connection"]
[2024/07/29 22:23:51.056 +00:00] [WARN] [grpclog.go:60] ["grpc: addrConn.createTransport failed to connect to {0.0.0.0:2379  <nil> 0 <nil>}. Err :connection error: desc = \"transport: Error while dialing dial tcp 0.0.0.0:2379: connect: connection refused\". Reconnecting..."]
[2024/07/29 22:23:51.055 +00:00] [INFO] [server.go:1413] ["leadership transfer starting"] [local-member-id=ed69672f88924e60] [current-leader-member-id=ed69672f88924e60] [transferee-member-id=e3589da502d44cf6]
[2024/07/29 22:23:51.056 +00:00] [INFO] [raft.go:1261] ["ed69672f88924e60 [term 10] starts to transfer leadership to e3589da502d44cf6"]
[2024/07/29 22:23:51.056 +00:00] [INFO] [raft.go:1267] ["ed69672f88924e60 sends MsgTimeoutNow to e3589da502d44cf6 immediately as e3589da502d44cf6 already has up-to-date log"]
[2024/07/29 22:23:51.069 +00:00] [INFO] [raft.go:859] ["ed69672f88924e60 [term: 10] received a MsgVote message with higher term from e3589da502d44cf6 [term: 11]"]
[2024/07/29 22:23:51.074 +00:00] [INFO] [raft.go:700] ["ed69672f88924e60 became follower at term 11"]
[2024/07/29 22:23:51.075 +00:00] [INFO] [raft.go:960] ["ed69672f88924e60 [logterm: 10, index: 288, vote: 0] cast MsgVote for e3589da502d44cf6 [logterm: 10, index: 288] at term 11"]
[2024/07/29 22:23:51.075 +00:00] [INFO] [node.go:331] ["raft.node: ed69672f88924e60 lost leader ed69672f88924e60 at term 11"]
[2024/07/29 22:23:51.079 +00:00] [INFO] [node.go:325] ["raft.node: ed69672f88924e60 elected leader e3589da502d44cf6 at term 11"]
[2024/07/29 22:23:51.557 +00:00] [INFO] [server.go:1434] ["leadership transfer finished"] [local-member-id=ed69672f88924e60] [old-leader-member-id=ed69672f88924e60] [new-leader-member-id=e3589da502d44cf6] [took=501.684667ms]
[2024/07/29 22:23:51.558 +00:00] [INFO] [peer.go:333] ["stopping remote peer"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:23:51.559 +00:00] [WARN] [stream.go:291] ["closed TCP streaming connection with remote peer"] [stream-writer-type="stream MsgApp v2"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:23:51.559 +00:00] [WARN] [stream.go:301] ["stopped TCP streaming connection with remote peer"] [stream-writer-type="stream MsgApp v2"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:23:51.559 +00:00] [WARN] [stream.go:291] ["closed TCP streaming connection with remote peer"] [stream-writer-type="stream Message"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:23:51.559 +00:00] [WARN] [stream.go:301] ["stopped TCP streaming connection with remote peer"] [stream-writer-type="stream Message"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:23:51.560 +00:00] [INFO] [pipeline.go:86] ["stopped HTTP pipelining with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:23:51.560 +00:00] [WARN] [stream.go:436] ["lost TCP streaming connection with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3] [error="context canceled"]
[2024/07/29 22:23:51.561 +00:00] [WARN] [peer_status.go:68] ["peer became inactive (message send to peer failed)"] [peer-id=30610c698d7a69f3] [error="failed to read 30610c698d7a69f3 on stream MsgApp v2 (context canceled)"]
[2024/07/29 22:23:51.561 +00:00] [INFO] [stream.go:459] ["stopped stream reader with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:23:51.561 +00:00] [WARN] [stream.go:436] ["lost TCP streaming connection with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3] [error="context canceled"]
[2024/07/29 22:23:51.562 +00:00] [INFO] [stream.go:459] ["stopped stream reader with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:23:51.562 +00:00] [INFO] [peer.go:340] ["stopped remote peer"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:23:51.562 +00:00] [INFO] [peer.go:333] ["stopping remote peer"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:23:51.562 +00:00] [WARN] [stream.go:291] ["closed TCP streaming connection with remote peer"] [stream-writer-type="stream MsgApp v2"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:23:51.562 +00:00] [WARN] [stream.go:301] ["stopped TCP streaming connection with remote peer"] [stream-writer-type="stream MsgApp v2"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:23:51.563 +00:00] [WARN] [stream.go:291] ["closed TCP streaming connection with remote peer"] [stream-writer-type="stream Message"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:23:51.563 +00:00] [WARN] [stream.go:301] ["stopped TCP streaming connection with remote peer"] [stream-writer-type="stream Message"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:23:51.563 +00:00] [INFO] [pipeline.go:86] ["stopped HTTP pipelining with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:23:51.563 +00:00] [WARN] [stream.go:436] ["lost TCP streaming connection with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6] [error="context canceled"]
[2024/07/29 22:23:51.564 +00:00] [WARN] [peer_status.go:68] ["peer became inactive (message send to peer failed)"] [peer-id=e3589da502d44cf6] [error="failed to read e3589da502d44cf6 on stream MsgApp v2 (context canceled)"]
[2024/07/29 22:23:51.564 +00:00] [INFO] [stream.go:459] ["stopped stream reader with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:23:51.564 +00:00] [WARN] [stream.go:436] ["lost TCP streaming connection with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6] [error="context canceled"]
[2024/07/29 22:23:51.564 +00:00] [INFO] [stream.go:459] ["stopped stream reader with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:23:51.564 +00:00] [INFO] [peer.go:340] ["stopped remote peer"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:23:51.565 +00:00] [WARN] [http.go:444] ["failed to find remote peer in cluster"] [local-member-id=ed69672f88924e60] [remote-peer-id-stream-handler=ed69672f88924e60] [remote-peer-id-from=30610c698d7a69f3] [cluster-id=4586ab14de6050dd]
[2024/07/29 22:23:51.565 +00:00] [WARN] [http.go:444] ["failed to find remote peer in cluster"] [local-member-id=ed69672f88924e60] [remote-peer-id-stream-handler=ed69672f88924e60] [remote-peer-id-from=30610c698d7a69f3] [cluster-id=4586ab14de6050dd]
[2024/07/29 22:23:51.565 +00:00] [WARN] [http.go:444] ["failed to find remote peer in cluster"] [local-member-id=ed69672f88924e60] [remote-peer-id-stream-handler=ed69672f88924e60] [remote-peer-id-from=e3589da502d44cf6] [cluster-id=4586ab14de6050dd]
[2024/07/29 22:23:51.565 +00:00] [WARN] [http.go:444] ["failed to find remote peer in cluster"] [local-member-id=ed69672f88924e60] [remote-peer-id-stream-handler=ed69672f88924e60] [remote-peer-id-from=e3589da502d44cf6] [cluster-id=4586ab14de6050dd]
[2024/07/29 22:23:51.567 +00:00] [INFO] [etcd.go:555] ["stopping serving peer traffic"] [address="[::]:2380"]
[2024/07/29 22:23:51.567 +00:00] [INFO] [etcd.go:562] ["stopped serving peer traffic"] [address="[::]:2380"]
[2024/07/29 22:23:51.567 +00:00] [INFO] [etcd.go:364] ["closed etcd server"] [name=pd1] [data-dir=/data/pd1] [advertise-peer-urls="[http://pd1:2380]"] [advertise-client-urls="[http://pd1:2379]"]
[2024/07/29 22:23:51.569 +00:00] [INFO] [manager.go:73] ["exit dashboard loop"]
[2024/07/29 22:23:51.569 +00:00] [INFO] [server.go:494] ["close server"]
[2024/07/29 22:24:41.275 +00:00] [INFO] [util.go:41] ["Welcome to Placement Driver (PD)"]
[2024/07/29 22:24:41.279 +00:00] [INFO] [util.go:42] [PD] [release-version=v6.1.0]
[2024/07/29 22:24:41.281 +00:00] [INFO] [util.go:43] [PD] [edition=Community]
[2024/07/29 22:24:41.281 +00:00] [INFO] [util.go:44] [PD] [git-hash=d82f4fab6cf37cd1eca9c3574984e12a7ae27c42]
[2024/07/29 22:24:41.281 +00:00] [INFO] [util.go:45] [PD] [git-branch=heads/refs/tags/v6.1.0]
[2024/07/29 22:24:41.283 +00:00] [INFO] [util.go:46] [PD] [utc-build-time="2022-06-01 01:47:53"]
[2024/07/29 22:24:41.284 +00:00] [INFO] [metricutil.go:83] ["disable Prometheus push client"]
[2024/07/29 22:24:41.287 +00:00] [INFO] [server.go:240] ["PD Config"] [config="{\"client-urls\":\"http://0.0.0.0:2379\",\"peer-urls\":\"http://0.0.0.0:2380\",\"advertise-client-urls\":\"http://pd1:2379\",\"advertise-peer-urls\":\"http://pd1:2380\",\"name\":\"pd1\",\"data-dir\":\"/data/pd1\",\"force-new-cluster\":false,\"enable-grpc-gateway\":true,\"initial-cluster\":\"pd0=http://pd0:2380,pd1=http://pd1:2380,pd2=http://pd2:2380\",\"initial-cluster-state\":\"new\",\"initial-cluster-token\":\"pd-cluster\",\"join\":\"\",\"lease\":3,\"log\":{\"level\":\"info\",\"format\":\"text\",\"disable-timestamp\":false,\"file\":{\"filename\":\"/logs/pd1.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0},\"development\":false,\"disable-caller\":false,\"disable-stacktrace\":false,\"disable-error-verbose\":true,\"sampling\":null},\"tso-save-interval\":\"3s\",\"tso-update-physical-interval\":\"50ms\",\"enable-local-tso\":false,\"metric\":{\"job\":\"pd1\",\"address\":\"\",\"interval\":\"15s\"},\"schedule\":{\"max-snapshot-count\":64,\"max-pending-peer-count\":64,\"max-merge-region-size\":20,\"max-merge-region-keys\":200000,\"split-merge-interval\":\"1h0m0s\",\"enable-one-way-merge\":\"false\",\"enable-cross-table-merge\":\"true\",\"patrol-region-interval\":\"10ms\",\"max-store-down-time\":\"30m0s\",\"max-store-preparing-time\":\"48h0m0s\",\"leader-schedule-limit\":4,\"leader-schedule-policy\":\"count\",\"region-schedule-limit\":2048,\"replica-schedule-limit\":64,\"merge-schedule-limit\":8,\"hot-region-schedule-limit\":4,\"hot-region-cache-hits-threshold\":3,\"store-limit\":{},\"tolerant-size-ratio\":0,\"low-space-ratio\":0.8,\"high-space-ratio\":0.7,\"region-score-formula-version\":\"v2\",\"scheduler-max-waiting-operator\":5,\"enable-remove-down-replica\":\"true\",\"enable-replace-offline-replica\":\"true\",\"enable-make-up-replica\":\"true\",\"enable-remove-extra-replica\":\"true\",\"enable-location-replacement\":\"true\",\"enable-debug-metrics\":\"false\",\"enable-joint-consensus\":\"true\",\"schedulers-v2\":[{\"type\":\"balance-region\",\"args\":null,\"disable\":false,\"args-payload\":\"\"},{\"type\":\"balance-leader\",\"args\":null,\"disable\":false,\"args-payload\":\"\"},{\"type\":\"hot-region\",\"args\":null,\"disable\":false,\"args-payload\":\"\"},{\"type\":\"split-bucket\",\"args\":null,\"disable\":false,\"args-payload\":\"\"}],\"schedulers-payload\":null,\"store-limit-mode\":\"manual\",\"hot-regions-write-interval\":\"10m0s\",\"hot-regions-reserved-days\":7},\"replication\":{\"max-replicas\":3,\"location-labels\":\"\",\"strictly-match-label\":\"false\",\"enable-placement-rules\":\"true\",\"enable-placement-rules-cache\":\"false\",\"isolation-level\":\"\"},\"pd-server\":{\"use-region-storage\":\"true\",\"max-gap-reset-ts\":\"24h0m0s\",\"key-type\":\"table\",\"runtime-services\":\"\",\"metric-storage\":\"\",\"dashboard-address\":\"auto\",\"trace-region-flow\":\"true\",\"flow-round-by-digit\":3,\"min-resolved-ts-persistence-interval\":\"0s\"},\"cluster-version\":\"0.0.0\",\"labels\":{},\"quota-backend-bytes\":\"8GiB\",\"auto-compaction-mode\":\"periodic\",\"auto-compaction-retention-v2\":\"1h\",\"TickInterval\":\"500ms\",\"ElectionInterval\":\"3s\",\"PreVote\":true,\"max-request-bytes\":157286400,\"security\":{\"cacert-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cert-allowed-cn\":null,\"SSLCABytes\":null,\"SSLCertBytes\":null,\"SSLKEYBytes\":null,\"redact-info-log\":false,\"encryption\":{\"data-encryption-method\":\"plaintext\",\"data-key-rotation-period\":\"168h0m0s\",\"master-key\":{\"type\":\"plaintext\",\"key-id\":\"\",\"region\":\"\",\"endpoint\":\"\",\"path\":\"\"}}},\"label-property\":null,\"WarningMsgs\":null,\"DisableStrictReconfigCheck\":false,\"HeartbeatStreamBindInterval\":\"1m0s\",\"LeaderPriorityCheckInterval\":\"1m0s\",\"dashboard\":{\"tidb-cacert-path\":\"\",\"tidb-cert-path\":\"\",\"tidb-key-path\":\"\",\"public-path-prefix\":\"\",\"internal-proxy\":false,\"enable-telemetry\":true,\"enable-experimental\":false},\"replication-mode\":{\"replication-mode\":\"majority\",\"dr-auto-sync\":{\"label-key\":\"\",\"primary\":\"\",\"dr\":\"\",\"primary-replicas\":0,\"dr-replicas\":0,\"wait-store-timeout\":\"1m0s\",\"wait-sync-timeout\":\"1m0s\",\"wait-async-timeout\":\"2m0s\",\"pause-region-split\":\"false\"}}}"]
[2024/07/29 22:24:41.300 +00:00] [INFO] [server.go:215] ["register REST path"] [path=/pd/api/v1]
[2024/07/29 22:24:41.300 +00:00] [INFO] [server.go:215] ["register REST path"] [path=/pd/api/v2/]
[2024/07/29 22:24:41.300 +00:00] [INFO] [server.go:215] ["register REST path"] [path=/swagger/]
[2024/07/29 22:24:41.300 +00:00] [INFO] [server.go:215] ["register REST path"] [path=/autoscaling]
[2024/07/29 22:24:41.300 +00:00] [INFO] [distro.go:51] ["Using distribution strings"] [strings={}]
[2024/07/29 22:24:41.301 +00:00] [INFO] [server.go:215] ["register REST path"] [path=/dashboard/api/]
[2024/07/29 22:24:41.302 +00:00] [INFO] [server.go:215] ["register REST path"] [path=/dashboard/]
[2024/07/29 22:24:41.304 +00:00] [INFO] [etcd.go:117] ["configuring peer listeners"] [listen-peer-urls="[http://0.0.0.0:2380]"]
[2024/07/29 22:24:41.304 +00:00] [INFO] [etcd.go:127] ["configuring client listeners"] [listen-client-urls="[http://0.0.0.0:2379]"]
[2024/07/29 22:24:41.304 +00:00] [INFO] [etcd.go:602] ["pprof is enabled"] [path=/debug/pprof]
[2024/07/29 22:24:41.304 +00:00] [INFO] [systimemon.go:28] ["start system time monitor"]
[2024/07/29 22:24:41.306 +00:00] [INFO] [etcd.go:299] ["starting an etcd server"] [etcd-version=3.4.3] [git-sha="Not provided (use ./build instead of go build)"] [go-version=go1.18.2] [go-os=linux] [go-arch=arm64] [max-cpu-set=8] [max-cpu-available=8] [member-initialized=true] [name=pd1] [data-dir=/data/pd1] [wal-dir=] [wal-dir-dedicated=] [member-dir=/data/pd1/member] [force-new-cluster=false] [heartbeat-interval=500ms] [election-timeout=3s] [initial-election-tick-advance=true] [snapshot-count=100000] [snapshot-catchup-entries=5000] [initial-advertise-peer-urls="[http://pd1:2380]"] [listen-peer-urls="[http://0.0.0.0:2380]"] [advertise-client-urls="[http://pd1:2379]"] [listen-client-urls="[http://0.0.0.0:2379]"] [listen-metrics-urls="[]"] [cors="[*]"] [host-whitelist="[*]"] [initial-cluster=] [initial-cluster-state=new] [initial-cluster-token=] [quota-size-bytes=8589934592] [pre-vote=true] [initial-corrupt-check=false] [corrupt-check-time-interval=0s] [auto-compaction-mode=periodic] [auto-compaction-retention=1h0m0s] [auto-compaction-interval=1h0m0s] [discovery-url=] [discovery-proxy=]
[2024/07/29 22:24:41.306 +00:00] [WARN] [server.go:298] ["exceeded recommended request limit"] [max-request-bytes=157286400] [max-request-size="157 MB"] [recommended-request-bytes=10485760] [recommended-request-size="10 MB"]
[2024/07/29 22:24:41.318 +00:00] [INFO] [backend.go:79] ["opened backend db"] [path=/data/pd1/member/snap/db] [took=4.936167ms]
[2024/07/29 22:24:41.331 +00:00] [INFO] [raft.go:506] ["restarting local member"] [cluster-id=4586ab14de6050dd] [local-member-id=ed69672f88924e60] [commit-index=289]
[2024/07/29 22:24:41.332 +00:00] [INFO] [raft.go:1530] ["ed69672f88924e60 switched to configuration voters=()"]
[2024/07/29 22:24:41.332 +00:00] [INFO] [raft.go:700] ["ed69672f88924e60 became follower at term 11"]
[2024/07/29 22:24:41.333 +00:00] [INFO] [raft.go:383] ["newRaft ed69672f88924e60 [peers: [], term: 11, commit: 289, applied: 0, lastindex: 289, lastterm: 11]"]
[2024/07/29 22:24:41.337 +00:00] [WARN] [store.go:1317] ["simple token is not cryptographically signed"]
[2024/07/29 22:24:41.337 +00:00] [INFO] [quota.go:126] ["enabled backend quota"] [quota-name=v3-applier] [quota-size-bytes=8589934592] [quota-size="8.6 GB"]
[2024/07/29 22:24:41.339 +00:00] [INFO] [server.go:792] ["starting etcd server"] [local-member-id=ed69672f88924e60] [local-server-version=3.4.3] [cluster-version=to_be_decided]
[2024/07/29 22:24:41.339 +00:00] [INFO] [server.go:680] ["starting initial election tick advance"] [election-ticks=6]
[2024/07/29 22:24:41.351 +00:00] [INFO] [raft.go:1530] ["ed69672f88924e60 switched to configuration voters=(3486081234046183923)"]
[2024/07/29 22:24:41.353 +00:00] [INFO] [cluster.go:392] ["added member"] [cluster-id=4586ab14de6050dd] [local-member-id=ed69672f88924e60] [added-peer-id=30610c698d7a69f3] [added-peer-peer-urls="[http://pd2:2380]"]
[2024/07/29 22:24:41.356 +00:00] [INFO] [peer.go:128] ["starting remote peer"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:24:41.357 +00:00] [INFO] [pipeline.go:71] ["started HTTP pipelining with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:24:41.357 +00:00] [INFO] [peer.go:134] ["started remote peer"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:24:41.356 +00:00] [INFO] [etcd.go:241] ["now serving peer/client/metrics"] [local-member-id=ed69672f88924e60] [initial-advertise-peer-urls="[http://pd1:2380]"] [listen-peer-urls="[http://0.0.0.0:2380]"] [advertise-client-urls="[http://pd1:2379]"] [listen-client-urls="[http://0.0.0.0:2379]"] [listen-metrics-urls="[]"]
[2024/07/29 22:24:41.356 +00:00] [INFO] [etcd.go:576] ["serving peer traffic"] [address="[::]:2380"]
[2024/07/29 22:24:41.357 +00:00] [INFO] [stream.go:406] ["started stream reader with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:24:41.357 +00:00] [INFO] [stream.go:166] ["started stream writer with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:24:41.357 +00:00] [INFO] [stream.go:406] ["started stream reader with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:24:41.357 +00:00] [INFO] [stream.go:166] ["started stream writer with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:24:41.358 +00:00] [INFO] [transport.go:327] ["added remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3] [remote-peer-urls="[http://pd2:2380]"]
[2024/07/29 22:24:41.361 +00:00] [INFO] [raft.go:1530] ["ed69672f88924e60 switched to configuration voters=(3486081234046183923 16382016976602811638)"]
[2024/07/29 22:24:41.361 +00:00] [INFO] [cluster.go:392] ["added member"] [cluster-id=4586ab14de6050dd] [local-member-id=ed69672f88924e60] [added-peer-id=e3589da502d44cf6] [added-peer-peer-urls="[http://pd0:2380]"]
[2024/07/29 22:24:41.361 +00:00] [INFO] [peer.go:128] ["starting remote peer"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:24:41.362 +00:00] [INFO] [pipeline.go:71] ["started HTTP pipelining with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:24:41.362 +00:00] [INFO] [peer.go:134] ["started remote peer"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:24:41.362 +00:00] [INFO] [transport.go:327] ["added remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6] [remote-peer-urls="[http://pd0:2380]"]
[2024/07/29 22:24:41.362 +00:00] [INFO] [raft.go:1530] ["ed69672f88924e60 switched to configuration voters=(3486081234046183923 16382016976602811638 17107318113395953248)"]
[2024/07/29 22:24:41.363 +00:00] [INFO] [cluster.go:392] ["added member"] [cluster-id=4586ab14de6050dd] [local-member-id=ed69672f88924e60] [added-peer-id=ed69672f88924e60] [added-peer-peer-urls="[http://pd1:2380]"]
[2024/07/29 22:24:41.363 +00:00] [INFO] [cluster.go:558] ["set initial cluster version"] [cluster-id=4586ab14de6050dd] [local-member-id=ed69672f88924e60] [cluster-version=3.4]
[2024/07/29 22:24:41.363 +00:00] [INFO] [capability.go:76] ["enabled capabilities for version"] [cluster-version=3.4]
[2024/07/29 22:24:41.363 +00:00] [INFO] [stream.go:406] ["started stream reader with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:24:41.363 +00:00] [INFO] [stream.go:166] ["started stream writer with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:24:41.364 +00:00] [INFO] [stream.go:250] ["set message encoder"] [from=ed69672f88924e60] [to=ed69672f88924e60] [stream-type="stream MsgApp v2"]
[2024/07/29 22:24:41.363 +00:00] [INFO] [stream.go:166] ["started stream writer with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:24:41.363 +00:00] [INFO] [stream.go:406] ["started stream reader with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:24:41.364 +00:00] [INFO] [peer_status.go:51] ["peer became active"] [peer-id=e3589da502d44cf6]
[2024/07/29 22:24:41.365 +00:00] [INFO] [stream.go:425] ["established TCP streaming connection with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:24:41.365 +00:00] [INFO] [stream.go:250] ["set message encoder"] [from=ed69672f88924e60] [to=ed69672f88924e60] [stream-type="stream Message"]
[2024/07/29 22:24:41.365 +00:00] [WARN] [stream.go:277] ["established TCP streaming connection with remote peer"] [stream-writer-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:24:41.365 +00:00] [WARN] [stream.go:277] ["established TCP streaming connection with remote peer"] [stream-writer-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:24:41.365 +00:00] [INFO] [stream.go:425] ["established TCP streaming connection with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:24:41.369 +00:00] [INFO] [stream.go:250] ["set message encoder"] [from=ed69672f88924e60] [to=ed69672f88924e60] [stream-type="stream Message"]
[2024/07/29 22:24:41.370 +00:00] [INFO] [peer_status.go:51] ["peer became active"] [peer-id=30610c698d7a69f3]
[2024/07/29 22:24:41.370 +00:00] [WARN] [stream.go:277] ["established TCP streaming connection with remote peer"] [stream-writer-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:24:41.370 +00:00] [INFO] [stream.go:250] ["set message encoder"] [from=ed69672f88924e60] [to=ed69672f88924e60] [stream-type="stream MsgApp v2"]
[2024/07/29 22:24:41.370 +00:00] [WARN] [stream.go:277] ["established TCP streaming connection with remote peer"] [stream-writer-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:24:41.372 +00:00] [INFO] [stream.go:425] ["established TCP streaming connection with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:24:41.373 +00:00] [INFO] [stream.go:425] ["established TCP streaming connection with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:24:41.403 +00:00] [INFO] [server.go:705] ["initialized peer connections; fast-forwarding election ticks"] [local-member-id=ed69672f88924e60] [forward-ticks=4] [forward-duration=2s] [election-ticks=6] [election-timeout=3s] [active-remote-members=2]
[2024/07/29 22:24:43.342 +00:00] [INFO] [raft.go:960] ["ed69672f88924e60 [logterm: 11, index: 289, vote: e3589da502d44cf6] cast MsgPreVote for 30610c698d7a69f3 [logterm: 13, index: 296] at term 11"]
[2024/07/29 22:24:43.362 +00:00] [INFO] [raft.go:859] ["ed69672f88924e60 [term: 11] received a MsgVote message with higher term from 30610c698d7a69f3 [term: 14]"]
[2024/07/29 22:24:43.362 +00:00] [INFO] [raft.go:700] ["ed69672f88924e60 became follower at term 14"]
[2024/07/29 22:24:43.363 +00:00] [INFO] [raft.go:960] ["ed69672f88924e60 [logterm: 11, index: 289, vote: 0] cast MsgVote for 30610c698d7a69f3 [logterm: 13, index: 296] at term 14"]
[2024/07/29 22:24:43.395 +00:00] [INFO] [node.go:325] ["raft.node: ed69672f88924e60 elected leader 30610c698d7a69f3 at term 14"]
[2024/07/29 22:24:43.399 +00:00] [INFO] [server.go:2016] ["published local member to cluster through raft"] [local-member-id=ed69672f88924e60] [local-member-attributes="{Name:pd1 ClientURLs:[http://pd1:2379]}"] [request-path=/0/members/ed69672f88924e60/attributes] [cluster-id=4586ab14de6050dd] [publish-timeout=11s]
[2024/07/29 22:24:43.400 +00:00] [INFO] [server.go:326] ["create etcd v3 client"] [endpoints="[http://pd1:2379]"] [cert="{\"cacert-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cert-allowed-cn\":null,\"SSLCABytes\":null,\"SSLCertBytes\":null,\"SSLKEYBytes\":null,\"redact-info-log\":false,\"encryption\":{\"data-encryption-method\":\"plaintext\",\"data-key-rotation-period\":\"168h0m0s\",\"master-key\":{\"type\":\"plaintext\",\"key-id\":\"\",\"region\":\"\",\"endpoint\":\"\",\"path\":\"\"}}}"]
[2024/07/29 22:24:43.401 +00:00] [INFO] [serve.go:139] ["serving client traffic insecurely; this is strongly discouraged!"] [address="[::]:2379"]
[2024/07/29 22:24:43.407 +00:00] [INFO] [server.go:381] ["init cluster id"] [cluster-id=7397183400508190990]
[2024/07/29 22:24:43.437 +00:00] [INFO] [history_buffer.go:147] ["start from history index"] [start-index=0]
[2024/07/29 22:24:43.455 +00:00] [INFO] [server.go:1314] ["skip campaigning of pd leader and check later"] [server-name=pd1] [etcd-leader-id=3486081234046183923] [member-id=17107318113395953248]
[2024/07/29 22:24:43.659 +00:00] [INFO] [server.go:1470] ["server enable region storage"]
[2024/07/29 22:24:43.659 +00:00] [INFO] [server.go:1304] ["start to watch pd leader"] [pd-leader="name:\"pd2\" member_id:3486081234046183923 peer_urls:\"http://pd2:2380\" client_urls:\"http://pd2:2379\" "]
[2024/07/29 22:24:43.659 +00:00] [INFO] [client.go:123] ["region syncer start load region"]
[2024/07/29 22:24:43.660 +00:00] [INFO] [client.go:126] ["region syncer finished load region"] [time-cost=413.458µs]
[2024/07/29 22:24:43.661 +00:00] [INFO] [client.go:167] ["server starts to synchronize with leader"] [server=pd1] [leader=pd2] [request-index=0]
[2024/07/29 22:24:48.436 +00:00] [WARN] [util.go:144] ["apply request took too long"] [took=980.838042ms] [expected-duration=100ms] [prefix="read-only range "] [request="key:\"/pd/7397183400508190990/config\" "] [response="range_response_count:1 size:3660"] []
[2024/07/29 22:24:48.436 +00:00] [INFO] [trace.go:145] ["trace[1173522650] range"] [detail="{range_begin:/pd/7397183400508190990/config; range_end:; response_count:1; response_revision:274; }"] [duration=981.561042ms] [start=2024/07/29 22:24:47.455 +00:00] [end=2024/07/29 22:24:48.436 +00:00] [steps="[\"trace[1173522650] 'range keys from in-memory index tree'  (duration: 980.53075ms)\"]"]
[2024/07/29 22:43:47.636 +00:00] [INFO] [server.go:580] ["server is closed, exit allocator loop"]
[2024/07/29 22:43:47.636 +00:00] [INFO] [server.go:1446] ["server is closed, exit etcd leader loop"]
[2024/07/29 22:43:47.637 +00:00] [INFO] [server.go:566] ["server is closed, exit metrics loop"]
[2024/07/29 22:43:47.637 +00:00] [INFO] [server.go:591] ["server is closed, exist encryption key manager loop"]
[2024/07/29 22:43:47.636 +00:00] [INFO] [main.go:121] ["Got signal to exit"] [signal=terminated]
[2024/07/29 22:43:47.639 +00:00] [INFO] [server.go:460] ["closing server"]
[2024/07/29 22:43:47.637 +00:00] [ERROR] [client.go:171] ["region sync with leader meet error"] [error="[PD:grpc:ErrGRPCRecv]rpc error: code = Canceled desc = context canceled: rpc error: code = Canceled desc = context canceled"]
[2024/07/29 22:43:47.664 +00:00] [WARN] [grpclog.go:60] ["grpc: addrConn.createTransport failed to connect to {pd2:2379  <nil> 0 <nil>}. Err :connection error: desc = \"transport: Error while dialing dial tcp 172.20.0.3:2379: connect: connection refused\". Reconnecting..."]
[2024/07/29 22:43:47.672 +00:00] [INFO] [raft.go:859] ["ed69672f88924e60 [term: 14] received a MsgVote message with higher term from e3589da502d44cf6 [term: 15]"]
[2024/07/29 22:43:47.673 +00:00] [INFO] [raft.go:700] ["ed69672f88924e60 became follower at term 15"]
[2024/07/29 22:43:47.673 +00:00] [INFO] [raft.go:960] ["ed69672f88924e60 [logterm: 14, index: 719, vote: 0] cast MsgVote for e3589da502d44cf6 [logterm: 14, index: 719] at term 15"]
[2024/07/29 22:43:47.673 +00:00] [INFO] [node.go:331] ["raft.node: ed69672f88924e60 lost leader 30610c698d7a69f3 at term 15"]
[2024/07/29 22:43:47.674 +00:00] [INFO] [node.go:325] ["raft.node: ed69672f88924e60 elected leader e3589da502d44cf6 at term 15"]
[2024/07/29 22:43:48.186 +00:00] [WARN] [stream.go:436] ["lost TCP streaming connection with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3] [error=EOF]
[2024/07/29 22:43:48.186 +00:00] [WARN] [stream.go:436] ["lost TCP streaming connection with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3] [error=EOF]
[2024/07/29 22:43:48.190 +00:00] [WARN] [peer_status.go:68] ["peer became inactive (message send to peer failed)"] [peer-id=30610c698d7a69f3] [error="failed to dial 30610c698d7a69f3 on stream MsgApp v2 (peer 30610c698d7a69f3 failed to find local node ed69672f88924e60)"]
[2024/07/29 22:43:48.639 +00:00] [INFO] [server.go:1308] ["pd leader has changed, try to re-campaign a pd leader"]
[2024/07/29 22:43:48.639 +00:00] [INFO] [server.go:1314] ["skip campaigning of pd leader and check later"] [server-name=pd1] [etcd-leader-id=16382016976602811638] [member-id=17107318113395953248]
[2024/07/29 22:43:48.709 +00:00] [INFO] [raft.go:1355] ["ed69672f88924e60 [term 15] received MsgTimeoutNow from e3589da502d44cf6 and starts an election to get leadership."]
[2024/07/29 22:43:48.709 +00:00] [INFO] [raft.go:713] ["ed69672f88924e60 became candidate at term 16"]
[2024/07/29 22:43:48.709 +00:00] [INFO] [raft.go:824] ["ed69672f88924e60 received MsgVoteResp from ed69672f88924e60 at term 16"]
[2024/07/29 22:43:48.710 +00:00] [INFO] [raft.go:811] ["ed69672f88924e60 [logterm: 15, index: 725] sent MsgVote request to 30610c698d7a69f3 at term 16"]
[2024/07/29 22:43:48.710 +00:00] [INFO] [raft.go:811] ["ed69672f88924e60 [logterm: 15, index: 725] sent MsgVote request to e3589da502d44cf6 at term 16"]
[2024/07/29 22:43:48.710 +00:00] [INFO] [node.go:331] ["raft.node: ed69672f88924e60 lost leader e3589da502d44cf6 at term 16"]
[2024/07/29 22:43:48.711 +00:00] [INFO] [raft.go:824] ["ed69672f88924e60 received MsgVoteResp from e3589da502d44cf6 at term 16"]
[2024/07/29 22:43:48.711 +00:00] [INFO] [raft.go:1302] ["ed69672f88924e60 has received 2 MsgVoteResp votes and 0 vote rejections"]
[2024/07/29 22:43:48.711 +00:00] [INFO] [raft.go:765] ["ed69672f88924e60 became leader at term 16"]
[2024/07/29 22:43:48.711 +00:00] [INFO] [node.go:325] ["raft.node: ed69672f88924e60 elected leader ed69672f88924e60 at term 16"]
[2024/07/29 22:43:48.715 +00:00] [WARN] [cluster_util.go:315] ["failed to reach the peer URL"] [address=http://pd2:2380/version] [remote-member-id=30610c698d7a69f3] [error="Get \"http://pd2:2380/version\": dial tcp: lookup pd2 on 127.0.0.11:53: no such host"]
[2024/07/29 22:43:48.715 +00:00] [WARN] [cluster_util.go:168] ["failed to get version"] [remote-member-id=30610c698d7a69f3] [error="Get \"http://pd2:2380/version\": dial tcp: lookup pd2 on 127.0.0.11:53: no such host"]
[2024/07/29 22:43:48.840 +00:00] [INFO] [server.go:1284] ["server is closed, return pd leader loop"]
[2024/07/29 22:43:48.840 +00:00] [INFO] [etcd.go:360] ["closing etcd server"] [name=pd1] [data-dir=/data/pd1] [advertise-peer-urls="[http://pd1:2380]"] [advertise-client-urls="[http://pd1:2379]"]
[2024/07/29 22:43:48.841 +00:00] [WARN] [grpclog.go:60] ["transport: http2Server.HandleStreams failed to read frame: read tcp 127.0.0.1:2379->127.0.0.1:54454: use of closed network connection"]
[2024/07/29 22:43:48.841 +00:00] [INFO] [server.go:1413] ["leadership transfer starting"] [local-member-id=ed69672f88924e60] [current-leader-member-id=ed69672f88924e60] [transferee-member-id=e3589da502d44cf6]
[2024/07/29 22:43:48.841 +00:00] [INFO] [raft.go:1261] ["ed69672f88924e60 [term 16] starts to transfer leadership to e3589da502d44cf6"]
[2024/07/29 22:43:48.841 +00:00] [INFO] [raft.go:1267] ["ed69672f88924e60 sends MsgTimeoutNow to e3589da502d44cf6 immediately as e3589da502d44cf6 already has up-to-date log"]
[2024/07/29 22:43:48.843 +00:00] [INFO] [raft.go:859] ["ed69672f88924e60 [term: 16] received a MsgVote message with higher term from e3589da502d44cf6 [term: 17]"]
[2024/07/29 22:43:48.844 +00:00] [INFO] [raft.go:700] ["ed69672f88924e60 became follower at term 17"]
[2024/07/29 22:43:48.844 +00:00] [INFO] [raft.go:960] ["ed69672f88924e60 [logterm: 16, index: 726, vote: 0] cast MsgVote for e3589da502d44cf6 [logterm: 16, index: 726] at term 17"]
[2024/07/29 22:43:48.844 +00:00] [INFO] [node.go:331] ["raft.node: ed69672f88924e60 lost leader ed69672f88924e60 at term 17"]
[2024/07/29 22:43:48.845 +00:00] [INFO] [node.go:325] ["raft.node: ed69672f88924e60 elected leader e3589da502d44cf6 at term 17"]
[2024/07/29 22:43:49.342 +00:00] [INFO] [server.go:1434] ["leadership transfer finished"] [local-member-id=ed69672f88924e60] [old-leader-member-id=ed69672f88924e60] [new-leader-member-id=e3589da502d44cf6] [took=500.737459ms]
[2024/07/29 22:43:49.342 +00:00] [INFO] [peer.go:333] ["stopping remote peer"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:43:49.345 +00:00] [WARN] [stream.go:291] ["closed TCP streaming connection with remote peer"] [stream-writer-type="stream MsgApp v2"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:43:49.345 +00:00] [WARN] [stream.go:301] ["stopped TCP streaming connection with remote peer"] [stream-writer-type="stream MsgApp v2"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:43:49.345 +00:00] [WARN] [stream.go:291] ["closed TCP streaming connection with remote peer"] [stream-writer-type="stream Message"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:43:49.346 +00:00] [WARN] [stream.go:301] ["stopped TCP streaming connection with remote peer"] [stream-writer-type="stream Message"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:43:49.346 +00:00] [INFO] [pipeline.go:86] ["stopped HTTP pipelining with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:43:49.347 +00:00] [INFO] [stream.go:459] ["stopped stream reader with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:43:49.347 +00:00] [INFO] [stream.go:459] ["stopped stream reader with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:43:49.347 +00:00] [INFO] [peer.go:340] ["stopped remote peer"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:43:49.347 +00:00] [INFO] [peer.go:333] ["stopping remote peer"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:43:49.348 +00:00] [WARN] [stream.go:291] ["closed TCP streaming connection with remote peer"] [stream-writer-type="stream MsgApp v2"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:43:49.348 +00:00] [WARN] [stream.go:301] ["stopped TCP streaming connection with remote peer"] [stream-writer-type="stream MsgApp v2"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:43:49.348 +00:00] [WARN] [stream.go:291] ["closed TCP streaming connection with remote peer"] [stream-writer-type="stream Message"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:43:49.348 +00:00] [WARN] [stream.go:301] ["stopped TCP streaming connection with remote peer"] [stream-writer-type="stream Message"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:43:49.348 +00:00] [INFO] [pipeline.go:86] ["stopped HTTP pipelining with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:43:49.349 +00:00] [WARN] [stream.go:436] ["lost TCP streaming connection with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6] [error="context canceled"]
[2024/07/29 22:43:49.349 +00:00] [WARN] [peer_status.go:68] ["peer became inactive (message send to peer failed)"] [peer-id=e3589da502d44cf6] [error="failed to read e3589da502d44cf6 on stream MsgApp v2 (context canceled)"]
[2024/07/29 22:43:49.349 +00:00] [INFO] [stream.go:459] ["stopped stream reader with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:43:49.350 +00:00] [WARN] [stream.go:436] ["lost TCP streaming connection with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6] [error="context canceled"]
[2024/07/29 22:43:49.350 +00:00] [INFO] [stream.go:459] ["stopped stream reader with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:43:49.350 +00:00] [INFO] [peer.go:340] ["stopped remote peer"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:43:49.351 +00:00] [WARN] [http.go:444] ["failed to find remote peer in cluster"] [local-member-id=ed69672f88924e60] [remote-peer-id-stream-handler=ed69672f88924e60] [remote-peer-id-from=e3589da502d44cf6] [cluster-id=4586ab14de6050dd]
[2024/07/29 22:43:49.351 +00:00] [WARN] [http.go:444] ["failed to find remote peer in cluster"] [local-member-id=ed69672f88924e60] [remote-peer-id-stream-handler=ed69672f88924e60] [remote-peer-id-from=e3589da502d44cf6] [cluster-id=4586ab14de6050dd]
[2024/07/29 22:43:49.353 +00:00] [INFO] [etcd.go:555] ["stopping serving peer traffic"] [address="[::]:2380"]
[2024/07/29 22:43:49.354 +00:00] [INFO] [etcd.go:562] ["stopped serving peer traffic"] [address="[::]:2380"]
[2024/07/29 22:43:49.354 +00:00] [INFO] [etcd.go:364] ["closed etcd server"] [name=pd1] [data-dir=/data/pd1] [advertise-peer-urls="[http://pd1:2380]"] [advertise-client-urls="[http://pd1:2379]"]
[2024/07/29 22:43:49.357 +00:00] [INFO] [manager.go:73] ["exit dashboard loop"]
[2024/07/29 22:43:49.357 +00:00] [INFO] [server.go:494] ["close server"]
[2024/07/29 22:56:29.162 +00:00] [INFO] [util.go:41] ["Welcome to Placement Driver (PD)"]
[2024/07/29 22:56:29.164 +00:00] [INFO] [util.go:42] [PD] [release-version=v6.1.0]
[2024/07/29 22:56:29.165 +00:00] [INFO] [util.go:43] [PD] [edition=Community]
[2024/07/29 22:56:29.166 +00:00] [INFO] [util.go:44] [PD] [git-hash=d82f4fab6cf37cd1eca9c3574984e12a7ae27c42]
[2024/07/29 22:56:29.167 +00:00] [INFO] [util.go:45] [PD] [git-branch=heads/refs/tags/v6.1.0]
[2024/07/29 22:56:29.168 +00:00] [INFO] [util.go:46] [PD] [utc-build-time="2022-06-01 01:47:53"]
[2024/07/29 22:56:29.168 +00:00] [INFO] [metricutil.go:83] ["disable Prometheus push client"]
[2024/07/29 22:56:29.169 +00:00] [INFO] [server.go:240] ["PD Config"] [config="{\"client-urls\":\"http://0.0.0.0:2379\",\"peer-urls\":\"http://0.0.0.0:2380\",\"advertise-client-urls\":\"http://pd1:2379\",\"advertise-peer-urls\":\"http://pd1:2380\",\"name\":\"pd1\",\"data-dir\":\"/data/pd1\",\"force-new-cluster\":false,\"enable-grpc-gateway\":true,\"initial-cluster\":\"pd0=http://pd0:2380,pd1=http://pd1:2380,pd2=http://pd2:2380\",\"initial-cluster-state\":\"new\",\"initial-cluster-token\":\"pd-cluster\",\"join\":\"\",\"lease\":3,\"log\":{\"level\":\"info\",\"format\":\"text\",\"disable-timestamp\":false,\"file\":{\"filename\":\"/logs/pd1.log\",\"max-size\":300,\"max-days\":0,\"max-backups\":0},\"development\":false,\"disable-caller\":false,\"disable-stacktrace\":false,\"disable-error-verbose\":true,\"sampling\":null},\"tso-save-interval\":\"3s\",\"tso-update-physical-interval\":\"50ms\",\"enable-local-tso\":false,\"metric\":{\"job\":\"pd1\",\"address\":\"\",\"interval\":\"15s\"},\"schedule\":{\"max-snapshot-count\":64,\"max-pending-peer-count\":64,\"max-merge-region-size\":20,\"max-merge-region-keys\":200000,\"split-merge-interval\":\"1h0m0s\",\"enable-one-way-merge\":\"false\",\"enable-cross-table-merge\":\"true\",\"patrol-region-interval\":\"10ms\",\"max-store-down-time\":\"30m0s\",\"max-store-preparing-time\":\"48h0m0s\",\"leader-schedule-limit\":4,\"leader-schedule-policy\":\"count\",\"region-schedule-limit\":2048,\"replica-schedule-limit\":64,\"merge-schedule-limit\":8,\"hot-region-schedule-limit\":4,\"hot-region-cache-hits-threshold\":3,\"store-limit\":{},\"tolerant-size-ratio\":0,\"low-space-ratio\":0.8,\"high-space-ratio\":0.7,\"region-score-formula-version\":\"v2\",\"scheduler-max-waiting-operator\":5,\"enable-remove-down-replica\":\"true\",\"enable-replace-offline-replica\":\"true\",\"enable-make-up-replica\":\"true\",\"enable-remove-extra-replica\":\"true\",\"enable-location-replacement\":\"true\",\"enable-debug-metrics\":\"false\",\"enable-joint-consensus\":\"true\",\"schedulers-v2\":[{\"type\":\"balance-region\",\"args\":null,\"disable\":false,\"args-payload\":\"\"},{\"type\":\"balance-leader\",\"args\":null,\"disable\":false,\"args-payload\":\"\"},{\"type\":\"hot-region\",\"args\":null,\"disable\":false,\"args-payload\":\"\"},{\"type\":\"split-bucket\",\"args\":null,\"disable\":false,\"args-payload\":\"\"}],\"schedulers-payload\":null,\"store-limit-mode\":\"manual\",\"hot-regions-write-interval\":\"10m0s\",\"hot-regions-reserved-days\":7},\"replication\":{\"max-replicas\":3,\"location-labels\":\"\",\"strictly-match-label\":\"false\",\"enable-placement-rules\":\"true\",\"enable-placement-rules-cache\":\"false\",\"isolation-level\":\"\"},\"pd-server\":{\"use-region-storage\":\"true\",\"max-gap-reset-ts\":\"24h0m0s\",\"key-type\":\"table\",\"runtime-services\":\"\",\"metric-storage\":\"\",\"dashboard-address\":\"auto\",\"trace-region-flow\":\"true\",\"flow-round-by-digit\":3,\"min-resolved-ts-persistence-interval\":\"0s\"},\"cluster-version\":\"0.0.0\",\"labels\":{},\"quota-backend-bytes\":\"8GiB\",\"auto-compaction-mode\":\"periodic\",\"auto-compaction-retention-v2\":\"1h\",\"TickInterval\":\"500ms\",\"ElectionInterval\":\"3s\",\"PreVote\":true,\"max-request-bytes\":157286400,\"security\":{\"cacert-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cert-allowed-cn\":null,\"SSLCABytes\":null,\"SSLCertBytes\":null,\"SSLKEYBytes\":null,\"redact-info-log\":false,\"encryption\":{\"data-encryption-method\":\"plaintext\",\"data-key-rotation-period\":\"168h0m0s\",\"master-key\":{\"type\":\"plaintext\",\"key-id\":\"\",\"region\":\"\",\"endpoint\":\"\",\"path\":\"\"}}},\"label-property\":null,\"WarningMsgs\":null,\"DisableStrictReconfigCheck\":false,\"HeartbeatStreamBindInterval\":\"1m0s\",\"LeaderPriorityCheckInterval\":\"1m0s\",\"dashboard\":{\"tidb-cacert-path\":\"\",\"tidb-cert-path\":\"\",\"tidb-key-path\":\"\",\"public-path-prefix\":\"\",\"internal-proxy\":false,\"enable-telemetry\":true,\"enable-experimental\":false},\"replication-mode\":{\"replication-mode\":\"majority\",\"dr-auto-sync\":{\"label-key\":\"\",\"primary\":\"\",\"dr\":\"\",\"primary-replicas\":0,\"dr-replicas\":0,\"wait-store-timeout\":\"1m0s\",\"wait-sync-timeout\":\"1m0s\",\"wait-async-timeout\":\"2m0s\",\"pause-region-split\":\"false\"}}}"]
[2024/07/29 22:56:29.172 +00:00] [INFO] [server.go:215] ["register REST path"] [path=/pd/api/v1]
[2024/07/29 22:56:29.173 +00:00] [INFO] [server.go:215] ["register REST path"] [path=/pd/api/v2/]
[2024/07/29 22:56:29.173 +00:00] [INFO] [server.go:215] ["register REST path"] [path=/swagger/]
[2024/07/29 22:56:29.174 +00:00] [INFO] [server.go:215] ["register REST path"] [path=/autoscaling]
[2024/07/29 22:56:29.175 +00:00] [INFO] [distro.go:51] ["Using distribution strings"] [strings={}]
[2024/07/29 22:56:29.175 +00:00] [INFO] [server.go:215] ["register REST path"] [path=/dashboard/api/]
[2024/07/29 22:56:29.176 +00:00] [INFO] [server.go:215] ["register REST path"] [path=/dashboard/]
[2024/07/29 22:56:29.177 +00:00] [INFO] [etcd.go:117] ["configuring peer listeners"] [listen-peer-urls="[http://0.0.0.0:2380]"]
[2024/07/29 22:56:29.178 +00:00] [INFO] [etcd.go:127] ["configuring client listeners"] [listen-client-urls="[http://0.0.0.0:2379]"]
[2024/07/29 22:56:29.183 +00:00] [INFO] [etcd.go:602] ["pprof is enabled"] [path=/debug/pprof]
[2024/07/29 22:56:29.177 +00:00] [INFO] [systimemon.go:28] ["start system time monitor"]
[2024/07/29 22:56:29.187 +00:00] [INFO] [etcd.go:299] ["starting an etcd server"] [etcd-version=3.4.3] [git-sha="Not provided (use ./build instead of go build)"] [go-version=go1.18.2] [go-os=linux] [go-arch=arm64] [max-cpu-set=8] [max-cpu-available=8] [member-initialized=true] [name=pd1] [data-dir=/data/pd1] [wal-dir=] [wal-dir-dedicated=] [member-dir=/data/pd1/member] [force-new-cluster=false] [heartbeat-interval=500ms] [election-timeout=3s] [initial-election-tick-advance=true] [snapshot-count=100000] [snapshot-catchup-entries=5000] [initial-advertise-peer-urls="[http://pd1:2380]"] [listen-peer-urls="[http://0.0.0.0:2380]"] [advertise-client-urls="[http://pd1:2379]"] [listen-client-urls="[http://0.0.0.0:2379]"] [listen-metrics-urls="[]"] [cors="[*]"] [host-whitelist="[*]"] [initial-cluster=] [initial-cluster-state=new] [initial-cluster-token=] [quota-size-bytes=8589934592] [pre-vote=true] [initial-corrupt-check=false] [corrupt-check-time-interval=0s] [auto-compaction-mode=periodic] [auto-compaction-retention=1h0m0s] [auto-compaction-interval=1h0m0s] [discovery-url=] [discovery-proxy=]
[2024/07/29 22:56:29.187 +00:00] [WARN] [server.go:298] ["exceeded recommended request limit"] [max-request-bytes=157286400] [max-request-size="157 MB"] [recommended-request-bytes=10485760] [recommended-request-size="10 MB"]
[2024/07/29 22:56:29.204 +00:00] [INFO] [backend.go:79] ["opened backend db"] [path=/data/pd1/member/snap/db] [took=7.626167ms]
[2024/07/29 22:56:29.245 +00:00] [INFO] [raft.go:506] ["restarting local member"] [cluster-id=4586ab14de6050dd] [local-member-id=ed69672f88924e60] [commit-index=727]
[2024/07/29 22:56:29.249 +00:00] [INFO] [raft.go:1530] ["ed69672f88924e60 switched to configuration voters=()"]
[2024/07/29 22:56:29.250 +00:00] [INFO] [raft.go:700] ["ed69672f88924e60 became follower at term 17"]
[2024/07/29 22:56:29.251 +00:00] [INFO] [raft.go:383] ["newRaft ed69672f88924e60 [peers: [], term: 17, commit: 727, applied: 0, lastindex: 727, lastterm: 17]"]
[2024/07/29 22:56:29.259 +00:00] [WARN] [store.go:1317] ["simple token is not cryptographically signed"]
[2024/07/29 22:56:29.262 +00:00] [INFO] [quota.go:126] ["enabled backend quota"] [quota-name=v3-applier] [quota-size-bytes=8589934592] [quota-size="8.6 GB"]
[2024/07/29 22:56:29.271 +00:00] [INFO] [server.go:792] ["starting etcd server"] [local-member-id=ed69672f88924e60] [local-server-version=3.4.3] [cluster-version=to_be_decided]
[2024/07/29 22:56:29.273 +00:00] [INFO] [server.go:680] ["starting initial election tick advance"] [election-ticks=6]
[2024/07/29 22:56:29.273 +00:00] [INFO] [raft.go:1530] ["ed69672f88924e60 switched to configuration voters=(3486081234046183923)"]
[2024/07/29 22:56:29.275 +00:00] [INFO] [cluster.go:392] ["added member"] [cluster-id=4586ab14de6050dd] [local-member-id=ed69672f88924e60] [added-peer-id=30610c698d7a69f3] [added-peer-peer-urls="[http://pd2:2380]"]
[2024/07/29 22:56:29.281 +00:00] [INFO] [peer.go:128] ["starting remote peer"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:56:29.280 +00:00] [INFO] [etcd.go:241] ["now serving peer/client/metrics"] [local-member-id=ed69672f88924e60] [initial-advertise-peer-urls="[http://pd1:2380]"] [listen-peer-urls="[http://0.0.0.0:2380]"] [advertise-client-urls="[http://pd1:2379]"] [listen-client-urls="[http://0.0.0.0:2379]"] [listen-metrics-urls="[]"]
[2024/07/29 22:56:29.281 +00:00] [INFO] [etcd.go:576] ["serving peer traffic"] [address="[::]:2380"]
[2024/07/29 22:56:29.282 +00:00] [INFO] [pipeline.go:71] ["started HTTP pipelining with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:56:29.285 +00:00] [INFO] [peer.go:134] ["started remote peer"] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:56:29.287 +00:00] [INFO] [transport.go:327] ["added remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3] [remote-peer-urls="[http://pd2:2380]"]
[2024/07/29 22:56:29.288 +00:00] [INFO] [raft.go:1530] ["ed69672f88924e60 switched to configuration voters=(3486081234046183923 16382016976602811638)"]
[2024/07/29 22:56:29.287 +00:00] [INFO] [stream.go:406] ["started stream reader with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:56:29.285 +00:00] [INFO] [stream.go:166] ["started stream writer with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:56:29.285 +00:00] [INFO] [stream.go:406] ["started stream reader with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:56:29.285 +00:00] [INFO] [stream.go:166] ["started stream writer with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:56:29.288 +00:00] [INFO] [cluster.go:392] ["added member"] [cluster-id=4586ab14de6050dd] [local-member-id=ed69672f88924e60] [added-peer-id=e3589da502d44cf6] [added-peer-peer-urls="[http://pd0:2380]"]
[2024/07/29 22:56:29.290 +00:00] [INFO] [peer.go:128] ["starting remote peer"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:56:29.290 +00:00] [INFO] [pipeline.go:71] ["started HTTP pipelining with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:56:29.291 +00:00] [INFO] [peer.go:134] ["started remote peer"] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:56:29.291 +00:00] [INFO] [transport.go:327] ["added remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6] [remote-peer-urls="[http://pd0:2380]"]
[2024/07/29 22:56:29.291 +00:00] [INFO] [raft.go:1530] ["ed69672f88924e60 switched to configuration voters=(3486081234046183923 16382016976602811638 17107318113395953248)"]
[2024/07/29 22:56:29.291 +00:00] [INFO] [cluster.go:392] ["added member"] [cluster-id=4586ab14de6050dd] [local-member-id=ed69672f88924e60] [added-peer-id=ed69672f88924e60] [added-peer-peer-urls="[http://pd1:2380]"]
[2024/07/29 22:56:29.291 +00:00] [INFO] [cluster.go:558] ["set initial cluster version"] [cluster-id=4586ab14de6050dd] [local-member-id=ed69672f88924e60] [cluster-version=3.4]
[2024/07/29 22:56:29.292 +00:00] [INFO] [capability.go:76] ["enabled capabilities for version"] [cluster-version=3.4]
[2024/07/29 22:56:29.291 +00:00] [INFO] [stream.go:406] ["started stream reader with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:56:29.291 +00:00] [INFO] [stream.go:166] ["started stream writer with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:56:29.294 +00:00] [INFO] [stream.go:250] ["set message encoder"] [from=ed69672f88924e60] [to=ed69672f88924e60] [stream-type="stream MsgApp v2"]
[2024/07/29 22:56:29.291 +00:00] [INFO] [stream.go:166] ["started stream writer with remote peer"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:56:29.291 +00:00] [INFO] [stream.go:406] ["started stream reader with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:56:29.294 +00:00] [INFO] [peer_status.go:51] ["peer became active"] [peer-id=e3589da502d44cf6]
[2024/07/29 22:56:29.295 +00:00] [INFO] [stream.go:425] ["established TCP streaming connection with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:56:29.295 +00:00] [WARN] [stream.go:277] ["established TCP streaming connection with remote peer"] [stream-writer-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:56:29.294 +00:00] [INFO] [stream.go:250] ["set message encoder"] [from=ed69672f88924e60] [to=ed69672f88924e60] [stream-type="stream Message"]
[2024/07/29 22:56:29.296 +00:00] [WARN] [stream.go:277] ["established TCP streaming connection with remote peer"] [stream-writer-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:56:29.295 +00:00] [INFO] [stream.go:425] ["established TCP streaming connection with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6]
[2024/07/29 22:56:29.300 +00:00] [INFO] [peer_status.go:51] ["peer became active"] [peer-id=30610c698d7a69f3]
[2024/07/29 22:56:29.301 +00:00] [INFO] [stream.go:425] ["established TCP streaming connection with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:56:29.301 +00:00] [INFO] [stream.go:425] ["established TCP streaming connection with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:56:29.303 +00:00] [INFO] [stream.go:250] ["set message encoder"] [from=ed69672f88924e60] [to=ed69672f88924e60] [stream-type="stream MsgApp v2"]
[2024/07/29 22:56:29.303 +00:00] [WARN] [stream.go:277] ["established TCP streaming connection with remote peer"] [stream-writer-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:56:29.303 +00:00] [INFO] [stream.go:250] ["set message encoder"] [from=ed69672f88924e60] [to=ed69672f88924e60] [stream-type="stream Message"]
[2024/07/29 22:56:29.303 +00:00] [WARN] [stream.go:277] ["established TCP streaming connection with remote peer"] [stream-writer-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3]
[2024/07/29 22:56:29.323 +00:00] [INFO] [server.go:705] ["initialized peer connections; fast-forwarding election ticks"] [local-member-id=ed69672f88924e60] [forward-ticks=4] [forward-duration=2s] [election-ticks=6] [election-timeout=3s] [active-remote-members=2]
[2024/07/29 22:56:30.254 +00:00] [INFO] [raft.go:960] ["ed69672f88924e60 [logterm: 17, index: 727, vote: e3589da502d44cf6] cast MsgPreVote for e3589da502d44cf6 [logterm: 17, index: 727] at term 17"]
[2024/07/29 22:56:30.271 +00:00] [INFO] [raft.go:859] ["ed69672f88924e60 [term: 17] received a MsgVote message with higher term from e3589da502d44cf6 [term: 18]"]
[2024/07/29 22:56:30.271 +00:00] [INFO] [raft.go:700] ["ed69672f88924e60 became follower at term 18"]
[2024/07/29 22:56:30.271 +00:00] [INFO] [raft.go:960] ["ed69672f88924e60 [logterm: 17, index: 727, vote: 0] cast MsgVote for e3589da502d44cf6 [logterm: 17, index: 727] at term 18"]
[2024/07/29 22:56:30.271 +00:00] [INFO] [raft.go:896] ["ed69672f88924e60 [logterm: 17, index: 727, vote: e3589da502d44cf6] rejected MsgPreVote from 30610c698d7a69f3 [logterm: 15, index: 720] at term 18"]
[2024/07/29 22:56:30.302 +00:00] [INFO] [node.go:325] ["raft.node: ed69672f88924e60 elected leader e3589da502d44cf6 at term 18"]
[2024/07/29 22:56:30.309 +00:00] [INFO] [server.go:2016] ["published local member to cluster through raft"] [local-member-id=ed69672f88924e60] [local-member-attributes="{Name:pd1 ClientURLs:[http://pd1:2379]}"] [request-path=/0/members/ed69672f88924e60/attributes] [cluster-id=4586ab14de6050dd] [publish-timeout=11s]
[2024/07/29 22:56:30.309 +00:00] [INFO] [server.go:326] ["create etcd v3 client"] [endpoints="[http://pd1:2379]"] [cert="{\"cacert-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"cert-allowed-cn\":null,\"SSLCABytes\":null,\"SSLCertBytes\":null,\"SSLKEYBytes\":null,\"redact-info-log\":false,\"encryption\":{\"data-encryption-method\":\"plaintext\",\"data-key-rotation-period\":\"168h0m0s\",\"master-key\":{\"type\":\"plaintext\",\"key-id\":\"\",\"region\":\"\",\"endpoint\":\"\",\"path\":\"\"}}}"]
[2024/07/29 22:56:30.310 +00:00] [INFO] [serve.go:139] ["serving client traffic insecurely; this is strongly discouraged!"] [address="[::]:2379"]
[2024/07/29 22:56:30.316 +00:00] [INFO] [server.go:381] ["init cluster id"] [cluster-id=7397183400508190990]
[2024/07/29 22:56:30.360 +00:00] [INFO] [history_buffer.go:147] ["start from history index"] [start-index=0]
[2024/07/29 22:56:30.397 +00:00] [INFO] [server.go:1470] ["server enable region storage"]
[2024/07/29 22:56:30.398 +00:00] [INFO] [server.go:1304] ["start to watch pd leader"] [pd-leader="name:\"pd0\" member_id:16382016976602811638 peer_urls:\"http://pd0:2380\" client_urls:\"http://pd0:2379\" "]
[2024/07/29 22:56:30.398 +00:00] [INFO] [client.go:123] ["region syncer start load region"]
[2024/07/29 22:56:30.400 +00:00] [INFO] [client.go:126] ["region syncer finished load region"] [time-cost=804.291µs]
[2024/07/29 22:56:30.403 +00:00] [INFO] [client.go:167] ["server starts to synchronize with leader"] [server=pd1] [leader=pd0] [request-index=0]
[2024/07/29 22:56:30.405 +00:00] [ERROR] [client.go:171] ["region sync with leader meet error"] [error="[PD:grpc:ErrGRPCRecv]rpc error: code = Unavailable desc = server not started: rpc error: code = Unavailable desc = server not started"]
[2024/07/29 22:56:31.407 +00:00] [INFO] [client.go:167] ["server starts to synchronize with leader"] [server=pd1] [leader=pd0] [request-index=0]
[2024/07/29 22:56:46.374 +00:00] [WARN] [wal.go:712] ["slow fdatasync"] [took=2.278527959s] [expected-duration=1s]
[2024/07/29 22:56:46.401 +00:00] [WARN] [util.go:144] ["apply request took too long"] [took=7.012838378s] [expected-duration=100ms] [prefix="read-only range "] [request="key:\"/pd/7397183400508190990/config\" "] [response="range_response_count:1 size:3660"] []
[2024/07/29 22:56:46.403 +00:00] [INFO] [trace.go:145] ["trace[1166413417] range"] [detail="{range_begin:/pd/7397183400508190990/config; range_end:; response_count:1; response_revision:696; }"] [duration=7.015324462s] [start=2024/07/29 22:56:39.388 +00:00] [end=2024/07/29 22:56:46.403 +00:00] [steps="[\"trace[1166413417] 'agreement among raft nodes before linearized reading'  (duration: 7.009695879s)\"]"]
[2024/07/29 22:56:46.407 +00:00] [WARN] [etcdutil.go:121] ["kv gets too slow"] [request-key=/pd/7397183400508190990/config] [cost=7.019742962s] []
[2024/07/29 22:56:49.961 +00:00] [WARN] [util.go:144] ["apply request took too long"] [took=205.049917ms] [expected-duration=100ms] [prefix=] [request="header:<ID:5545779423386682417 > txn:<compare:<target:VALUE key:\"/pd/7397183400508190990/leader\" value_size:50 > success:<request_put:<key:\"/pd/7397183400508190990/timestamp\" value_size:8 >> failure:<>>"] [response=size:16] []
[2024/07/29 22:56:50.088 +00:00] [WARN] [util.go:144] ["apply request took too long"] [took=458.050875ms] [expected-duration=100ms] [prefix="read-only range "] [request="key:\"/pd/7397183400508190990/config\" "] [response="range_response_count:1 size:3660"] []
[2024/07/29 22:56:50.093 +00:00] [INFO] [trace.go:145] ["trace[955628685] range"] [detail="{range_begin:/pd/7397183400508190990/config; range_end:; response_count:1; response_revision:702; }"] [duration=462.558041ms] [start=2024/07/29 22:56:49.625 +00:00] [end=2024/07/29 22:56:50.088 +00:00] [steps="[\"trace[955628685] 'agreement among raft nodes before linearized reading'  (duration: 348.268291ms)\",\"trace[955628685] 'range keys from bolt db'  (duration: 109.6485ms)\"]"]
[2024/07/29 22:56:52.969 +00:00] [WARN] [util.go:144] ["apply request took too long"] [took=523.628916ms] [expected-duration=100ms] [prefix=] [request="header:<ID:5545779423386682418 > txn:<compare:<target:VALUE key:\"/pd/7397183400508190990/leader\" value_size:50 > success:<request_put:<key:\"/pd/7397183400508190990/timestamp\" value_size:8 >> failure:<>>"] [response=size:16] []
[2024/07/29 22:56:55.830 +00:00] [WARN] [util.go:144] ["apply request took too long"] [took=438.770542ms] [expected-duration=100ms] [prefix="read-only range "] [request="key:\"/pd/7397183400508190990/config\" "] [response="range_response_count:1 size:3660"] []
[2024/07/29 22:56:55.835 +00:00] [INFO] [trace.go:145] ["trace[1510668399] range"] [detail="{range_begin:/pd/7397183400508190990/config; range_end:; response_count:1; response_revision:703; }"] [duration=445.362208ms] [start=2024/07/29 22:56:55.390 +00:00] [end=2024/07/29 22:56:55.835 +00:00] [steps="[\"trace[1510668399] 'range keys from in-memory index tree'  (duration: 436.97475ms)\"]"]
[2024/07/29 22:56:57.866 +00:00] [WARN] [util.go:144] ["apply request took too long"] [took=475.5865ms] [expected-duration=100ms] [prefix="read-only range "] [request="key:\"/pd/7397183400508190990/config\" "] [response="range_response_count:1 size:3660"] []
[2024/07/29 22:56:57.869 +00:00] [INFO] [trace.go:145] ["trace[1477593026] range"] [detail="{range_begin:/pd/7397183400508190990/config; range_end:; response_count:1; response_revision:707; }"] [duration=478.731083ms] [start=2024/07/29 22:56:57.390 +00:00] [end=2024/07/29 22:56:57.869 +00:00] [steps="[\"trace[1477593026] 'agreement among raft nodes before linearized reading'  (duration: 472.414667ms)\"]"]
[2024/07/29 22:58:56.066 +00:00] [INFO] [main.go:121] ["Got signal to exit"] [signal=terminated]
[2024/07/29 22:58:56.067 +00:00] [INFO] [server.go:460] ["closing server"]
[2024/07/29 22:58:56.066 +00:00] [INFO] [server.go:580] ["server is closed, exit allocator loop"]
[2024/07/29 22:58:56.066 +00:00] [INFO] [server.go:566] ["server is closed, exit metrics loop"]
[2024/07/29 22:58:56.066 +00:00] [INFO] [server.go:1446] ["server is closed, exit etcd leader loop"]
[2024/07/29 22:58:56.066 +00:00] [INFO] [server.go:591] ["server is closed, exist encryption key manager loop"]
[2024/07/29 22:58:56.066 +00:00] [ERROR] [client.go:171] ["region sync with leader meet error"] [error="[PD:grpc:ErrGRPCRecv]rpc error: code = Canceled desc = context canceled: rpc error: code = Canceled desc = context canceled"]
[2024/07/29 22:58:56.079 +00:00] [WARN] [grpclog.go:60] ["grpc: addrConn.createTransport failed to connect to {pd0:2379  <nil> 0 <nil>}. Err :connection error: desc = \"transport: Error while dialing dial tcp 172.23.0.3:2379: connect: connection refused\". Reconnecting..."]
[2024/07/29 22:58:56.081 +00:00] [INFO] [raft.go:1355] ["ed69672f88924e60 [term 18] received MsgTimeoutNow from e3589da502d44cf6 and starts an election to get leadership."]
[2024/07/29 22:58:56.082 +00:00] [INFO] [raft.go:713] ["ed69672f88924e60 became candidate at term 19"]
[2024/07/29 22:58:56.082 +00:00] [INFO] [raft.go:824] ["ed69672f88924e60 received MsgVoteResp from ed69672f88924e60 at term 19"]
[2024/07/29 22:58:56.083 +00:00] [INFO] [raft.go:811] ["ed69672f88924e60 [logterm: 18, index: 806] sent MsgVote request to 30610c698d7a69f3 at term 19"]
[2024/07/29 22:58:56.084 +00:00] [INFO] [raft.go:811] ["ed69672f88924e60 [logterm: 18, index: 806] sent MsgVote request to e3589da502d44cf6 at term 19"]
[2024/07/29 22:58:56.084 +00:00] [INFO] [node.go:331] ["raft.node: ed69672f88924e60 lost leader e3589da502d44cf6 at term 19"]
[2024/07/29 22:58:56.085 +00:00] [INFO] [raft.go:824] ["ed69672f88924e60 received MsgVoteResp from e3589da502d44cf6 at term 19"]
[2024/07/29 22:58:56.086 +00:00] [INFO] [raft.go:1302] ["ed69672f88924e60 has received 2 MsgVoteResp votes and 0 vote rejections"]
[2024/07/29 22:58:56.086 +00:00] [INFO] [raft.go:765] ["ed69672f88924e60 became leader at term 19"]
[2024/07/29 22:58:56.087 +00:00] [INFO] [node.go:325] ["raft.node: ed69672f88924e60 elected leader ed69672f88924e60 at term 19"]
[2024/07/29 22:58:56.592 +00:00] [WARN] [stream.go:436] ["lost TCP streaming connection with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6] [error=EOF]
[2024/07/29 22:58:56.592 +00:00] [WARN] [stream.go:436] ["lost TCP streaming connection with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=e3589da502d44cf6] [error=EOF]
[2024/07/29 22:58:56.595 +00:00] [WARN] [peer_status.go:68] ["peer became inactive (message send to peer failed)"] [peer-id=e3589da502d44cf6] [error="failed to dial e3589da502d44cf6 on stream Message (peer e3589da502d44cf6 failed to find local node ed69672f88924e60)"]
[2024/07/29 22:58:57.069 +00:00] [INFO] [server.go:1308] ["pd leader has changed, try to re-campaign a pd leader"]
[2024/07/29 22:58:57.070 +00:00] [INFO] [server.go:1326] ["start to campaign pd leader"] [campaign-pd-leader-name=pd1]
[2024/07/29 22:58:57.076 +00:00] [INFO] [lease.go:65] ["lease granted"] [lease-id=5647673364955940519] [lease-timeout=3] [purpose="pd leader election"]
[2024/07/29 22:58:57.078 +00:00] [INFO] [leadership.go:122] ["check campaign resp"] [resp="{\"header\":{\"cluster_id\":5009879741614805213,\"member_id\":17107318113395953248,\"revision\":758,\"raft_term\":19},\"succeeded\":true,\"responses\":[{\"Response\":{\"ResponsePut\":{\"header\":{\"revision\":758}}}}]}"]
[2024/07/29 22:58:57.079 +00:00] [INFO] [leadership.go:131] ["write leaderData to leaderPath ok"] [leaderPath=/pd/7397183400508190990/leader] [purpose="pd leader election"]
[2024/07/29 22:58:57.079 +00:00] [INFO] [server.go:1352] ["campaign pd leader ok"] [campaign-pd-leader-name=pd1]
[2024/07/29 22:58:57.079 +00:00] [INFO] [server.go:1359] ["initializing the global TSO allocator"]
[2024/07/29 22:58:57.079 +00:00] [INFO] [lease.go:135] ["start lease keep alive worker"] [interval=1s] [purpose="pd leader election"]
[2024/07/29 22:58:57.080 +00:00] [INFO] [lease.go:159] ["stop lease keep alive worker"] [purpose="pd leader election"]
[2024/07/29 22:58:57.080 +00:00] [WARN] [lease.go:145] ["lease keep alive failed"] [purpose="pd leader election"] [error="context canceled"]
[2024/07/29 22:58:57.082 +00:00] [ERROR] [tso.go:210] ["system time may be incorrect"] [last=2024/07/29 22:58:58.726 +00:00] [next=2024/07/29 22:58:57.082 +00:00] [error="[PD:common:ErrIncorrectSystemTime]incorrect system time"]
[2024/07/29 22:58:57.083 +00:00] [INFO] [tso.go:221] ["sync and save timestamp"] [last=2024/07/29 22:58:58.726 +00:00] [save=2024/07/29 22:59:01.727 +00:00] [next=2024/07/29 22:58:58.727 +00:00]
[2024/07/29 22:58:57.084 +00:00] [INFO] [server.go:1470] ["server enable region storage"]
[2024/07/29 22:58:57.088 +00:00] [INFO] [cluster.go:352] ["load stores"] [count=3] [cost=2.019542ms]
[2024/07/29 22:58:57.088 +00:00] [INFO] [cluster.go:363] ["load regions"] [count=1] [cost=625ns]
[2024/07/29 22:58:57.089 +00:00] [INFO] [labeler.go:67] ["RegionLabeler GC stopped"]
[2024/07/29 22:58:57.089 +00:00] [INFO] [cluster.go:388] ["metrics are reset"]
[2024/07/29 22:58:57.090 +00:00] [INFO] [cluster.go:390] ["metrics collection job has been stopped"]
[2024/07/29 22:58:57.089 +00:00] [INFO] [coordinator.go:318] ["coordinator starts to collect cluster information"]
[2024/07/29 22:58:57.090 +00:00] [INFO] [coordinator.go:327] ["coordinator stops running"]
[2024/07/29 22:58:57.090 +00:00] [INFO] [coordinator.go:307] ["coordinator is stopping"]
[2024/07/29 22:58:57.090 +00:00] [INFO] [coordinator.go:309] ["coordinator has been stopped"]
[2024/07/29 22:58:57.089 +00:00] [INFO] [cluster.go:411] ["node state check job has been stopped"]
[2024/07/29 22:58:57.089 +00:00] [INFO] [cluster.go:429] ["statistics background jobs has been stopped"]
[2024/07/29 22:58:57.089 +00:00] [INFO] [server.go:130] ["region syncer has been stopped"]
[2024/07/29 22:58:57.090 +00:00] [INFO] [cluster.go:2132] ["min resolved ts background jobs has been stopped"]
[2024/07/29 22:58:57.091 +00:00] [INFO] [id.go:122] ["idAllocator allocates a new id"] [alloc-id=11000]
[2024/07/29 22:58:57.091 +00:00] [INFO] [util.go:77] ["load cluster version"] [cluster-version=6.1.0]
[2024/07/29 22:58:57.091 +00:00] [INFO] [server.go:1410] ["PD cluster leader is ready to serve"] [pd-leader-name=pd1]
[2024/07/29 22:58:57.091 +00:00] [INFO] [server.go:1429] ["server is closed"]
[2024/07/29 22:58:57.124 +00:00] [INFO] [cluster.go:300] ["sync store config job is stopped"]
[2024/07/29 22:58:57.124 +00:00] [INFO] [cluster.go:469] ["raftcluster is stopped"]
[2024/07/29 22:58:57.125 +00:00] [INFO] [tso.go:405] ["reset the timestamp in memory"]
[2024/07/29 22:58:57.125 +00:00] [INFO] [server.go:1284] ["server is closed, return pd leader loop"]
[2024/07/29 22:58:57.125 +00:00] [INFO] [etcd.go:360] ["closing etcd server"] [name=pd1] [data-dir=/data/pd1] [advertise-peer-urls="[http://pd1:2380]"] [advertise-client-urls="[http://pd1:2379]"]
[2024/07/29 22:58:57.125 +00:00] [INFO] [server.go:1413] ["leadership transfer starting"] [local-member-id=ed69672f88924e60] [current-leader-member-id=ed69672f88924e60] [transferee-member-id=30610c698d7a69f3]
[2024/07/29 22:58:57.126 +00:00] [INFO] [raft.go:1261] ["ed69672f88924e60 [term 19] starts to transfer leadership to 30610c698d7a69f3"]
[2024/07/29 22:58:57.126 +00:00] [INFO] [raft.go:1267] ["ed69672f88924e60 sends MsgTimeoutNow to 30610c698d7a69f3 immediately as 30610c698d7a69f3 already has up-to-date log"]
[2024/07/29 22:58:57.125 +00:00] [WARN] [grpclog.go:60] ["transport: http2Server.HandleStreams failed to read frame: read tcp 127.0.0.1:2379->127.0.0.1:59740: use of closed network connection"]
[2024/07/29 22:58:57.127 +00:00] [INFO] [raft.go:859] ["ed69672f88924e60 [term: 19] received a MsgVote message with higher term from 30610c698d7a69f3 [term: 20]"]
[2024/07/29 22:58:57.127 +00:00] [INFO] [raft.go:700] ["ed69672f88924e60 became follower at term 20"]
[2024/07/29 22:58:57.127 +00:00] [INFO] [raft.go:960] ["ed69672f88924e60 [logterm: 19, index: 812, vote: 0] cast MsgVote for 30610c698d7a69f3 [logterm: 19, index: 812] at term 20"]
[2024/07/29 22:58:57.127 +00:00] [INFO] [node.go:331] ["raft.node: ed69672f88924e60 lost leader ed69672f88924e60 at term 20"]
[2024/07/29 22:58:57.128 +00:00] [INFO] [node.go:325] ["raft.node: ed69672f88924e60 elected leader 30610c698d7a69f3 at term 20"]
[2024/07/29 22:58:57.278 +00:00] [INFO] [raft.go:1355] ["ed69672f88924e60 [term 20] received MsgTimeoutNow from 30610c698d7a69f3 and starts an election to get leadership."]
[2024/07/29 22:58:57.278 +00:00] [INFO] [raft.go:713] ["ed69672f88924e60 became candidate at term 21"]
[2024/07/29 22:58:57.278 +00:00] [INFO] [raft.go:824] ["ed69672f88924e60 received MsgVoteResp from ed69672f88924e60 at term 21"]
[2024/07/29 22:58:57.278 +00:00] [INFO] [raft.go:811] ["ed69672f88924e60 [logterm: 20, index: 813] sent MsgVote request to 30610c698d7a69f3 at term 21"]
[2024/07/29 22:58:57.278 +00:00] [INFO] [raft.go:811] ["ed69672f88924e60 [logterm: 20, index: 813] sent MsgVote request to e3589da502d44cf6 at term 21"]
[2024/07/29 22:58:57.279 +00:00] [INFO] [node.go:331] ["raft.node: ed69672f88924e60 lost leader 30610c698d7a69f3 at term 21"]
[2024/07/29 22:58:57.280 +00:00] [INFO] [raft.go:824] ["ed69672f88924e60 received MsgVoteResp from 30610c698d7a69f3 at term 21"]
[2024/07/29 22:58:57.280 +00:00] [INFO] [raft.go:1302] ["ed69672f88924e60 has received 2 MsgVoteResp votes and 0 vote rejections"]
[2024/07/29 22:58:57.280 +00:00] [INFO] [raft.go:765] ["ed69672f88924e60 became leader at term 21"]
[2024/07/29 22:58:57.280 +00:00] [INFO] [node.go:325] ["raft.node: ed69672f88924e60 elected leader ed69672f88924e60 at term 21"]
[2024/07/29 22:58:57.285 +00:00] [WARN] [cluster_util.go:315] ["failed to reach the peer URL"] [address=http://pd0:2380/version] [remote-member-id=e3589da502d44cf6] [error="Get \"http://pd0:2380/version\": dial tcp: lookup pd0 on 127.0.0.11:53: no such host"]
[2024/07/29 22:58:57.286 +00:00] [WARN] [cluster_util.go:168] ["failed to get version"] [remote-member-id=e3589da502d44cf6] [error="Get \"http://pd0:2380/version\": dial tcp: lookup pd0 on 127.0.0.11:53: no such host"]
[2024/07/29 22:58:57.781 +00:00] [WARN] [stream.go:436] ["lost TCP streaming connection with remote peer"] [stream-reader-type="stream MsgApp v2"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3] [error=EOF]
[2024/07/29 22:58:57.782 +00:00] [WARN] [stream.go:436] ["lost TCP streaming connection with remote peer"] [stream-reader-type="stream Message"] [local-member-id=ed69672f88924e60] [remote-peer-id=30610c698d7a69f3] [error=EOF]
[2024/07/29 22:58:57.788 +00:00] [WARN] [peer_status.go:68] ["peer became inactive (message send to peer failed)"] [peer-id=30610c698d7a69f3] [error="failed to dial 30610c698d7a69f3 on stream Message (peer 30610c698d7a69f3 failed to find local node ed69672f88924e60)"]
[2024/07/29 22:59:01.293 +00:00] [WARN] [cluster_util.go:315] ["failed to reach the peer URL"] [address=http://pd2:2380/version] [remote-member-id=30610c698d7a69f3] [error="Get \"http://pd2:2380/version\": dial tcp: lookup pd2 on 127.0.0.11:53: no such host"]
[2024/07/29 22:59:01.294 +00:00] [WARN] [cluster_util.go:168] ["failed to get version"] [remote-member-id=30610c698d7a69f3] [error="Get \"http://pd2:2380/version\": dial tcp: lookup pd2 on 127.0.0.11:53: no such host"]
[2024/07/29 22:59:01.294 +00:00] [WARN] [cluster_util.go:315] ["failed to reach the peer URL"] [address=http://pd0:2380/version] [remote-member-id=e3589da502d44cf6] [error="Get \"http://pd0:2380/version\": dial tcp: lookup pd0 on 127.0.0.11:53: no such host"]
[2024/07/29 22:59:01.295 +00:00] [WARN] [cluster_util.go:168] ["failed to get version"] [remote-member-id=e3589da502d44cf6] [error="Get \"http://pd0:2380/version\": dial tcp: lookup pd0 on 127.0.0.11:53: no such host"]
[2024/07/29 22:59:03.253 +00:00] [WARN] [raft.go:1011] ["ed69672f88924e60 stepped down to follower since quorum is not active"]
[2024/07/29 22:59:03.254 +00:00] [INFO] [raft.go:700] ["ed69672f88924e60 became follower at term 21"]
[2024/07/29 22:59:03.255 +00:00] [INFO] [node.go:331] ["raft.node: ed69672f88924e60 lost leader ed69672f88924e60 at term 21"]
[2024/07/29 22:59:04.765 +00:00] [WARN] [probing_status.go:70] ["prober detected unhealthy status"] [round-tripper-name=ROUND_TRIPPER_SNAPSHOT] [remote-peer-id=e3589da502d44cf6] [rtt=579.685µs] [error="dial tcp: lookup pd0 on 127.0.0.11:53: no such host"]
[2024/07/29 22:59:04.769 +00:00] [WARN] [probing_status.go:70] ["prober detected unhealthy status"] [round-tripper-name=ROUND_TRIPPER_RAFT_MESSAGE] [remote-peer-id=30610c698d7a69f3] [rtt=2.130127ms] [error="dial tcp: lookup pd2 on 127.0.0.11:53: no such host"]
[2024/07/29 22:59:04.769 +00:00] [WARN] [probing_status.go:70] ["prober detected unhealthy status"] [round-tripper-name=ROUND_TRIPPER_RAFT_MESSAGE] [remote-peer-id=e3589da502d44cf6] [rtt=1.621383ms] [error="dial tcp: lookup pd0 on 127.0.0.11:53: no such host"]
[2024/07/29 22:59:04.769 +00:00] [WARN] [probing_status.go:70] ["prober detected unhealthy status"] [round-tripper-name=ROUND_TRIPPER_SNAPSHOT] [remote-peer-id=30610c698d7a69f3] [rtt=691.008µs] [error="dial tcp: lookup pd2 on 127.0.0.11:53: no such host"]
